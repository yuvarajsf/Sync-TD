"use strict";(self["webpackChunkthreat_dragon"]=self["webpackChunkthreat_dragon"]||[]).push([[391],{2831:function(t,e,i){i.d(e,{A:function(){return n}});var a=function(){var t=this,e=t._self._c;return e("b-btn",{class:{"td-primary-btn":t.isPrimary,"td-default-btn":!t.isPrimary},attrs:{variant:t.isPrimary?"primary":"secondary"},on:{click:t.onBtnClick}},[t.icon?e("font-awesome-icon",{attrs:{icon:[t.iconPreface,t.icon]}}):t._e(),t._v(" "+t._s(t.text)+" ")],1)},r=[],o={name:"TdFormButton",props:{onBtnClick:{type:Function,required:!0},icon:{type:String,required:!1},iconPreface:{type:String,default:"fas",required:!1},text:{type:String,required:!0},isPrimary:{type:Boolean,required:!1,default:!1}}},d=o,l=i(1656),s=(0,l.A)(d,a,r,!1,null,"0e945f2a",null),n=s.exports},1142:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("b-row",[t.model&&t.model.summary?e("b-col",[e("b-card",{attrs:{header:`${t.$t("threatmodel.editing")}: ${t.model.summary.title}`,id:"parent-card"}},[e("b-form",{on:{submit:t.onSubmit}},[e("b-form-row",[e("b-col",[e("b-form-group",{attrs:{id:"title-group",label:t.$t("threatmodel.title"),"label-for":"title"}},[e("b-form-input",{attrs:{id:"title",type:"text",required:""},on:{input:function(e){return t.onModifyModel()}},model:{value:t.model.summary.title,callback:function(e){t.$set(t.model.summary,"title",e)},expression:"model.summary.title"}})],1)],1)],1),e("b-form-row",[e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{id:"owner-group",label:t.$t("threatmodel.owner"),"label-for":"owner"}},[e("b-form-input",{attrs:{id:"owner",type:"text"},on:{input:function(e){return t.onModifyModel()}},model:{value:t.model.summary.owner,callback:function(e){t.$set(t.model.summary,"owner",e)},expression:"model.summary.owner"}})],1)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{id:"reviewer-group",label:t.$t("threatmodel.reviewer"),"label-for":"reviewer"}},[e("b-form-input",{attrs:{id:"reviewer",type:"text"},on:{input:function(e){return t.onModifyModel()}},model:{value:t.model.detail.reviewer,callback:function(e){t.$set(t.model.detail,"reviewer",e)},expression:"model.detail.reviewer"}})],1)],1)],1),e("b-form-row",[e("b-col",[e("b-form-group",{attrs:{id:"description-group",label:t.$t("threatmodel.description"),"label-for":"description"}},[e("b-form-textarea",{attrs:{id:"description",type:"text"},on:{input:function(e){return t.onModifyModel()}},model:{value:t.model.summary.description,callback:function(e){t.$set(t.model.summary,"description",e)},expression:"model.summary.description"}})],1)],1)],1),e("b-form-row",[e("b-col",[e("b-form-group",{attrs:{id:"contributors-group",label:t.$t("threatmodel.contributors"),"label-for":"contributors"}},[e("b-form-tags",{attrs:{id:"contributors",placeholder:t.$t("threatmodel.contributorsPlaceholder"),variant:"primary",separator:",;","tag-class":"mx-2"},on:{input:function(e){return t.onModifyModel()}},model:{value:t.contributors,callback:function(e){t.contributors=e},expression:"contributors"}})],1)],1)],1),e("b-form-row",[e("b-col",[e("h5",[t._v(t._s(t.$t("threatmodel.diagram.diagrams")))])])],1),e("b-form-row",t._l(t.model.detail.diagrams,(function(i,a){return e("b-col",{key:a,attrs:{md:"8"}},[e("b-input-group",{staticClass:"mb-3",attrs:{id:`diagram-group-${a}`,"label-for":`diagram-${a}`}},[e("b-input-group-prepend",[e("b-dropdown",{staticClass:"select-diagram-type",attrs:{variant:"secondary",text:t.model.detail.diagrams[a].diagramType}},[e("b-dropdown-item-button",{on:{click:function(e){return t.onDiagramTypeClick(a,"CIA")}}},[t._v(t._s(t.$t("threatmodel.diagram.cia.select")))]),e("b-dropdown-item-button",{on:{click:function(e){return t.onDiagramTypeClick(a,"DIE")}}},[t._v(t._s(t.$t("threatmodel.diagram.die.select")))]),e("b-dropdown-item-button",{on:{click:function(e){return t.onDiagramTypeClick(a,"LINDDUN")}}},[t._v(t._s(t.$t("threatmodel.diagram.linddun.select")))]),e("b-dropdown-item-button",{on:{click:function(e){return t.onDiagramTypeClick(a,"PLOT4ai")}}},[t._v(t._s(t.$t("threatmodel.diagram.plot4ai.select")))]),e("b-dropdown-item-button",{on:{click:function(e){return t.onDiagramTypeClick(a,"STRIDE")}}},[t._v(t._s(t.$t("threatmodel.diagram.stride.select")))]),e("b-dropdown-item-button",{on:{click:function(e){return t.onDiagramTypeClick(a,"Generic")}}},[t._v(t._s(t.$t("threatmodel.diagram.generic.select")))])],1)],1),e("b-form-input",{staticClass:"td-diagram",attrs:{type:"text"},model:{value:t.model.detail.diagrams[a].title,callback:function(e){t.$set(t.model.detail.diagrams[a],"title",e)},expression:"model.detail.diagrams[idx].title"}}),e("b-form-input",{staticClass:"td-diagram-description",attrs:{placeholder:t.model.detail.diagrams[a].placeholder,type:"text"},model:{value:t.model.detail.diagrams[a].description,callback:function(e){t.$set(t.model.detail.diagrams[a],"description",e)},expression:"model.detail.diagrams[idx].description"}}),e("b-input-group-append",[e("b-button",{staticClass:"td-remove-diagram",attrs:{variant:"secondary"},on:{click:function(e){return t.onRemoveDiagramClick(a)}}},[e("font-awesome-icon",{attrs:{icon:"times"}}),t._v(" "+t._s(t.$t("forms.remove"))+" ")],1)],1)],1)],1)})),1),e("b-form-row",[e("b-col",{attrs:{md:"6"}},[e("a",{staticClass:"add-diagram-link m-2",attrs:{href:"javascript:void(0)"},on:{click:t.onAddDiagramClick}},[e("font-awesome-icon",{attrs:{icon:"plus"}}),t._v(" "+t._s(t.$t("threatmodel.diagram.addNewDiagram"))+" ")],1)])],1),e("b-form-row",[e("b-col",{staticClass:"text-right mt-5"},[e("b-btn-group",[e("td-form-button",{attrs:{id:"td-save-btn",isPrimary:!0,onBtnClick:t.onSaveClick,icon:"save",text:t.$t("forms.save")}}),e("td-form-button",{attrs:{id:"td-reload-btn",onBtnClick:t.onReloadClick,icon:"undo",text:t.$t("forms.reload")}}),e("td-form-button",{attrs:{id:"td-close-btn",onBtnClick:t.onCloseClick,icon:"times",text:t.$t("forms.close")}})],1)],1)],1)],1)],1)],1):t._e()],1)},r=[],o=i(5353),d=i(9477),l=i(2831),s=i(9888),n={name:"ThreatModelEdit",components:{TdFormButton:l.A},computed:{...(0,o.aH)({fileHandle:t=>t.threatmodel.fileHandle,fileName:t=>t.threatmodel.fileName,model:t=>t.threatmodel.data,providerType:t=>(0,d.sG)(t.provider.selected),diagramTop:t=>t.threatmodel.data.detail.diagramTop,version:t=>t.packageBuildVersion}),contributors:{get(){return this.$store.getters.contributors},set(t){this.$store.dispatch(s.Ay.contributorsUpdated,t)}}},async mounted(){this.init()},methods:{init(){this.$store.dispatch(s.Ay.notModified)},onSubmit(){},async onSaveClick(t){t.preventDefault(),"gitThreatModelCreate"===this.$route.name||"googleThreatModelCreate"===this.$route.name?await this.$store.dispatch(s.Ay.create):await this.$store.dispatch(s.Ay.saveModel)},async onReloadClick(t){t.preventDefault(),await this.restoreAsync()},async onCloseClick(t){t.preventDefault(),await this.restoreAsync()&&this.$router.push({name:`${this.providerType}ThreatModel`,params:this.$route.params})},onAddDiagramClick(t){t.preventDefault();let e={id:this.diagramTop,title:this.$t("threatmodel.diagram.stride.defaultTitle"),diagramType:"STRIDE",placeholder:this.$t("threatmodel.diagram.stride.defaultDescription"),thumbnail:"./public/content/images/thumbnail.stride.jpg",version:this.version,cells:[]};this.$store.dispatch(s.Ay.update,{diagramTop:this.diagramTop+1}),this.model.detail.diagrams.push(e),this.$store.dispatch(s.Ay.modified)},onDiagramTypeClick(t,e){let i,a,r;switch(e){case"CIA":r="./public/content/images/thumbnail.cia.jpg",i=this.$t("threatmodel.diagram.cia.defaultTitle"),a=this.$t("threatmodel.diagram.cia.defaultDescription");break;case"DIE":r="./public/content/images/thumbnail.die.jpg",i=this.$t("threatmodel.diagram.die.defaultTitle"),a=this.$t("threatmodel.diagram.die.defaultDescription");break;case"LINDDUN":r="./public/content/images/thumbnail.linddun.jpg",i=this.$t("threatmodel.diagram.linddun.defaultTitle"),a=this.$t("threatmodel.diagram.linddun.defaultDescription");break;case"PLOT4ai":r="./public/content/images/thumbnail.plot4ai.jpg",i=this.$t("threatmodel.diagram.plot4ai.defaultTitle"),a=this.$t("threatmodel.diagram.plot4ai.defaultDescription");break;case"STRIDE":r="./public/content/images/thumbnail.stride.jpg",i=this.$t("threatmodel.diagram.stride.defaultTitle"),a=this.$t("threatmodel.diagram.stride.defaultDescription");break;default:r="./public/content/images/thumbnail.jpg",i=this.$t("threatmodel.diagram.generic.defaultTitle"),a=this.$t("threatmodel.diagram.generic.defaultDescription"),e=this.$t("threatmodel.diagram.generic.select")}this.model.detail.diagrams[t].diagramType=e,this.model.detail.diagrams[t].placeholder=a,this.model.detail.diagrams[t].thumbnail=r,this.model.detail.diagrams[t].title!==this.$t("threatmodel.diagram.cia.defaultTitle")&&this.model.detail.diagrams[t].title!==this.$t("threatmodel.diagram.die.defaultTitle")&&this.model.detail.diagrams[t].title!==this.$t("threatmodel.diagram.linddun.defaultTitle")&&this.model.detail.diagrams[t].title!==this.$t("threatmodel.diagram.plot4ai.defaultTitle")&&this.model.detail.diagrams[t].title!==this.$t("threatmodel.diagram.stride.defaultTitle")&&this.model.detail.diagrams[t].title!==this.$t("threatmodel.diagram.generic.defaultTitle")||(this.model.detail.diagrams[t].title=i),this.$store.dispatch(s.Ay.modified)},onRemoveDiagramClick(t){this.model.detail.diagrams.splice(t,1),this.$store.dispatch(s.Ay.modified)},onModifyModel(){this.$store.dispatch(s.Ay.modified)},async restoreAsync(){return!(this.$store.getters.modelChanged&&!await this.getConfirmModal())&&(await this.$store.dispatch(s.Ay.diagramClosed),this.$store.dispatch(s.Ay.restore),this.$store.dispatch(s.Ay.notModified),!0)},getConfirmModal(){return this.$bvModal.msgBoxConfirm(this.$t("forms.discardMessage"),{title:this.$t("forms.discardTitle"),okVariant:"danger",okTitle:this.$t("forms.ok"),cancelTitle:this.$t("forms.cancel"),hideHeaderClose:!0,centered:!0})}}},m=n,c=i(1656),u=(0,c.A)(m,a,r,!1,null,"890cf242",null),p=u.exports}}]);
//# sourceMappingURL=threatmodel-edit.70b9b519.js.map