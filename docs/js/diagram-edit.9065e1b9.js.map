{"version":3,"file":"js/diagram-edit.9065e1b9.js","mappings":"uKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,aAAa,IAAI,IAAI,EAClJ,EACIG,EAAkB,GCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,MAAM,CAACK,IAAI,wBAAwBL,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,OAAO,CAACJ,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACE,YAAY,kBAAkB,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,QAAQC,YAAYT,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,UAAU,CAACJ,EAAG,mBAAmB,CAACI,MAAM,CAAC,MAAQN,EAAIY,OAAOC,GAAG,CAAC,MAAQb,EAAIc,MAAM,OAASd,EAAIe,WAAW,IAAI,GAAGb,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACc,YAAY,CAAC,QAAU,OAAO,MAAQ,UAAU,CAACd,EAAG,MAAM,CAACK,IAAI,kBAAkBS,YAAY,CAAC,OAAS,OAAO,MAAQ,OAAO,KAAO,KAAKV,MAAM,CAAC,GAAK,wBAAwB,IAAI,IAAI,GAAGJ,EAAG,gBAAgB,CAACW,GAAG,CAAC,eAAiBb,EAAIiB,eAAe,cAAgBjB,EAAIkB,iBAAiBhB,EAAG,MAAM,CAACA,EAAG,yBAAyBA,EAAG,wBAAwB,CAACK,IAAI,qBAAqBL,EAAG,2BAA2B,CAACK,IAAI,yBAAyB,IAAI,EAC53B,EACIF,EAAkB,G,UCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,cAAc,CAACA,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAImB,eAAe,KAAO,QAAQ,MAAQnB,EAAIoB,GAAG,8BAA8B,KAAO,MAAMlB,EAAG,iBAAiB,CAACmB,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,sBAAsBC,UAAU,CAAC,WAAY,KAAQlB,MAAM,CAAC,WAAaN,EAAIyB,KAAK,KAAO,WAAW,MAAQzB,EAAIoB,GAAG,iCAAiC,KAAO,MAAMlB,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAI0B,KAAK,KAAO,OAAO,MAAQ1B,EAAIoB,GAAG,4BAA4B,KAAO,MAAMlB,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAI2B,KAAK,KAAO,OAAO,MAAQ3B,EAAIoB,GAAG,4BAA4B,KAAO,MAAMlB,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAI4B,OAAO,KAAO,cAAc,MAAQ5B,EAAIoB,GAAG,8BAA8B,KAAO,MAAMlB,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAI6B,QAAQ,KAAO,eAAe,MAAQ7B,EAAIoB,GAAG,+BAA+B,KAAO,MAAMlB,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAI8B,WAAW,KAAO,KAAK,MAAQ9B,EAAIoB,GAAG,kCAAkC,KAAO,MAAMlB,EAAG,aAAa,CAACI,MAAM,CAAC,MAAQ,GAAG,KAAON,EAAIoB,GAAG,gBAAgB,GAAK,qBAAqB,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,oBAAoBO,GAAG,CAAC,MAAQb,EAAI+B,YAAY,CAAC/B,EAAIQ,GAAG,WAAWN,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,qBAAqBO,GAAG,CAAC,MAAQb,EAAIgC,aAAa,CAAChC,EAAIQ,GAAG,YAAYN,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,oBAAoBO,GAAG,CAAC,MAAQb,EAAIiC,YAAY,CAACjC,EAAIQ,GAAG,YAAY,GAAGN,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAaN,EAAIkC,aAAa,KAAO,QAAQ,KAAOlC,EAAIoB,GAAG,kBAAkBlB,EAAG,iBAAiB,CAACI,MAAM,CAAC,WAAY,EAAK,WAAaN,EAAImC,KAAK,KAAO,OAAO,KAAOnC,EAAIoB,GAAG,kBAAkB,EAC3pD,EACIf,EAAkB,G,UC0EtB,GACAiB,KAAA,iBACAc,WAAA,CACAC,aAAAA,EAAAA,GAEAC,UAAAC,EAAAA,EAAAA,IAAA,CACA7B,QAAA8B,GAAAA,EAAAC,YAAAC,kBAEAC,IAAAA,GACA,OACAC,aAAA,EAEA,EACAC,MAAA,CACAjC,MAAA,CACAkC,UAAA,IAGAC,QAAA,CACAZ,IAAAA,GACA,KAAAa,MAAA,QACA,EACA,kBAAAd,GACA,KAAAc,MAAA,SACA,EACAvB,IAAAA,GAEA,EACAC,IAAAA,GACA,KAAAd,MAAAqC,UAAA,WAAAC,WACA,KAAAtC,MAAAqC,UAAA,WAAAvB,MAEA,EACAC,IAAAA,GACA,KAAAf,MAAAqC,UAAA,WAAAE,WACA,KAAAvC,MAAAqC,UAAA,WAAAtB,MAEA,EACAC,MAAAA,GACA,KAAAhB,MAAAwC,OAAA,EACA,KAAAxC,MAAAwC,KAAA,IAEA,KAAAxC,MAAAwC,KAAA,IAEAC,QAAAC,MAAA,gBAAA1C,MAAAwC,OACA,EACAvB,OAAAA,GACA,KAAAjB,MAAAwC,OAAA,EACA,KAAAxC,MAAAwC,MAAA,IAEA,KAAAxC,MAAAwC,MAAA,IAEAC,QAAAC,MAAA,gBAAA1C,MAAAwC,OACA,EACAjC,cAAAA,GACA,KAAAP,MAAA2C,YAAA,KAAA3C,MAAA4C,mBACA,EACA1B,UAAAA,GACA,KAAAc,aACA,KAAAhC,MAAA6C,WACA,KAAAb,aAAA,IAEA,KAAAhC,MAAA8C,WACA,KAAAd,aAAA,EAEA,EACAb,SAAAA,GACA,KAAAnB,MAAAmB,UAAA,QAAArB,QAAAC,YAAA,CACAgD,QAAA,IAEA,EACA3B,UAAAA,GACA,KAAApB,MAAAoB,WAAA,QAAAtB,QAAAC,aAAA,CACAgD,QAAA,IAEA,EACA1B,SAAAA,GACA,KAAArB,MAAAqB,UAAA,QAAAvB,QAAAC,YACA,IC1J2P,I,UCOvPiD,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAeA,EAAiB,QClB5B7D,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,OAAS,GAAGN,EAAIoB,GAAG,oCAAoC,CAAClB,EAAG,cAAc,CAACA,EAAG,wBAAwB,IAAI,IAAI,GAAGA,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,aAAa,UAAUuD,YAAY7D,EAAI8D,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,WAAW,MAAO,CAAChE,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,wBAAwB,KAAQpB,EAAIiE,QAAS/D,EAAG,QAAQ,CAACE,YAAY,cAAcE,MAAM,CAAC,SAAWN,EAAIkE,iBAAiB,QAAU,UAAU,KAAO,MAAMrD,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIoE,WAAW,IAAI,CAAClE,EAAG,oBAAoB,CAACE,YAAY,OAAOE,MAAM,CAAC,KAAO,UAAUN,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,sBAAsB,MAAM,GAAGpB,EAAIqE,KAAK,EAAEC,OAAM,MAAS,CAACpE,EAAG,cAAc,CAAIF,EAAIiE,QAAS/D,EAAG,cAAc,CAACA,EAAG,QAAQF,EAAIuE,GAAIvE,EAAIwE,SAAW,IAAI,SAASC,EAAOC,GAAK,OAAOxE,EAAG,QAAQ,CAAC6D,IAAIW,EAAIpE,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,mBAAmB,CAACI,MAAM,CAAC,GAAKmE,EAAOE,GAAG,OAASF,EAAOG,OAAO,SAAWH,EAAOI,SAAS,YAAcJ,EAAOK,YAAY,MAAQL,EAAO9D,MAAM,KAAO8D,EAAOM,KAAK,KAAON,EAAOO,KAAK,WAAaP,EAAOQ,WAAW,UAAYR,EAAOS,UAAU,OAAST,EAAOU,QAAQtE,GAAG,CAAC,eAAiBb,EAAIiB,mBAAmB,EAAE,IAAG,IAAI,GAAGjB,EAAIqE,KAAOrE,EAAIiE,SAAYjE,EAAIiE,QAAQtB,KAAgF3C,EAAIqE,KAA9EnE,EAAG,cAAc,CAACF,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,wBAAwB,QAAiB,IAAI,GAAKpB,EAAIkE,iBAA+QlE,EAAIqE,KAAjQnE,EAAG,IAAI,CAACE,YAAY,yBAAyBE,MAAM,CAAC,KAAO,sBAAsBO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIoF,iBAAiB,IAAI,CAAClF,EAAG,oBAAoB,CAACI,MAAM,CAAC,KAAO,UAAUN,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,4BAA4B,MAAM,GAAcpB,EAAIkE,iBAAqRlE,EAAIqE,KAAvQnE,EAAG,IAAI,CAACE,YAAY,yBAAyBE,MAAM,CAAC,KAAO,sBAAsBO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIqF,oBAAoB,IAAI,CAACnF,EAAG,oBAAoB,CAACI,MAAM,CAAC,KAAO,UAAUN,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,+BAA+B,MAAM,IAAa,IAAI,EACz6D,EACIf,EAAkB,G,uCCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,eAAe,CAACJ,EAAG,QAAQ,CAACmB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAS+D,OAAQtF,EAAIiE,QAASsB,WAAW,cAAc,CAACrF,EAAG,QAAQ,CAACA,EAAG,IAAI,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,4CAA4C,GAAMpB,EAAIiE,SAAWjE,EAAIiE,QAAQtB,KAAMzC,EAAG,SAAS,CAACA,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,aAAa,aAAa,OAAO,MAAQN,EAAIiE,QAAQtB,MAAkC,YAA1B3C,EAAIiE,QAAQtB,KAAKoC,KACpe/E,EAAIoB,GAAG,+BACPpB,EAAIoB,GAAG,+BAA+B,YAAY,SAAS,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,OAAO,KAAiC,YAA1BN,EAAIiE,QAAQtB,KAAKoC,KAAqB,EAAI,EAAE,SAAW,IAAIlE,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAIwF,cAAc,GAAGC,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKrB,KAAMoE,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,OAAQgD,EAAI,EAAEJ,WAAW,wBAAwB,IAAI,GAA8B,YAA1BvF,EAAIiE,QAAQtB,KAAKoC,KAAoB7E,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,oBAAoB,aAAa,OAAO,MAAQN,EAAIoB,GAAG,sCAAsC,YAAY,gBAAgB,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,eAAeO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKmC,YAAaY,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,cAAegD,EAAI,EAAEJ,WAAW,+BAA+B,IAAI,GAAGvF,EAAIqE,KAAOrE,EAAIiE,QAAQtB,KAAKmD,iBAA6C,YAA1B9F,EAAIiE,QAAQtB,KAAKoC,MAAgD,YAA1B/E,EAAIiE,QAAQtB,KAAKoC,KAAwc/E,EAAIqE,KAAxbnE,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,qBAAqB,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,cAAcO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI+F,eAAe,GAAGN,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKqD,WAAYN,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,aAAcgD,EAAI,EAAEJ,WAAW,4BAA4B,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,0CAA0C,IAAI,GAAuC,YAA1BpB,EAAIiE,QAAQtB,KAAKoC,KAAoB7E,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,yBAAyB,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,kBAAkBO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI+F,eAAe,GAAGN,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKqD,WAAYN,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,aAAcgD,EAAI,EAAEJ,WAAW,4BAA4B,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,yCAAyClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,eAAeO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAIiG,qBAAqB,GAAGR,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKuD,gBAAiBR,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,kBAAmBgD,EAAI,EAAEJ,WAAW,iCAAiC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,2CAA2C,IAAI,GAAGpB,EAAIqE,KAAOrE,EAAIiE,QAAQtB,KAAKmD,iBAA6C,YAA1B9F,EAAIiE,QAAQtB,KAAKoC,KAA8iB/E,EAAIqE,KAA9hBnE,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,yBAAyB,aAAa,OAAO,MAAQN,EAAIoB,GAAG,2CAA2C,YAAY,qBAAqB,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,mBAAmB,UAAYN,EAAIiE,QAAQtB,KAAKqD,YAAYnF,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKwD,iBAAkBT,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,mBAAoBgD,EAAI,EAAEJ,WAAW,oCAAoC,IAAI,GAAuC,eAA1BvF,EAAIiE,QAAQtB,KAAKoC,KAAuB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,uBAAuB,aAAa,OAAO,MAAQN,EAAIoB,GAAG,yCAAyC,YAAY,mBAAmB,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,iBAAiB,KAAO,QAAQO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKyD,eAAgBV,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,iBAAkBgD,EAAI,EAAEJ,WAAW,kCAAkC,IAAI,GAAGvF,EAAIqE,KAAgC,eAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAuB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,0BAA0B,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,sBAAsBO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK0D,mBAAoBX,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,qBAAsBgD,EAAI,EAAEJ,WAAW,oCAAoC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,iDAAiDlB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,0BAA0BO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK2D,uBAAwBZ,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,yBAA0BgD,EAAI,EAAEJ,WAAW,wCAAwC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,sDAAsD,IAAI,GAAGpB,EAAIqE,KAAgC,eAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAuB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,kBAAkB,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,oBAAoBO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK4D,iBAAkBb,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,mBAAoBgD,EAAI,EAAEJ,WAAW,kCAAkC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,gDAAgD,IAAI,GAAGpB,EAAIqE,KAAgC,aAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAqB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,iBAAiB,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,UAAUO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK6D,OAAQd,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,SAAUgD,EAAI,EAAEJ,WAAW,wBAAwB,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,qCAAqClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,qBAAqBO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK8D,kBAAmBf,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,oBAAqBgD,EAAI,EAAEJ,WAAW,mCAAmC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,iDAAiD,IAAI,GAAGpB,EAAIqE,KAAgC,aAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAqB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,sBAAsB,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,eAAeO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK+D,YAAahB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,cAAegD,EAAI,EAAEJ,WAAW,6BAA6B,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,0CAA0ClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,YAAYO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKgE,SAAUjB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,WAAYgD,EAAI,EAAEJ,WAAW,0BAA0B,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,wCAAwC,IAAI,GAAGpB,EAAIqE,KAAgC,aAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAqB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,0BAA0B,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,mBAAmBO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKiE,gBAAiBlB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,kBAAmBgD,EAAI,EAAEJ,WAAW,iCAAiC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,+CAA+C,IAAI,GAAGpB,EAAIqE,KAAgC,aAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAqB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,iCAAiC,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,0BAA0BO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKkE,uBAAwBnB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,yBAA0BgD,EAAI,EAAEJ,WAAW,wCAAwC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,sDAAsD,IAAI,GAAGpB,EAAIqE,KAAgC,YAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAoB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,iBAAiB,aAAa,OAAO,MAAQN,EAAIoB,GAAG,mCAAmC,YAAY,aAAa,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,WAAW,KAAO,QAAQO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKmE,SAAUpB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,WAAYgD,EAAI,EAAEJ,WAAW,4BAA4B,IAAI,GAAGvF,EAAIqE,KAAgC,YAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAoB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,sBAAsB,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,eAAeO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAK+D,YAAahB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,cAAegD,EAAI,EAAEJ,WAAW,6BAA6B,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,2CAA2C,IAAI,GAAGpB,EAAIqE,KAAgC,YAA1BrE,EAAIiE,QAAQtB,KAAKoC,KAAoB7E,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,aAAa,OAAO,GAAK,0BAA0B,CAACJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,mBAAmBO,GAAG,CAAC,OAAS,SAASsD,GAAQ,OAAOnE,EAAI6F,oBAAoB,GAAGJ,MAAM,CAACH,MAAOtF,EAAIiE,QAAQtB,KAAKoE,gBAAiBrB,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIiE,QAAQtB,KAAM,kBAAmBgD,EAAI,EAAEJ,WAAW,iCAAiC,CAACvF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,6CAA6C,IAAI,GAAGpB,EAAIqE,MAAM,IAAI,GAAGrE,EAAIqE,MAAM,EACpwR,EACIhE,EAAkB,GC+PtB,GACAiB,KAAA,oBACAgB,UAAAC,EAAAA,EAAAA,IAAA,CACA0B,QAAAzB,GAAAA,EAAAwE,KAAAzG,MAEAwC,QAAA,CACAkE,eAAAA,GAEA,KAAAC,cACA,EACA1B,YAAAA,GACA2B,EAAAA,EAAAC,WAAA,KAAAnD,SACA,KAAAgD,iBACA,EACAhB,mBAAAA,GACAkB,EAAAA,EAAAE,iBAAA,KAAApD,SACAkD,EAAAA,EAAAG,iBAAA,KAAArD,SACA,KAAAgD,iBACA,EACApB,kBAAAA,GACAsB,EAAAA,EAAAE,iBAAA,KAAApD,SACA,KAAAgD,iBACA,EACAlB,aAAAA,GACAwB,SAAAC,eAAA,oBAAAC,UAAA,KAAAxD,QAAAtB,KAAAqD,WACAmB,EAAAA,EAAAE,iBAAA,KAAApD,SACAkD,EAAAA,EAAAG,iBAAA,KAAArD,SACA,KAAAgD,iBACA,IC/R8P,ICQ1P,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAe,EAAiB,QCnB5BlH,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,SAAS,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAAIF,EAAImF,OAAQjF,EAAG,IAAI,CAACI,MAAM,CAAC,KAAO,sBAAsBO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIiB,gBAAgB,IAAI,CAACjB,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAImF,QAAQ,IAAInF,EAAIS,GAAGT,EAAIW,OAAS,qBAAqBT,EAAG,IAAI,CAACI,MAAM,CAAC,KAAO,sBAAsBO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIiB,gBAAgB,IAAI,CAACjB,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIW,OAAS,wBAAwB,GAAGT,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACF,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAI+E,MAAM,QAAQ,GAAG7E,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAAEF,EAAIgF,KAAM9E,EAAG,IAAI,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,GAAG,4BAA4B,MAAMpB,EAAIS,GAAGT,EAAIgF,SAAShF,EAAIqE,QAAQ,GAAGnE,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAAiB,SAAfF,EAAI4E,OAAmB1E,EAAG,oBAAoB,CAACE,YAAY,yBAAyBE,MAAM,CAAC,KAAO,QAAQ,MAAQN,EAAI4E,UAAU5E,EAAIqE,KAAqB,SAAfrE,EAAI4E,OAAmB1E,EAAG,oBAAoB,CAACE,YAAY,uBAAuBE,MAAM,CAAC,KAAO,uBAAuB,MAAQN,EAAI4E,UAAU5E,EAAIqE,KAAuB,SAAjBrE,EAAI6E,SAAqB3E,EAAG,oBAAoB,CAACE,YAAY,uBAAuBE,MAAM,CAAC,KAAO,SAAS,MAAQN,EAAI6E,YAAY7E,EAAIqE,KAAuB,WAAjBrE,EAAI6E,SAAuB3E,EAAG,oBAAoB,CAACE,YAAY,0BAA0BE,MAAM,CAAC,KAAO,SAAS,MAAQN,EAAI6E,YAAY7E,EAAIqE,KAAuB,QAAjBrE,EAAI6E,SAAoB3E,EAAG,oBAAoB,CAACE,YAAY,yBAAyBE,MAAM,CAAC,KAAO,SAAS,MAAQN,EAAI6E,YAAY7E,EAAIqE,MAAM,GAAGnE,EAAG,QAAQ,CAACI,MAAM,CAAC,UAAU,QAAQ,CAACJ,EAAG,UAAU,CAACI,MAAM,CAAC,SAASN,EAAIkF,YAAY,CAAClF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIkF,eAAe,IAAI,IAAI,IAAI,EACxiD,EACI7E,EAAkB,GCiFtB,GACAiB,KAAA,iBACAuB,MAAA,CACA8B,GAAA,CAAAI,KAAA2C,QACA9C,OAAA,CAAAG,KAAA2C,QACA7C,SAAA,CAAAE,KAAA2C,QACA5C,YAAA,CAAAC,KAAA2C,QACA/G,MAAA,CAAAoE,KAAA2C,QACA3C,KAAA,CAAAA,KAAA2C,QACAzC,WAAA,CAAAF,KAAA2C,QACAxC,UAAA,CAAAH,KAAA2C,QACAvC,OAAA,CAAAJ,KAAA4C,QACA3C,KAAA,CAAAD,KAAA6C,UAEA7E,QAAA,CACA9B,cAAAA,GACA,KAAA+B,MAAA,sBAAA2B,GAAA,MACA,ICpG2P,ICQvP,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCwFhC,GACArD,KAAA,cACAgB,UAAAC,EAAAA,EAAAA,IAAA,CACA0B,QAAAzB,GAAAA,EAAAwE,KAAAzG,IACAiE,QAAAhC,GAAAA,EAAAwE,KAAAxC,QACA9D,QAAA8B,GAAAA,EAAAC,YAAAC,gBACAmF,UAAArF,GAAAA,EAAAC,YAAAE,KAAAmF,OAAAD,UACA3D,iBAAA,SAAA1B,GACA,OAAAA,EAAAwE,MAAAzG,KAAAoC,OAGAH,EAAAwE,KAAAzG,IAAAoC,KAAAqD,YAAAxD,EAAAwE,KAAAzG,IAAAoC,KAAAmD,iBAAA,YAAAtD,EAAAwE,KAAAzG,IAAAoC,KAAAoC,KACA,IAEA3C,WAAA,CACA2F,kBAAA,EACAC,eAAAA,GAEA,aAAAC,GACA,KAAAC,MACA,EACAnF,QAAA,CACAmF,IAAAA,GACA,KAAAC,OAAAC,SAAAC,EAAAA,GACA,EACApH,cAAAA,CAAAqH,EAAA9F,GACAa,QAAAC,MAAA,uBAAAgF,GACA,KAAAtF,MAAA,iBAAAsF,EAAA9F,EACA,EACA4B,SAAAA,GACA,MAAAK,GAAA8D,EAAAA,EAAAA,GAAA,KAAA7H,QAAA8H,YAAA,KAAAvE,QAAAtB,KAAAoC,KAAA,KAAA8C,UAAA,GACAxE,QAAAC,MAAA,kBAAAmB,EAAAE,IACA,KAAAV,QAAAtB,KAAA6B,QAAAiE,KAAAhE,GACA,KAAAR,QAAAtB,KAAA+F,eAAA,KAAAzE,QAAAtB,KAAA6B,QAAAmE,OAAA,EACA,KAAAR,OAAAC,SAAAQ,EAAAA,GAAAC,OAAA,CAAAhB,UAAA,KAAAA,UAAA,IACA,KAAAM,OAAAC,SAAAQ,EAAAA,GAAAE,UACA,KAAAX,OAAAC,SAAAW,EAAAA,GAAA,KAAA9E,QAAAtB,MACAwE,EAAAA,EAAAG,iBAAA,KAAArD,SACA,KAAAhD,eAAAwD,EAAAE,GAAA,MACA,EACAS,eAAAA,GACA,KAAApC,MAAA,uBACA,EACAqC,kBAAAA,GACA,KAAArC,MAAA,0BACA,ICxJwP,ICQpP,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCnB5BjD,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,YAAY,KAAO,KAAK,aAAa,UAAU,oBAAoB,UAAU,sBAAsB,QAAQ,UAAU,GAAG,MAAQN,EAAIoB,GAAG,iCAAiC,CAAClB,EAAG,UAAU,CAACI,MAAM,CAAC,MAAQN,EAAIgJ,cAAc,EACrT,EACI3I,EAAkB,GCatB,GACAiB,KAAA,sBACAqB,IAAAA,GACA,OACAqG,UAAA,CACA,CACAC,SAAA,KAAA7H,GAAA,uCACA8H,OAAA,KAAA9H,GAAA,sCAEA,CACA6H,SAAA,KAAA7H,GAAA,wCACA8H,OAAA,KAAA9H,GAAA,uCAEA,CACA6H,SAAA,KAAA7H,GAAA,uCACA8H,OAAA,KAAA9H,GAAA,sCAEA,CACA6H,SAAA,KAAA7H,GAAA,uCACA8H,OAAA,KAAA9H,GAAA,sCAEA,CACA6H,SAAA,KAAA7H,GAAA,yCACA8H,OAAA,KAAA9H,GAAA,wCAEA,CACA6H,SAAA,KAAA7H,GAAA,sCACA8H,OAAA,KAAA9H,GAAA,qCAEA,CACA6H,SAAA,KAAA7H,GAAA,8CACA8H,OAAA,KAAA9H,GAAA,6CAEA,CACA6H,SAAA,KAAA7H,GAAA,uCACA8H,OAAA,KAAA9H,GAAA,sCAEA,CACA6H,SAAA,KAAA7H,GAAA,uCACA8H,OAAA,KAAA9H,GAAA,uCAIA,GC1DgQ,ICO5P,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAe,EAAiB,QClB5BrB,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAAIF,EAAIyE,OAAQvE,EAAG,UAAU,CAACK,IAAI,YAAYD,MAAM,CAAC,GAAK,cAAc,KAAO,KAAK,aAAa,UAAU,oBAAoB,UAAU,sBAAsB,QAAQ,MAAQN,EAAImJ,YAAYtF,YAAY7D,EAAI8D,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,WAAW,MAAO,CAAC9D,EAAG,MAAM,CAACE,YAAY,SAAS,CAAGJ,EAAIoE,UAA2LpE,EAAIqE,KAApLnE,EAAG,WAAW,CAACE,YAAY,aAAaE,MAAM,CAAC,QAAU,UAAUO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIoJ,eAAe,IAAI,CAACpJ,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,iBAAiB,OAAiBpB,EAAIoE,UAAWlE,EAAG,WAAW,CAACE,YAAY,aAAaE,MAAM,CAAC,QAAU,UAAUO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIqJ,iBAAiB,IAAI,CAACrJ,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,iBAAiB,OAAOpB,EAAIqE,KAAKnE,EAAG,WAAW,CAACE,YAAY,cAAcE,MAAM,CAAC,QAAU,aAAaO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIsJ,cAAc,IAAI,CAACtJ,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,gBAAgB,OAASpB,EAAIoE,UAAgMpE,EAAIqE,KAAzLnE,EAAG,WAAW,CAACE,YAAY,mBAAmBE,MAAM,CAAC,QAAU,aAAaO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIuJ,WAAW,IAAI,CAACvJ,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,iBAAiB,QAAiB,GAAG,EAAEkD,OAAM,IAAO,MAAK,EAAM,aAAa,CAACpE,EAAG,SAAS,CAACA,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,cAAc,MAAQN,EAAIoB,GAAG,4BAA4B,YAAY,UAAU,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,QAAQ,KAAO,OAAO,SAAW,IAAImF,MAAM,CAACH,MAAOtF,EAAIyE,OAAO9D,MAAO+E,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,QAASkB,EAAI,EAAEJ,WAAW,mBAAmB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,oBAAoB,MAAQN,EAAIoB,GAAG,2BAA2B,YAAY,gBAAgB,CAAClB,EAAG,gBAAgB,CAACI,MAAM,CAAC,GAAK,cAAc,QAAUN,EAAIwJ,aAAa/D,MAAM,CAACH,MAAOtF,EAAIyE,OAAOM,KAAMW,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,OAAQkB,EAAI,EAAEJ,WAAW,kBAAkB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACE,YAAY,aAAaE,MAAM,CAAC,GAAK,eAAe,MAAQN,EAAIoB,GAAG,6BAA6B,YAAY,WAAW,CAAClB,EAAG,qBAAqB,CAACI,MAAM,CAAC,GAAK,SAAS,QAAUN,EAAIyJ,SAAS,QAAU,IAAIhE,MAAM,CAACH,MAAOtF,EAAIyE,OAAOG,OAAQc,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,SAAUkB,EAAI,EAAEJ,WAAW,oBAAoB,IAAI,GAAGrF,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,cAAc,MAAQN,EAAIoB,GAAG,4BAA4B,YAAY,UAAU,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,QAAQ,KAAO,QAAQmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOiF,MAAOhE,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,QAASkB,EAAI,EAAEJ,WAAW,mBAAmB,IAAI,GAAGrF,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACE,YAAY,cAAcE,MAAM,CAAC,GAAK,iBAAiB,MAAQN,EAAIoB,GAAG,+BAA+B,YAAY,aAAa,CAAClB,EAAG,qBAAqB,CAACI,MAAM,CAAC,GAAK,WAAW,QAAUN,EAAI2J,WAAW,QAAU,IAAIlE,MAAM,CAACH,MAAOtF,EAAIyE,OAAOI,SAAUa,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,WAAYkB,EAAI,EAAEJ,WAAW,sBAAsB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACE,YAAY,aAAaE,MAAM,CAAC,GAAK,QAAQ,MAAQN,EAAIoB,GAAG,2BAA2B,YAAY,kBAAkB,CAAClB,EAAG,kBAAkB,CAACE,YAAY,aAAaE,MAAM,CAAC,GAAK,gBAAgB,KAAO,iBAAiBmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOO,KAAMU,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,OAAQkB,EAAI,EAAEJ,WAAW,kBAAkB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,oBAAoB,MAAQN,EAAIoB,GAAG,kCAAkC,YAAY,gBAAgB,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,cAAc,KAAO,KAAKmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOK,YAAaY,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,cAAekB,EAAI,EAAEJ,WAAW,yBAAyB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,mBAAmB,MAAQN,EAAIoB,GAAG,iCAAiC,YAAY,eAAe,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,aAAa,KAAO,KAAKmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOQ,WAAYS,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,aAAckB,EAAI,EAAEJ,WAAW,wBAAwB,IAAI,IAAI,IAAI,IAAI,GAAGvF,EAAIqE,MAAM,EAC5lI,EACIhE,EAAkB,G,UCwLtB,GACAiB,KAAA,qBACAgB,SAAA,KACAC,EAAAA,EAAAA,IAAA,CACA0B,QAAAzB,GAAAA,EAAAwE,KAAAzG,IACAsH,UAAArF,GAAAA,EAAAC,YAAAE,KAAAmF,OAAAD,YAEA2B,WAAAA,GACA,SAAAvF,UAAA,KAAAQ,SAAA,KAAAA,OAAAS,UACA,SAGA,MAAA0E,EAAA,GACAJ,EAAAK,EAAAA,EAAAC,wBAAA,KAAArF,OAAAS,UAAA,KAAAjB,QAAAtB,KAAAoC,MAMA,OALAgF,OAAAC,KAAAR,GAAAS,SAAAlF,IACA6E,EAAAnB,KAAA,KAAArH,GAAA2D,GAAA,GACA,MACA6E,EAAAM,SAAA,KAAAzF,OAAAM,OACA6E,EAAAnB,KAAA,KAAAhE,OAAAM,MACA6E,CACA,EACAH,QAAAA,GACA,OACA,CAAAnE,MAAA,gBAAA6E,KAAA,KAAA/I,GAAA,iCACA,CAAAkE,MAAA,OAAA6E,KAAA,KAAA/I,GAAA,wBACA,CAAAkE,MAAA,YAAA6E,KAAA,KAAA/I,GAAA,6BAEA,EACAuI,UAAAA,GACA,OACA,CAAArE,MAAA,MAAA6E,KAAA,KAAA/I,GAAA,yBACA,CAAAkE,MAAA,MAAA6E,KAAA,KAAA/I,GAAA,yBACA,CAAAkE,MAAA,SAAA6E,KAAA,KAAA/I,GAAA,4BACA,CAAAkE,MAAA,OAAA6E,KAAA,KAAA/I,GAAA,0BACA,CAAAkE,MAAA,WAAA6E,KAAA,KAAA/I,GAAA,8BAEA,EACA+H,UAAAA,GAAA,YAAA/H,GAAA,0BAAA+D,MAAA,GAEAxC,IAAAA,GACA,OACA8B,OAAA,CACAO,KAAA,MAEAoF,WAAA,CACA,MACA,MACA,UACA,UACA,UAEAjF,OAAA,EAEA,EACApC,QAAA,CACAsH,UAAAA,CAAA/B,EAAA9F,GACA,MAAA8H,EAAA,KAAArG,QAAAtB,KAAA6B,QAAA+F,MAAAC,GAAAA,EAAA7F,KAAA2D,IACA,KAAA7D,OAAA,IAAA6F,GACA,KAAA7F,QAIA,KAAAU,OAAA,KAAAV,OAAAU,OACA,KAAAf,UAAA,QAAA5B,EACA,KAAAiI,MAAAC,UAAAC,QAJAtH,QAAAuH,KAAA,6CAAAtC,EAMA,EACAgB,YAAAA,GACA,MAAAuB,EAAA,KAAA5G,QAAAtB,KAAA6B,QAAA+F,MAAAC,GAAAA,EAAA7F,KAAA,KAAAF,OAAAE,KACA,GAAAkG,EAAA,CACA,MAAAC,EAAA,KAAA7G,QAAAtB,KACA,IAAAmI,EAAAC,gBAAA,CACA,MAAAC,EAAAnB,EAAAA,EAAAoB,yBAAA,KAAAxG,OAAAS,UAAA,KAAAjB,QAAAtB,KAAAoC,MACA,OAAAiG,IACAF,EAAAC,gBAAAC,EACA,CACAF,EAAAC,iBACAhB,OAAAC,KAAAc,EAAAC,iBAAAd,SAAAiB,IACA,KAAA9J,GAAA,sBAAAqD,OAAAS,UAAAiG,iBAAAD,OAAA,KAAAzG,OAAAM,MACA+F,EAAAC,gBAAAG,IAAA,IAGAL,EAAAjG,OAAA,KAAAH,OAAAG,OACAiG,EAAAhG,SAAA,KAAAJ,OAAAI,SACAgG,EAAAlK,MAAA,KAAA8D,OAAA9D,MACAkK,EAAA9F,KAAA,KAAAN,OAAAM,KACA8F,EAAA/F,YAAA,KAAAL,OAAAK,YACA+F,EAAA5F,WAAA,KAAAR,OAAAQ,WACA4F,EAAA3F,UAAA,KAAAT,OAAAS,UACA2F,EAAAO,KAAA,EACAP,EAAA1F,OAAA,KAAAA,OACA0F,EAAA7F,KAAA,KAAAP,OAAAO,KACA6F,EAAAnB,MAAA,KAAAjF,OAAAiF,MACA,KAAAvB,OAAAC,SAAAW,EAAAA,GAAA,KAAA9E,QAAAtB,MACA,KAAAwF,OAAAC,SAAAQ,EAAAA,GAAAE,UACA3B,EAAAA,EAAAG,iBAAA,KAAArD,QACA,CACA,KAAAsF,WACA,EACA8B,YAAAA,GACA,SAAA5G,OAAA2G,IAAA,CACA,MAAAE,EAAA,KAAArH,QAAAtB,KAAAoI,gBACAhB,OAAAC,KAAAsB,GAAArB,SAAAiB,IACA,KAAA9J,GAAA,sBAAAqD,OAAAS,UAAAiG,iBAAAD,OAAA,KAAAzG,OAAAM,MACAuG,EAAAJ,IAAA,GAEA,CACA,KAAAjH,QAAAtB,KAAA6B,QAAA,KAAAP,QAAAtB,KAAA6B,QAAA+G,QAAAf,GAAAA,EAAA7F,KAAA,KAAAF,OAAAE,KACA,KAAAV,QAAAtB,KAAA+F,eAAA,KAAAzE,QAAAtB,KAAA6B,QAAAmE,OAAA,EACA,KAAAR,OAAAC,SAAAW,EAAAA,GAAA,KAAA9E,QAAAtB,MACA,KAAAwF,OAAAC,SAAAQ,EAAAA,GAAAE,UACA3B,EAAAA,EAAAG,iBAAA,KAAArD,QACA,EACAsF,SAAAA,GACA,KAAAkB,MAAAC,UAAAc,MACA,EACA,mBAAApC,GACA,MAAAqC,QAAA,KAAAC,SAAAC,cAAA,KAAAvK,GAAA,iCACAT,MAAA,KAAAS,GAAA,8BACAwK,QAAA,KAAAxK,GAAA,gBACAyK,YAAA,KAAAzK,GAAA,gBACA0K,UAAA,WAGAL,IAEA,KAAAJ,eACA,KAAA9B,YACA,EACA,qBAAAF,GACA,KAAAgC,eACA,KAAA9B,WACA,IC9T+P,ICO3P,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAe,EAAiB,QClB5BxJ,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,UAAU,CAACK,IAAI,YAAYD,MAAM,CAAC,GAAK,cAAc,KAAO,KAAK,aAAa,UAAU,oBAAoB,UAAU,sBAAsB,QAAQ,MAAQN,EAAImJ,YAAYtF,YAAY7D,EAAI8D,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,WAAW,MAAO,CAAC9D,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,WAAW,CAACE,YAAY,cAAcE,MAAM,CAAC,QAAU,UAAUO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAI+L,kBAAkB,IAAI,CAAC/L,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,gBAAgB,OAAOlB,EAAG,WAAW,CAACE,YAAY,aAAaE,MAAM,CAAC,QAAU,aAAaO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIgM,UAAU,IAAI,CAAChM,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,mBAAmB,OAAOlB,EAAG,WAAW,CAACE,YAAY,aAAaE,MAAM,CAAC,QAAU,UAAUO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIiM,MAAM,IAAI,CAACjM,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,eAAe,OAAOlB,EAAG,WAAW,CAACE,YAAY,mBAAmBE,MAAM,CAAC,QAAU,aAAaO,GAAG,CAAC,MAAQ,SAASsD,GAAQ,OAAOnE,EAAIuJ,WAAW,IAAI,CAACvJ,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIoB,GAAG,iBAAiB,QAAQ,GAAG,EAAEkD,OAAM,MAAS,CAACpE,EAAG,SAAS,CAACA,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,cAAc,MAAQN,EAAIoB,GAAG,4BAA4B,YAAY,UAAU,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,QAAQ,KAAO,OAAO,SAAW,IAAImF,MAAM,CAACH,MAAOtF,EAAIyE,OAAO9D,MAAO+E,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,QAASkB,EAAI,EAAEJ,WAAW,mBAAmB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,oBAAoB,MAAQN,EAAIoB,GAAG,2BAA2B,YAAY,gBAAgB,CAAClB,EAAG,gBAAgB,CAACI,MAAM,CAAC,GAAK,cAAc,QAAUN,EAAIkM,OAAOzG,MAAM,CAACH,MAAOtF,EAAIyE,OAAOM,KAAMW,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,OAAQkB,EAAI,EAAEJ,WAAW,kBAAkB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACE,YAAY,aAAaE,MAAM,CAAC,GAAK,eAAe,MAAQN,EAAIoB,GAAG,6BAA6B,YAAY,WAAW,CAAClB,EAAG,qBAAqB,CAACI,MAAM,CAAC,GAAK,SAAS,QAAUN,EAAIyJ,SAAS,QAAU,IAAIhE,MAAM,CAACH,MAAOtF,EAAIyE,OAAOG,OAAQc,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,SAAUkB,EAAI,EAAEJ,WAAW,oBAAoB,IAAI,GAAGrF,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,cAAc,MAAQN,EAAIoB,GAAG,4BAA4B,YAAY,UAAU,CAAClB,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,QAAQ,KAAO,QAAQmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOiF,MAAOhE,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,QAASkB,EAAI,EAAEJ,WAAW,mBAAmB,IAAI,GAAGrF,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,MAAM,CAACJ,EAAG,eAAe,CAACE,YAAY,cAAcE,MAAM,CAAC,GAAK,iBAAiB,MAAQN,EAAIoB,GAAG,+BAA+B,YAAY,aAAa,CAAClB,EAAG,qBAAqB,CAACI,MAAM,CAAC,GAAK,WAAW,QAAUN,EAAI2J,WAAW,QAAU,IAAIlE,MAAM,CAACH,MAAOtF,EAAIyE,OAAOI,SAAUa,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,WAAYkB,EAAI,EAAEJ,WAAW,sBAAsB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,oBAAoB,MAAQN,EAAIoB,GAAG,kCAAkC,YAAY,gBAAgB,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,cAAc,KAAO,KAAKmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOK,YAAaY,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,cAAekB,EAAI,EAAEJ,WAAW,yBAAyB,IAAI,IAAI,GAAGrF,EAAG,aAAa,CAACA,EAAG,QAAQ,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,mBAAmB,MAAQN,EAAIoB,GAAG,iCAAiC,YAAY,eAAe,CAAClB,EAAG,kBAAkB,CAACI,MAAM,CAAC,GAAK,aAAa,KAAO,KAAKmF,MAAM,CAACH,MAAOtF,EAAIyE,OAAOQ,WAAYS,SAAS,SAAUC,GAAM3F,EAAI4F,KAAK5F,EAAIyE,OAAQ,aAAckB,EAAI,EAAEJ,WAAW,wBAAwB,IAAI,IAAI,IAAI,IAAI,IAAI,EACnkH,EACIlF,EAAkB,GCAtB,SAAS8L,EAAeC,EAAYlH,GAChC,OAAOkH,EAAYC,KAAKC,IACpB,OAAOA,EAAWvH,MAClB,IAAK,oCACc,WAAZG,EACCoH,EAAWvH,KAAO,6CACC,QAAdG,IACLoH,EAAWvH,KAAO,qCACtB,MACJ,IAAK,wCACc,WAAZG,EACCoH,EAAWvH,KAAO,gCACF,QAAZG,IACJoH,EAAWvH,KAAO,qCACtB,MACJ,IAAK,mCACc,YAAZG,EACCoH,EAAWvH,KAAK,uCACC,QAAZG,IACLoH,EAAWvH,KAAO,+BACtB,MACJ,IAAK,sCACc,WAAZG,EACCoH,EAAWvH,KAAO,6CACF,QAAZG,IACJoH,EAAWvH,KAAO,qCACtB,MACJ,IAAK,gDACc,WAAZG,EACCoH,EAAWvH,KAAO,6CACF,QAAZG,IACJoH,EAAWvH,KAAO,qCACtB,MACJ,IAAK,oCACc,WAAZG,EACCoH,EAAWvH,KAAO,4CACF,QAAZG,IACJoH,EAAWvH,KAAO,+BACtB,MACJ,IAAK,iCACc,YAAZG,EACCoH,EAAWvH,KAAO,sCACA,QAAdG,IACJoH,EAAWvH,KAAO,+BACtB,MAEJ,OAAOuH,CAAU,GAEzB,CAKO,MAAMC,GAAwBA,CAACC,EAAS/G,KAC3C,MAAM2G,EAAc,GACd1L,EAAoB,UAAT+E,GAA+B,WAAVA,GAAgC,OAATA,EAAgBA,EAAM,OAEnF,MAAc,SAAV/E,GAAoC,aAAf8L,EAAQzH,OAAoByH,EAAQ3F,wBAAyC,YAAf2F,EAAQzH,OAAoByH,EAAQzF,kBAAkByF,EAAQ9F,aAEjJ0F,EAAY3D,KAAK,CACb9H,MAAO,2BACPoE,KAAM,GACND,YAAY,qEACZG,WAAW,KAERmH,IAEQ,aAAfI,EAAQzH,MAAmByH,EAAQ3F,yBACnCuF,EAAY3D,KAAK,CACb9H,MAAO,iBACPoE,KAAM,oCACND,YAAY,iJACZG,WAAW,oHAEfmH,EAAY3D,KAAK,CACb9H,MAAO,sBACPoE,KAAM,gDACND,YAAY,8MACZG,WAAW,6KAIA,YAAfuH,EAAQzH,MAAkByH,EAAQzF,kBAAkByF,EAAQ9F,aAC5D0F,EAAY3D,KAAK,CACb9H,MAAO,iBACPoE,KAAM,gDACND,YAAY,yFACZG,WAAW,sEAIC,YAAfuH,EAAQzH,MAAkByH,EAAQ9F,aACnC0F,EAAY3D,KAAK,CACb9H,MAAO,gCACPoE,KAAM,gDACND,YAAY,0EACZG,WAAW,wDAIC,YAAfuH,EAAQzH,MAAkByH,EAAQzF,iBACnCqF,EAAY3D,KAAK,CACb9H,MAAO,iBACPoE,KAAM,oCACND,YAAY,0IACZG,WAAW,+GAIC,eAAfuH,EAAQzH,MAA8C,KAAzByH,EAAQpG,qBAA8CqG,IAAzBD,EAAQpG,gBACnEgG,EAAY3D,KAAK,CACb9H,MAAO,kBACPoE,KAAM,oCACND,YAAY,0JACZG,WAAW,6HAIA,eAAfuH,EAAQzH,MACRqH,EAAY3D,KAAK,CACb9H,MAAO,aACPoE,KAAM,iCACND,YAAY,+JACZG,WAAW,sFAIC,eAAfuH,EAAQzH,MACTqH,EAAY3D,KAAK,CACb9H,MAAO,yBACPoE,KAAM,gDACND,YAAY,4JACZG,WAAW,+CAIC,eAAfuH,EAAQzH,MACTqH,EAAY3D,KAAK,CACb9H,MAAO,oBACPoE,KAAM,oCACND,YAAY,wHACZG,WAAW,yGAIC,eAAfuH,EAAQzH,MAAqByH,EAAQnG,qBACtC+F,EAAY3D,KAAK,CACb9H,MAAO,UACPoE,KAAM,gDACND,YAAY,wJACZG,WAAW,qIAEfmH,EAAY3D,KAAK,CACb9H,MAAO,gBACPoE,KAAM,gDACND,YAAY,iLACZG,WAAW,2GAIA,eAAfuH,EAAQzH,MAAqByH,EAAQnG,oBACrC+F,EAAY3D,KAAK,CACb9H,MAAO,cACPoE,KAAM,mCACND,YAAY,mLACZG,WAAW,oJAIC,eAAfuH,EAAQzH,MAAqByH,EAAQjG,kBACtC6F,EAAY3D,KAAK,CACb9H,MAAO,eACPoE,KAAM,gDACND,YAAY,4LACZG,WAAW,wJAIC,eAAfuH,EAAQzH,MAAqByH,EAAQlG,yBACtC8F,EAAY3D,KAAK,CACb9H,MAAO,eACPoE,KAAM,oCACND,YAAY,mKACZG,WAAW,oKAEfmH,EAAY3D,KAAK,CACb9H,MAAO,UACPoE,KAAM,oCACND,YAAY,4GACZG,WAAW,8EAEfmH,EAAY3D,KAAK,CACb9H,MAAO,sBACPoE,KAAM,oCACND,YAAY,6KACZG,WAAW,2EAGC,aAAfuH,EAAQzH,OACTqH,EAAY3D,KAAK,CACb9H,MAAO,WACPoE,KAAM,oCACND,YAAY,2GACZG,WAAW,qHAEfmH,EAAY3D,KAAK,CACb9H,MAAO,UACPoE,KAAM,oCACND,YAAY,8LACZG,WAAW,sGAEfmH,EAAY3D,KAAK,CACb9H,MAAO,WACPoE,KAAM,oCACND,YAAY,8KACZG,WAAW,oIAIC,aAAfuH,EAAQzH,MAAmByH,EAAQ/F,oBACpC2F,EAAY3D,KAAK,CACb9H,MAAO,sBACPoE,KAAM,gDACND,YAAY,8KACZG,WAAW,kJAEfmH,EAAY3D,KAAK,CACb9H,MAAO,mBACPoE,KAAM,oCACND,YAAY,gJACZG,WAAW,sIAEfmH,EAAY3D,KAAK,CACb9H,MAAO,sBACPoE,KAAM,wCACND,YAAY,qIACZG,WAAW,gGAGA,aAAfuH,EAAQzH,MAAmByH,EAAQ5F,iBACnCwF,EAAY3D,KAAK,CACb9H,MAAO,kBACPoE,KAAM,iCACND,YAAY,2KACZG,WAAW,oHAGC,aAAfuH,EAAQzH,MAAmByH,EAAQ5F,iBACpCwF,EAAY3D,KAAK,CACb9H,MAAO,WACPoE,KAAM,oCACND,YAAY,mKACZG,WAAW,oKAGC,aAAfuH,EAAQzH,MAAmByH,EAAQ9F,aACpC0F,EAAY3D,KAAK,CACb9H,MAAO,mCACPoE,KAAM,gDACND,YAAY,kFACZG,WAAW,kEAGC,aAAfuH,EAAQzH,MAAmByH,EAAQ7F,UACpCyF,EAAY3D,KAAK,CACb9H,MAAO,0BACPoE,KAAM,gDACND,YAAY,qFACZG,WAAW,oFAGC,aAAfuH,EAAQzH,MAAmByH,EAAQhG,QACpC4F,EAAY3D,KAAK,CACb9H,MAAO,8BACPoE,KAAM,gDACND,YAAY,uFACZG,WAAW,kFAGnBkH,EAAeC,EAAY1L,GACpB0L,EAAW,E,eCxLtB,IACA9K,KAAA,kBACAgB,SAAA,KACAC,EAAAA,EAAAA,IAAA,CACA0B,QAAAzB,GAAAA,EAAAwE,KAAAzG,IACA2E,UAAA1C,GAAAA,EAAAC,YAAAC,gBAAA8F,YACAX,UAAArF,GAAAA,EAAAC,YAAAE,KAAAmF,OAAAD,YAEA2B,WAAAA,GACA,SAAAvF,UAAA,KAAAQ,SAAA,KAAAS,UACA,SACA,MAAA0E,EAAA,GACA8C,EAAA7C,EAAAA,EAAAC,wBAAA,KAAA5E,UAAA,KAAAjB,QAAAtB,KAAAoC,MAIA,OAHAgF,OAAAC,KAAA0C,GAAAzC,SAAAlF,IACA6E,EAAAnB,KAAA,KAAArH,GAAA2D,GAAA,GACA,MACA6E,CACA,EACAH,QAAAA,GACA,OACA,CAAAnE,MAAA,gBAAA6E,KAAA,KAAA/I,GAAA,iCACA,CAAAkE,MAAA,OAAA6E,KAAA,KAAA/I,GAAA,wBACA,CAAAkE,MAAA,YAAA6E,KAAA,KAAA/I,GAAA,6BAEA,EACAuI,UAAAA,GACA,OACA,CAAArE,MAAA,MAAA6E,KAAA,KAAA/I,GAAA,yBACA,CAAAkE,MAAA,MAAA6E,KAAA,KAAA/I,GAAA,yBACA,CAAAkE,MAAA,SAAA6E,KAAA,KAAA/I,GAAA,4BACA,CAAAkE,MAAA,OAAA6E,KAAA,KAAA/I,GAAA,0BACA,CAAAkE,MAAA,WAAA6E,KAAA,KAAA/I,GAAA,8BAEA,EACA+H,UAAAA,GAAA,YAAA/H,GAAA,gCAAAyG,UAAA,KAEAlF,IAAAA,GACA,OACAyJ,YAAA,GACAF,MAAA,GACAzH,OAAA,GACAkI,MAAA,EAEA,EACA5J,QAAA,CACA6J,SAAAA,CAAA7H,GACA,KAAA4H,MAAA,EACA,MAAAE,GAAAtE,EAAAA,EAAAA,GAAA,KAAArD,UAAA,KAAAjB,QAAAtB,KAAAoC,KAAA,KAAA8C,UAAA,GACA,KAAAqE,MAAA,SAAA1C,aACA,QAAAzE,EACA,KAAAyE,YAAA6C,KAAA,CAAAS,EAAAC,KACA1J,QAAA2J,IAAAF,GACA,KAAAV,YAAA3D,KAAA,IAAAoE,IACA,KAAAT,YAAAW,GAAAhI,KAAA+H,CAAA,IAGA,KAAAV,YAAAG,GAAA,KAAAtI,QAAAtB,KAAA,KAAAuC,WAAAmH,KAAAC,IACAO,EAAAlM,MAAA2L,EAAA3L,MACAkM,EAAA9H,KAAA,KAAA3D,GAAAkL,EAAAvH,MACA,KAAAmH,MAAAhC,SAAA2C,EAAA9H,OAAA,KAAA8H,EAAA9H,MACA,KAAAmH,MAAAzD,KAAAoE,EAAA9H,MACA8H,EAAA/H,YAAAwH,EAAAxH,YACA+H,EAAA5H,WAAAqH,EAAArH,WACA5B,QAAA2J,IAAAH,GACA,IAAAA,MAGA,KAAAT,YAAAzD,SACA,KAAAlE,OAAA,KAAA2H,YAAA,IACA,KAAA3B,MAAAC,UAAAC,MACA,EACApB,SAAAA,GACA,KAAA9E,OAAA,GACA,KAAA2H,YAAA,GACA,KAAAF,MAAA,GACA,KAAAS,MAAA,EACA,KAAAlC,MAAAC,UAAAc,MACA,EACAS,IAAAA,GAEA,GADA,KAAAU,QACA,KAAAA,OAAA,KAAAP,YAAAzD,OAGA,OAFA,KAAAY,iBACA,KAAAoD,MAAA,GAGA,KAAAlI,OAAA,KAAA2H,YAAA,KAAAO,MACA,EACAZ,gBAAAA,GACA,MAAAjB,EAAA,KAAA7G,QAAAtB,KAGA,GAFA,KAAA8B,OAAAU,OAAA,KAAA0C,UAAA,EACA,KAAApD,OAAAE,IAAAsI,EAAAA,GAAAA,MACAnC,EAAAC,gBAAA,CACA,MAAAC,EAAAnB,EAAAA,EAAAoB,yBAAA,KAAAxG,OAAAS,UAAA,KAAAjB,QAAAtB,KAAAoC,MACA,OAAAiG,IACAF,EAAAC,gBAAAC,EACA,CACAF,EAAAC,iBACAhB,OAAAC,KAAAc,EAAAC,iBAAAd,SAAAiB,IACA,KAAA9J,GAAA,sBAAA8D,UAAAiG,iBAAAD,OAAA,KAAAzG,OAAAM,MAAA,KAAAyE,YAAAU,SAAA,KAAAzF,OAAAM,OACA+F,EAAAC,gBAAAG,IAAA,IAGA,KAAAzG,OAAA2G,KAAA,EACA,KAAAnH,QAAAtB,KAAA6B,QAAAiE,KAAA,KAAAhE,QACA,KAAAR,QAAAtB,KAAA+F,eAAA,KAAAzE,QAAAtB,KAAA6B,QAAAmE,OAAA,EACA,KAAAR,OAAAC,SAAAQ,EAAAA,GAAAC,OAAA,CAAAhB,UAAA,KAAAA,UAAA,IACA,KAAAM,OAAAC,SAAAQ,EAAAA,GAAAE,UACA,KAAAX,OAAAC,SAAAW,EAAAA,GAAA,KAAA9E,QAAAtB,MACAwE,EAAAA,EAAAG,iBAAA,KAAArD,SACA,KAAAgI,MAEA,EACAD,QAAAA,GACA,KAAAW,MAAA,IACA,KAAAA,QACA,KAAAlI,OAAA,KAAA2H,YAAA,KAAAO,OAEA,ICvNkQ,MCO9P,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,Q,uDCdzB,MAAMO,GAAU,qYCJvB,ICqFIC,GDrFAC,GAA0C,SAAUC,EAAYC,EAAQvJ,EAAKwJ,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAU/E,OAAQgF,EAAIF,EAAI,EAAIH,EAAkB,OAATC,EAAgBA,EAAOxD,OAAO6D,yBAAyBN,EAAQvJ,GAAOwJ,EACrH,GAAuB,kBAAZM,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQvJ,EAAKwJ,QACpH,IAAK,IAAIQ,EAAIV,EAAW1E,OAAS,EAAGoF,GAAK,EAAGA,KAASP,EAAIH,EAAWU,MAAIJ,GAAKF,EAAI,EAAID,EAAEG,GAAKF,EAAI,EAAID,EAAEF,EAAQvJ,EAAK4J,GAAKH,EAAEF,EAAQvJ,KAAS4J,GAChJ,OAAOF,EAAI,GAAKE,GAAK5D,OAAOiE,eAAeV,EAAQvJ,EAAK4J,GAAIA,CAChE,EAGO,MAAMM,WAAY,MACrB,kBAAIC,GACA,MAAMZ,EAASrN,KAAKkO,QAAQb,OACtBc,EAAWd,EAAOrK,UAAU,YAClC,OAAOmL,CACX,CACA,eAAIC,GACA,OAAOpO,KAAKkO,QAAQb,MACxB,CACA,eAAIgB,GACA,OAAOrO,KAAKoO,YAAY5I,KAC5B,CACA,YAAI8I,GACA,MAAMjB,EAASrN,KAAKkO,QAAQb,OACtBiB,EAAWjB,EAAOrK,UAAU,YAClC,OAAOsL,CACX,CACA,WAAAC,CAAYL,GACRM,QACAxO,KAAKqB,KAAO,MACZrB,KAAKkO,QAAUpE,OAAO2E,OAAO3E,OAAO2E,OAAO,CAAC,EAAGT,GAAIU,UAAWR,GAC9DlO,KAAKiI,MACT,CACA,IAAAA,GACI,YAAiBjI,KAAKqB,KAAM4L,IAC5BjN,KAAK2O,UAAYrH,SAASsH,cAAc,OACxC,eAAa5O,KAAK2O,UAAW3O,KAAK6O,gBAAgB,eAClD7O,KAAK8O,cAAgB,IAAI,MAAMhF,OAAO2E,OAAO3E,OAAO2E,OAAO,CAAC,EAAGzO,KAAKkO,QAAQa,sBAAuB,CAAEJ,UAAWrH,SAASsH,cAAc,OAAQI,MAAO,EAAGC,OAAQ,EAAGC,OAAO,KAC3K,aAAWlP,KAAK2O,UAAW3O,KAAK8O,cAAcH,UAClD,CACA,KAAAQ,CAAMC,EAAMC,GACR,MAAMC,EAAID,EACVC,EAAEC,iBACFvP,KAAKqO,YAAYmB,WAAW,OAC5B,eAAaxP,KAAK2O,UAAW,YAC7B,eAAa3O,KAAK2O,UAAW3O,KAAKkO,QAAQuB,mBAAqBnI,SAASoI,MACxE1P,KAAK2P,WAAaP,EAClBpP,KAAK4P,gBAAgBR,EAAME,EAAEO,QAASP,EAAEQ,SACxC,MAAMC,EAAQ/P,KAAKgQ,mBAAmBV,EAAEO,QAASP,EAAEQ,SAC/C9P,KAAKiQ,sBACLjQ,KAAKsO,SAAS4B,oBAAoB,CAC9BZ,IACAF,OACArI,KAAMqI,EACNe,KAAMnQ,KAAKoQ,aACX7F,EAAGwF,EAAMxF,EACT8F,EAAGN,EAAMM,IAEbrQ,KAAKsQ,aAAa1P,GAAG,kBAAmBZ,KAAKuQ,KAAMvQ,OAEvDA,KAAKwQ,uBAAuBxC,GAAIyC,eAAgBnB,EAAE5M,KACtD,CACA,iBAAAuN,GACI,OAAOjQ,KAAKsO,UAAYtO,KAAKsO,SAASoC,WAC1C,CACA,eAAAd,CAAgBD,EAAYE,EAASC,GACjC,MAAMhB,EAAgB9O,KAAK8O,cACrB6B,EAAgB7B,EAActJ,MAC9B8K,EAAetQ,KAAKkO,QAAQ0C,YAAYjB,EAAY,CACtDA,aACAb,gBACAV,YAAapO,KAAKoO,cAEtBkC,EAAaO,SAAS,EAAG,GACzB,IAAInN,EAAU,EAId,GAHI1D,KAAKiQ,sBACLvM,GAAW1D,KAAKsO,SAASJ,QAAQ4C,WAAa,GAE9C9Q,KAAKiQ,qBAAuBjQ,KAAKkO,QAAQ6C,OAAQ,CACjD,MAAMC,EAAQhR,KAAKoO,YAAY6C,UAAUC,WACzCpC,EAAckC,MAAMA,EAAMG,GAAIH,EAAMI,IACpC1N,GAAW2N,KAAKC,IAAIN,EAAMG,GAAIH,EAAMI,GACxC,MAEItC,EAAckC,MAAM,EAAG,GAE3BhR,KAAKuR,gBAILZ,EAAca,WAAW,CAAClB,IAC1B,MAAMmB,EAAe3C,EAAc4C,eAAepB,GAClDmB,EAAaE,mBACbF,EAAa1K,KAAK6K,IAAI,WACtB9C,EAAc+C,aAAa,CACvBnO,UACAoO,eAAgB,MAChBC,iBAAiB,IAErB,MAAMC,EAAOP,EAAaQ,UAC1BjS,KAAKkS,aAAeT,EAAaQ,QAAQ,CAAEF,iBAAiB,IAC5D/R,KAAKmS,MAAQnS,KAAKkS,aAAaE,aAAaC,KAAKL,EAAKI,cACtDpS,KAAKsQ,aAAeA,EACpBtQ,KAAKoQ,aAAeqB,EACpBzR,KAAKsS,aAAehC,EAAa2B,UACjCjS,KAAK0D,QAAUA,EACf1D,KAAKuS,aAAevS,KAAKwS,oBAAoB3C,EAASC,EAC1D,CACA,mBAAA0C,CAAoB3C,EAASC,GACzB,MAAM2C,EAAYnL,SAASoI,KAAK+C,WAAanL,SAASoL,gBAAgBD,UAChEE,EAAarL,SAASoI,KAAKiD,YAAcrL,SAASoL,gBAAgBC,WAClER,EAAQnS,KAAKmS,MACbS,EAAW5S,KAAKkS,aAChBxO,EAAU1D,KAAK0D,SAAW,EAC1BmP,EAAS,CACXC,KAAMjD,EAAUsC,EAAM5H,EAAIqI,EAAS5D,MAAQ,EAAItL,EAAUiP,EACzDI,IAAKjD,EAAUqC,EAAM9B,EAAIuC,EAAS3D,OAAS,EAAIvL,EAAU+O,GAQ7D,OANIzS,KAAK8O,eACL,UAAQ9O,KAAK2O,UAAW,CACpBmE,KAAM,GAAGD,EAAOC,SAChBC,IAAK,GAAGF,EAAOE,UAGhBF,CACX,CACA,kBAAA7C,CAAmBzF,EAAG8F,GAClB,MAAMN,EAAQ/P,KAAKoO,YAAY4E,cAAczI,EAAG8F,GAC1C2B,EAAOhS,KAAKsS,aAIlB,OAHAvC,EAAMxF,GAAKyH,EAAKhD,MAAQ,EACxBe,EAAMM,GAAK2B,EAAK/C,OAAS,EACzBjP,KAAKsQ,aAAaO,SAASd,EAAMxF,EAAGwF,EAAMM,GACnCN,CACX,CACA,IAAAQ,EAAK,KAAExJ,EAAI,QAAEkM,EAAO,QAAE/E,IAClB,MAAMkB,EAAOrI,EACb,GAAImH,EAAQgF,QAAS,CACjB,MAAMlB,EAAOhS,KAAKsS,aAClBlD,EAAKyB,SAASmB,EAAKzH,EAAI2D,EAAQiF,GAAInB,EAAK3B,EAAInC,EAAQkF,GAAI,CAAEC,QAAQ,IAClErT,KAAKoQ,aAAakD,YAClBlE,EAAKyB,SAASoC,EAAQ1I,EAAG0I,EAAQ5C,EAAG,CAAEgD,QAAQ,IAC9CrT,KAAKuT,WAAa,CACdhJ,EAAG2D,EAAQiF,GACX9C,EAAGnC,EAAQkF,GAEnB,MAEIpT,KAAKuT,WAAa,IAE1B,CACA,UAAAC,CAAWnE,GACP,MAAMe,EAAepQ,KAAKoQ,aAC1B,GAAIA,EAAc,CACdf,EAAIE,iBACJ,MAAMD,EAAItP,KAAKyT,eAAepE,GACxBQ,EAAUP,EAAEO,QACZC,EAAUR,EAAEQ,QAClB9P,KAAKwS,oBAAoB3C,EAASC,GAClC,MAAMC,EAAQ/P,KAAKgQ,mBAAmBH,EAASC,GACzC4D,EAAgB1T,KAAKoO,YAAYF,QAAQyF,UAAUC,QACnDC,GAAeH,GAAiB1T,KAAKiQ,sBACvCjQ,KAAK8T,kBAAkB,CACnBvJ,EAAGsF,EACHQ,EAAGP,IAEX,GAAI4D,EAAe,CACftD,EAAa2D,aAAazE,EAAG,CACzB3O,MAAOX,KAAKoO,YACZ4F,mBAAoBhU,KAAKgU,qBAE7B,MAAMtR,EAAO0N,EAAa6D,aAAa3E,GACnCuE,EACAzD,EAAa8D,iBAAiB5E,EAAG5M,GAGjC0N,EAAa+D,eAAezR,GAEhC1C,KAAKgU,mBAAqBtR,EAAKsR,kBACnC,CAEIhU,KAAKiQ,sBACD4D,EACA7T,KAAKsO,SAAS8F,aAAa,CACvB9E,IACAa,KAAMC,EACN7F,EAAGwF,EAAMxF,EACT8F,EAAGN,EAAMM,IAIbrQ,KAAKsO,SAAS/C,OAG1B,CACJ,CACA,SAAA8I,CAAUhF,GACN,MAAMiB,EAAetQ,KAAKsQ,aAC1B,GAAIA,EAAc,CACd,MAAMhB,EAAItP,KAAKyT,eAAepE,GACxBe,EAAepQ,KAAKoQ,aACpBkC,EAAetS,KAAKsS,aACpBiB,EAAavT,KAAKuT,WACxB,IAAIhJ,EAAI+H,EAAa/H,EACjB8F,EAAIiC,EAAajC,EACjBkD,IACAhJ,GAAKgJ,EAAWhJ,EAChB8F,GAAKkD,EAAWlD,GAEpBC,EAAaO,SAAStG,EAAG8F,EAAG,CAAEgD,QAAQ,IACtC,MAAMiB,EAAMtU,KAAKuU,KAAKjE,EAAc,CAAE/F,EAAG+E,EAAEO,QAASQ,EAAGf,EAAEQ,UACnDrK,EAAY2J,IACVA,GACApP,KAAKwU,UAAUlE,GACXtQ,KAAKoO,YAAYF,QAAQyF,UAAUC,SAAWxD,IAC9CA,EAAa2D,aAAazE,EAAG,CACzBvI,KAAMqI,EACNzO,MAAOX,KAAKoO,YACZ4F,mBAAoBhU,KAAKgU,qBAE7B5D,EAAaqE,kBAAkBnF,EAAGc,EAAa6D,aAAa3E,MAIhEtP,KAAK0U,gBAET1U,KAAKgU,mBAAqB,KAC1BhU,KAAKqO,YAAYsG,UAAU,MAAM,EAEjC,cAAoBL,IAEpBtU,KAAK4U,2BACLN,EAAIO,KAAKpP,IAGTA,EAAS6O,EAEjB,CACJ,CACA,aAAA/C,GACQvR,KAAKsQ,eACLtQ,KAAK2P,WAAa,KAClB3P,KAAKsQ,aAAawE,SAClB9U,KAAKsQ,aAAe,KACpBtQ,KAAKoQ,aAAe,KACpBpQ,KAAKmS,MAAQ,KACbnS,KAAK0D,QAAU,KACf1D,KAAKuT,WAAa,KAClBvT,KAAKuS,aAAe,KACpBvS,KAAK4U,2BAEb,CACA,SAAAJ,CAAUlE,GACFtQ,KAAKsQ,eAAiBA,IACtBtQ,KAAKuR,gBACL,kBAAgBvR,KAAK2O,UAAW,YAChC,aAAW3O,KAAK2O,WAExB,CACA,aAAA+F,GACI,MAAMpE,EAAetQ,KAAKsQ,aACtBA,GACAtQ,KAAKwU,UAAUlE,EAcvB,CACA,iBAAAwD,CAAkBiB,GACd,IAAIC,EACAC,EAAU,KACd,MAAM7G,EAAcpO,KAAKoO,YACnBH,EAAiBjO,KAAKiO,eACxBjO,KAAKkO,QAAQgH,eACbD,EAAUjV,KAAKmV,YAAYnV,KAAKkO,QAAQgH,eAE5C,MAAME,EAAkBH,GAAWA,EAAQI,cAAcN,GACzD,GAAI9G,EACA,GAAIA,EAAeC,QAAQoH,WACvBN,EAAahV,KAAKmV,YAAYlH,EAAeU,eAE5C,CACD,MAAM4G,EAASvV,KAAKmV,YAAYlH,EAAeU,WAC/CqG,EAAahV,KAAKmV,YAAY/G,EAAYO,WAAW6G,mBAAmBD,EAC5E,MAGAP,EAAahV,KAAKmV,YAAY/G,EAAYO,WAE9C,OAAQyG,GAAmBJ,GAAcA,EAAWK,cAAcN,EACtE,CACA,WAAAI,CAAYM,GACR,MAAM5C,EAAS,aAAW4C,GACpBhD,EAAYnL,SAASoI,KAAK+C,WAAanL,SAASoL,gBAAgBD,UAChEE,EAAarL,SAASoI,KAAKiD,YAAcrL,SAASoL,gBAAgBC,WACxE,OAAO,MAAU+C,OAAO,CACpBnL,EAAGsI,EAAOC,KACN6C,SAAS,UAAQF,EAAM,qBAAsB,IAC7C9C,EACJtC,EAAGwC,EAAOE,IACN4C,SAAS,UAAQF,EAAM,oBAAqB,IAC5ChD,EACJzD,MAAOyG,EAAKG,YACZ3G,OAAQwG,EAAKI,cAErB,CACA,IAAAtB,CAAKjE,EAAcwF,GACf,GAAI9V,KAAK8T,kBAAkBgC,GAAM,CAC7B,MAAM1H,EAAcpO,KAAKoO,YACnBC,EAAcD,EAAY5I,MAC1BuK,EAAQ3B,EAAY4E,cAAc8C,GAClCnG,EAAa3P,KAAK2P,WAClBoG,EAAe/V,KAAKkO,QAAQ8H,YAAY1F,EAAc,CACxDX,aACAW,eACAlC,YAAapO,KAAKoO,YAClBU,cAAe9O,KAAK8O,gBAElBkD,EAAO+D,EAAa9D,UAC1BlC,EAAMxF,GAAKyH,EAAKzH,EAAIyH,EAAKhD,MAAQ,EACjCe,EAAMM,GAAK2B,EAAK3B,EAAI2B,EAAK/C,OAAS,EAClC,MAAMgH,EAAWjW,KAAKuT,WAAa,EAAInF,EAAY8H,cACnDH,EAAalF,SAAS,MAAasF,WAAWpG,EAAMxF,EAAG0L,GAAW,MAAaE,WAAWpG,EAAMM,EAAG4F,IACnGF,EAAaK,eACb,MAAMC,EAAerW,KAAKkO,QAAQmI,aAC5B/B,GAAM+B,GACNA,EAAaN,EAAc,CACzBpG,aACAW,eACAyF,eACA3H,cACAU,cAAe9O,KAAK8O,gBAG5B,MAAmB,mBAARwF,EACHA,GACAjG,EAAYiI,QAAQP,EAAc,CAAEQ,QAASvW,KAAKwW,MAC3CT,GAEJ,KAEJ,wBAA8BzB,GAAKO,MAAM4B,GACxCA,GACApI,EAAYiI,QAAQP,EAAc,CAAEQ,QAASvW,KAAKwW,MAC3CT,GAEJ,MAEf,CACA,OAAO,IACX,CACA,QAAAW,GACQ1W,KAAK8O,gBACL9O,KAAK8O,cAAcqB,KAAK2E,SACxB9U,KAAK8O,cAAc6H,UAE3B,CACA,OAAAA,GACI3W,KAAK8U,SACL,WAAgB9U,KAAKqB,KACzB,EC7WG,SAASuV,GAAKC,EAAO3I,EAAU,CAAC,GACnC,MAAM1I,EAAQ,MAAMsR,QAAQD,GACtBA,GACA,IAAI,OAAQrF,WAAWqF,EAAO,CAC5BE,MAAM,EACNC,QAAQ,IAEVC,EAAQzR,EAAM0R,WACdC,EAAUjJ,EAAQiJ,SAAW,EAC7BC,EAAO/F,KAAKgG,KAAKJ,EAAMvO,OAASyO,GAChCG,EAAKpJ,EAAQoJ,IAAM,EACnBC,EAAKrJ,EAAQqJ,IAAM,EACnBC,GAA4B,IAAnBtJ,EAAQuJ,OACjBC,GAAsC,IAAxBxJ,EAAQwJ,YACtBC,EAAUzJ,EAAQyJ,SAAW,EAC7BC,EAAU1J,EAAQ0J,SAAW,EAC7BC,EAAe,GACrB,IAAIC,EAAc5J,EAAQ4J,YAC1B,GAAoB,YAAhBA,EACA,IAAK,IAAIC,EAAI,EAAGA,EAAIZ,EAASY,GAAK,EAAG,CACjC,MAAMC,EAAQ9K,GAAW+K,iBAAiBhB,EAAOc,EAAGZ,GACpDU,EAAarP,KAAK0E,GAAWgL,UAAUF,EAAO,SAAWV,EAC7D,KAEC,CACkB,MAAfQ,GAAuC,SAAhBA,IACvBA,EAAc5K,GAAWgL,UAAUjB,EAAO,SAAWK,GAEzD,IAAK,IAAIxJ,EAAI,EAAGA,EAAIqJ,EAASrJ,GAAK,EAC9B+J,EAAarP,KAAKsP,EAE1B,CACA,MAAMK,EAAcjL,GAAWkL,WAAWP,EAAcF,GAClDU,EAAa,GACnB,IAAIC,EAAYpK,EAAQoK,UACxB,GAAkB,YAAdA,EACA,IAAK,IAAIxK,EAAI,EAAGA,EAAIsJ,EAAMtJ,GAAK,EAAG,CAC9B,MAAMkK,EAAQ9K,GAAWqL,cAActB,EAAOnJ,EAAGqJ,GACjDkB,EAAW7P,KAAK0E,GAAWgL,UAAUF,EAAO,UAAYT,EAC5D,KAEC,CACgB,MAAbe,GAAmC,SAAdA,IACrBA,EAAYpL,GAAWgL,UAAUjB,EAAO,UAAYM,GAExD,IAAK,IAAIzJ,EAAI,EAAGA,EAAIsJ,EAAMtJ,GAAK,EAC3BuK,EAAW7P,KAAK8P,EAExB,CACA,MAAME,EAAUtL,GAAWkL,WAAWC,EAAYT,GAClDpS,EAAMgK,WAAW,UACjByH,EAAMjN,SAAQ,CAACoF,EAAM1C,KACjB,MAAM+L,EAAW/L,EAAQyK,EACnBuB,EAAcrH,KAAKsH,MAAMjM,EAAQyK,GACjCW,EAAcD,EAAaY,GAC3BH,EAAYD,EAAWK,GAC7B,IAAIE,EAAK,EACLC,EAAK,EACLC,EAAO1J,EAAK2J,UAChB,GAAIrB,EAAa,CACb,IAAI1I,EAAQ8I,EAAc,EAAIR,EAC1BrI,EAASqJ,EAAY,EAAIf,EAC7B,MAAMyB,EAAaF,EAAK7J,QAAU6J,EAAK9J,MAAQA,EAAQ8J,EAAK9J,MAAQ,GAC9DiK,EAAYH,EAAK9J,OAAS8J,EAAK7J,OAASA,EAAS6J,EAAK7J,OAAS,GACjEqJ,EAAYU,EACZhK,EAAQiK,EAGRhK,EAAS+J,EAEbF,EAAO,CACH9J,QACAC,UAEJG,EAAK8J,QAAQJ,EAAM5K,EACvB,CACIsJ,IACAoB,GAAMd,EAAcgB,EAAK9J,OAAS,EAClC6J,GAAMP,EAAYQ,EAAK7J,QAAU,GAErCG,EAAKyB,SAASsH,EAAYM,GAAYnB,EAAKsB,EAAIJ,EAAQE,GAAenB,EAAKsB,EAAI3K,EAAQ,IAE3F1I,EAAMmP,UAAU,SACpB,CD4RAxH,GAAW,CACP,MAAKwJ,WACN3I,GAAImL,UAAW,UAAW,MAC7B,SAAWnL,GACPA,EAAIU,SAAW,CAEXkC,YAAcjB,GAAeA,EAAWyJ,QACxCpD,YAAc1F,GAAiBA,EAAa8I,SAEhDpL,EAAIyC,eAAiB,CACjB4I,UAAW,aACXC,UAAW,aACXC,QAAS,YACTC,SAAU,YACVC,YAAa,YAEpB,CAbD,CAaGzL,KAAQA,GAAM,CAAC,IC1SlB,SAAWd,GACP,SAASgL,EAAUjB,EAAO5V,GACtB,OAAO4V,EAAMyC,QAAO,CAACC,EAAMvK,IAASiC,KAAKC,IAAa,OAATlC,QAA0B,IAATA,OAAkB,EAASA,EAAK2J,UAAU1X,GAAOsY,IAAO,EAC1H,CAEA,SAASpB,EAActB,EAAOwB,EAAUmB,GACpC,MAAMjQ,EAAM,GACZ,IAAK,IAAImE,EAAI8L,EAAcnB,EAAUoB,EAAK/L,EAAI8L,EAAa9L,EAAI+L,EAAI/L,GAAK,EAChEmJ,EAAMnJ,IACNnE,EAAInB,KAAKyO,EAAMnJ,IAEvB,OAAOnE,CACX,CAEA,SAASsO,EAAiBhB,EAAOyB,EAAakB,GAC1C,MAAMjQ,EAAM,GACZ,IAAK,IAAImE,EAAI4K,EAAamB,EAAK5C,EAAMvO,OAAQoF,EAAI+L,EAAI/L,GAAK8L,EAClD3C,EAAMnJ,IACNnE,EAAInB,KAAKyO,EAAMnJ,IAEvB,OAAOnE,CACX,CAEA,SAASyO,EAAWJ,EAAO7I,GACvB,OAAO6I,EAAM0B,QAAO,CAACC,EAAMG,EAAMhM,KAC7B6L,EAAKnR,KAAKmR,EAAK7L,GAAKgM,GACbH,IACR,CAACxK,GAAS,GACjB,CAxBAjC,EAAWgL,UAAYA,EASvBhL,EAAWqL,cAAgBA,EAS3BrL,EAAW+K,iBAAmBA,EAO9B/K,EAAWkL,WAAaA,CAC3B,CA9BD,CA8BGlL,KAAeA,GAAa,CAAC,IChHzB,MAAM,GAAU,wtNCJvB,IAmdI6M,GAWAC,GA9dA,GAA0C,SAAU5M,EAAYC,EAAQvJ,EAAKwJ,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAU/E,OAAQgF,EAAIF,EAAI,EAAIH,EAAkB,OAATC,EAAgBA,EAAOxD,OAAO6D,yBAAyBN,EAAQvJ,GAAOwJ,EACrH,GAAuB,kBAAZM,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAAST,EAAYC,EAAQvJ,EAAKwJ,QACpH,IAAK,IAAIQ,EAAIV,EAAW1E,OAAS,EAAGoF,GAAK,EAAGA,KAASP,EAAIH,EAAWU,MAAIJ,GAAKF,EAAI,EAAID,EAAEG,GAAKF,EAAI,EAAID,EAAEF,EAAQvJ,EAAK4J,GAAKH,EAAEF,EAAQvJ,KAAS4J,GAChJ,OAAOF,EAAI,GAAKE,GAAK5D,OAAOiE,eAAeV,EAAQvJ,EAAK4J,GAAIA,CAChE,EAKO,MAAMuM,WAAgB,MACzB,kBAAIhM,GACA,MAAMZ,EAASrN,KAAKkO,QAAQb,OACtBc,EAAWd,EAAOrK,UAAU,YAClC,OAAOmL,CACX,CACA,eAAIC,GACA,OAAOpO,KAAKkO,QAAQb,MACxB,CACA,eAAIgB,GACA,OAAOrO,KAAKoO,YAAY5I,KAC5B,CACA,WAAA+I,CAAYL,EAAU,CAAC,GACnBM,QACAxO,KAAKqB,KAAO,UACZ,YAAiBrB,KAAKqB,KAAM,IAC5BrB,KAAKka,OAAS,CAAC,EACfla,KAAKma,OAAS,CAAC,EACfna,KAAKkO,QAAUpE,OAAO2E,OAAO3E,OAAO2E,OAAO,CAAC,EAAGwL,GAAQG,gBAAiBlM,GACxElO,KAAKiI,MACT,CACA,IAAAA,GACIjI,KAAKqa,IAAM,IAAIrM,GAAIhO,KAAKkO,SACxBlO,KAAKsa,SAAW,eAAqBta,KAAKsa,SAAU,KACpDta,KAAKua,gBACLva,KAAKwa,aACLxa,KAAKya,cACLza,KAAK0a,aACL1a,KAAK2a,WACL3a,KAAK4a,gBACT,CACA,IAAAC,CAAKnY,EAAMoY,GAWP,OAVIC,MAAMC,QAAQtY,GACd1C,KAAKib,UAAUvY,EAAMoY,GAEhB9a,KAAKkO,QAAQiM,QAClBrQ,OAAOC,KAAK/J,KAAKkO,QAAQiM,QAAQnQ,SAAS8Q,IAClCpY,EAAKoY,IACL9a,KAAKib,UAAUvY,EAAKoY,GAAYA,EACpC,IAGD9a,IACX,CACA,MAAAkb,CAAOxY,EAAMoY,GAWT,OAVIC,MAAMC,QAAQtY,GACd1C,KAAKib,UAAUvY,EAAMoY,GAAW,GAE3B9a,KAAKkO,QAAQiM,QAClBrQ,OAAOC,KAAK/J,KAAKkO,QAAQiM,QAAQnQ,SAAS8Q,IAClCpY,EAAKoY,IACL9a,KAAKib,UAAUvY,EAAKoY,GAAYA,GAAW,EAC/C,IAGD9a,IACX,CACA,WAAAmb,CAAYL,GAOR,OANI9a,KAAKob,iBAAiBN,GACtB9a,KAAKqb,YAAYP,GAGjB9a,KAAKsb,cAAcR,GAEhB9a,IACX,CACA,aAAAsb,CAAcR,GACV,GAAI9a,KAAKub,mBAAmBT,GAAY,CACpC,MAAMU,EAAQxb,KAAKma,OAAOW,GACtBU,IAAUxb,KAAKob,iBAAiBN,KAChC9a,KAAKyb,QAAQ,iBAAkB,CAAEpa,KAAMyZ,IACvC,eAAaU,EAAO,aAE5B,CACA,OAAOxb,IACX,CACA,WAAAqb,CAAYP,GACR,GAAI9a,KAAKub,mBAAmBT,GAAY,CACpC,MAAMU,EAAQxb,KAAKma,OAAOW,GACtBU,GAASxb,KAAKob,iBAAiBN,KAC/B9a,KAAKyb,QAAQ,eAAgB,CAAEpa,KAAMyZ,IACrC,kBAAgBU,EAAO,aAE/B,CACA,OAAOxb,IACX,CACA,kBAAAub,CAAmBT,GACf,MAAMU,EAAQxb,KAAKma,OAAOW,GAC1B,OAAO,eAAaU,EAAO,cAC/B,CACA,gBAAAJ,CAAiBN,GACb,MAAMU,EAAQxb,KAAKma,OAAOW,GAC1B,OAAOU,GAAS,eAAaA,EAAO,YACxC,CACA,cAAAE,GAEI,OADA5R,OAAOC,KAAK/J,KAAKma,QAAQnQ,SAAS8Q,GAAc9a,KAAKsb,cAAcR,KAC5D9a,IACX,CACA,YAAA2b,GAEI,OADA7R,OAAOC,KAAK/J,KAAKma,QAAQnQ,SAAS8Q,GAAc9a,KAAKqb,YAAYP,KAC1D9a,IACX,CACA,WAAA4b,CAAYd,EAAWhC,GACnB,MAAMnY,EAAQX,KAAKka,OAAOY,GAI1B,OAHIna,GACAA,EAAMkb,OAAO/C,EAAK9J,MAAO8J,EAAK7J,QAE3BjP,IACX,CACA,QAAA8b,CAASN,GACL,MAAMrB,EAASY,MAAMC,QAAQQ,GAASA,EAAQ,CAACA,GAC3Cxb,KAAKkO,QAAQiM,OACbna,KAAKkO,QAAQiM,OAAO3R,QAAQ2R,GAG5Bna,KAAKkO,QAAQiM,OAASA,EAE1BA,EAAOnQ,SAASwR,GAAUxb,KAAK+b,UAAUP,IAC7C,CACA,WAAAQ,CAAYlB,GACR,MAAMmB,EAAalB,MAAMC,QAAQF,GAAaA,EAAY,CAACA,GACvD9a,KAAKkO,QAAQiM,SACbna,KAAKkO,QAAQiM,OAASna,KAAKkO,QAAQiM,OAAO7O,QAAQkQ,IAAWS,EAAWhS,SAASuR,EAAMna,QACvF4a,EAAWjS,SAAS8Q,IAChB,MAAMna,EAAQX,KAAKka,OAAOY,GAC1B9a,KAAKkc,sBAAsBvb,GAC3BA,EAAMgW,iBACC3W,KAAKka,OAAOY,GACnB,MAAMrF,EAAOzV,KAAKma,OAAOW,GACzB,aAAWrF,UACJzV,KAAKma,OAAOW,EAAU,IAGzC,CAEA,aAAAP,GACIva,KAAK2O,UAAYrH,SAASsH,cAAc,OACxC,eAAa5O,KAAK2O,UAAW3O,KAAK6O,gBAAgBkL,GAAWoC,OAC7D,WAASnc,KAAK2O,UAAW,sBAAuB3O,KAAKkO,QAAQkO,cAAgB,mBACjF,CACA,WAAA3B,GACIza,KAAKiN,QAAU3F,SAASsH,cAAc,OACtC,eAAa5O,KAAKiN,QAASjN,KAAK6O,gBAAgBkL,GAAW9M,UAC3D,eAAajN,KAAKiN,QAASjN,KAAK2O,UACpC,CACA,UAAA6L,GACQxa,KAAKkO,QAAQmO,SACb,eAAarc,KAAK2O,UAAW,cAC7B,aAAW3O,KAAK2O,UAAW3O,KAAKsc,gBAExC,CACA,SAAAP,CAAUP,GACN,MAAMe,EAAqBvc,KAAKkO,QAAQsO,qBAAuB,CAAC,EAC1DC,EAAYnV,SAASsH,cAAc,OACzC,eAAa6N,EAAWzc,KAAK6O,gBAAgBkL,GAAWyB,QACxD,WAASiB,EAAW,YAAajB,EAAMna,OACb,MAArBma,EAAMkB,aAAuB1c,KAAKkO,QAAQwO,cACrB,IAAtBlB,EAAMkB,cACN,eAAaD,EAAW,eAE5B,kBAAgBA,EAAW,aAAiC,IAApBjB,EAAMmB,WAC9C,MAAMjc,EAAQ4G,SAASsH,cAAc,MACrC,eAAalO,EAAOV,KAAK6O,gBAAgBkL,GAAW6C,aACpDlc,EAAMmc,UAAYrB,EAAM9a,OAAS8a,EAAMna,KACvC,MAAM4L,EAAU3F,SAASsH,cAAc,OACvC,eAAa3B,EAASjN,KAAK6O,gBAAgBkL,GAAW+C,eACtD,MAAMC,EAAsBvB,EAAMwB,aAC5Brc,EAAQ,IAAI,MAAMmJ,OAAO2E,OAAO3E,OAAO2E,OAAO3E,OAAO2E,OAAO,CAAC,EAAG8N,GAAqBQ,GAAsB,CAAEpO,UAAWrH,SAASsH,cAAc,OAAQpJ,MAAO+W,EAAmB/W,OAAS,IAAI,MAASwJ,MAAOwM,EAAMyB,YAAcjd,KAAKkO,QAAQgP,kBAAmBjO,OAAQuM,EAAM2B,aAAend,KAAKkO,QAAQkP,mBAAoBC,aAAa,EAAOC,2BAA2B,KACrXtd,KAAKud,oBAAoB5c,GACzB,aAAWsM,EAAStM,EAAMgO,WAC1B,aAAW8N,EAAW,CAAC/b,EAAOuM,IAC9B,eAAawP,EAAWzc,KAAKiN,SAC7BjN,KAAKma,OAAOqB,EAAMna,MAAQob,EAC1Bzc,KAAKka,OAAOsB,EAAMna,MAAQV,CAC9B,CACA,UAAA+Z,GAGI,GAFA1a,KAAKwd,cACLxd,KAAKyd,sBACDzd,KAAKkO,QAAQiM,QAAUna,KAAKkO,QAAQiM,OAAOzR,OAC3C1I,KAAKkO,QAAQiM,OAAOnQ,SAASwR,IACzBxb,KAAK+b,UAAUP,EAAM,QAGxB,CACD,MAAMe,EAAqBvc,KAAKkO,QAAQsO,qBAAuB,CAAC,EAC1D7b,EAAQ,IAAI,MAAMmJ,OAAO2E,OAAO3E,OAAO2E,OAAO,CAAC,EAAG8N,GAAqB,CAAE5N,UAAWrH,SAASsH,cAAc,OAAQpJ,MAAO+W,EAAmB/W,OAAS,IAAI,MAASwJ,MAAOhP,KAAKkO,QAAQgP,kBAAmBjO,OAAQjP,KAAKkO,QAAQkP,mBAAoBC,aAAa,EAAOC,2BAA2B,KACxS,aAAWtd,KAAKiN,QAAStM,EAAMgO,WAC/B3O,KAAKka,OAAOF,GAAQ0D,kBAAoB/c,CAC5C,CACJ,CACA,mBAAA8c,GAKI,GAJAzd,KAAKkO,QAAQwO,YACT1c,KAAKkO,QAAQwO,aACT1c,KAAKkO,QAAQiM,QACbna,KAAKkO,QAAQiM,OAAOwD,MAAMnC,IAAgC,IAAtBA,EAAMkB,cAC9C1c,KAAKkO,QAAQwO,YAAa,CAC1B,eAAa1c,KAAK2O,UAAW,eAC7B,MAAMgO,EAAY3c,KAAKkO,QAAQiM,QAC3Bna,KAAKkO,QAAQiM,OAAOyD,OAAOpC,GAAUA,EAAMmB,YAAmC,IAAtBnB,EAAMkB,cAC9DC,EACA,eAAa3c,KAAK2O,UAAW,aAG7B,kBAAgB3O,KAAK2O,UAAW,YAExC,MAEI,kBAAgB3O,KAAK2O,UAAW,cAExC,CACA,QAAAgM,GACI,MAAMja,EAAQ4G,SAASsH,cAAc,OACrC,eAAalO,EAAOV,KAAK6O,gBAAgBkL,GAAWrZ,QACpDA,EAAMmc,UAAY7c,KAAKkO,QAAQxN,MAC/B,eAAaA,EAAOV,KAAK2O,UAC7B,CACA,YAAA2N,GACI,MAAM7G,EAAOnO,SAASsH,cAAc,OACpC,eAAa6G,EAAMzV,KAAK6O,gBAAgBkL,GAAWsC,SACnD,MAAMwB,EAAQvW,SAASsH,cAAc,SAOrC,OANA,WAASiP,EAAO,CACZ/Y,KAAM,SACNgZ,YAAa9d,KAAKkO,QAAQ4P,aAAe,WAE7C,eAAaD,EAAO7d,KAAK6O,gBAAgBkL,GAAWgE,aACpD,aAAWtI,EAAMoI,GACVpI,CACX,CACA,cAAAmF,GACI,MAAMla,EAAQV,KAAK6O,gBAAgBkL,GAAWrZ,OACxCqd,EAAa/d,KAAK6O,gBAAgBkL,GAAWgE,YAC7CnB,EAAa5c,KAAK6O,gBAAgBkL,GAAW6C,YACnD5c,KAAKge,eAAe,CAChB,CAAC,UAAUtd,KAAU,eACrB,CAAC,eAAeA,KAAU,eAC1B,CAAC,UAAUkc,KAAe,oBAC1B,CAAC,eAAeA,KAAe,oBAC/B,CAAC,UAAUmB,KAAe,WAC1B,CAAC,YAAYA,KAAe,kBAC5B,CAAC,aAAaA,KAAe,oBAErC,CACA,aAAAE,GACIje,KAAK2R,kBACT,CACA,mBAAA4L,CAAoB5c,GAChBA,EAAMC,GAAG,iBAAkBZ,KAAKke,YAAale,KACjD,CACA,qBAAAkc,CAAsBvb,GAClBA,EAAMiR,IAAI,iBAAkB5R,KAAKke,YAAale,KAClD,CACA,SAAAib,CAAUpE,EAAOiE,EAAWqD,GACxB,MAAM3Y,EAAQxF,KAAKoe,SAAStD,GAC5B,GAAItV,EAAO,CACP,MAAMyR,EAAQJ,EAAMzK,KAAKrF,GAAS,MAAKsX,OAAOtX,GAAQA,EAAO,MAAK2O,OAAO3O,MACzD,IAAZoX,EACA3Y,EAAMlC,YAAY2T,GAGlBzR,EAAMgM,WAAWyF,EAEzB,CACA,MAAMuE,EAAQxb,KAAKse,SAASxD,GAC5B,IAAI7L,EAASjP,KAAKkO,QAAQkP,mBACtB5B,GAA8B,MAArBA,EAAM2B,cACflO,EAASuM,EAAM2B,aAEnB,MAAMoB,EAAU/C,GAASA,EAAM+C,QAAWve,KAAKkO,QAAQqQ,OAIvD,GAHIA,GAAU/Y,GACV,WAAiB+Y,EAAQve,KAAMwF,EAAOgW,IAErCvM,EAAQ,CACT,MAAMtO,EAAQX,KAAKwe,SAAS1D,GAC5Bna,EAAMkR,aAAa,CACf4M,SAAU9d,EAAMuN,QAAQc,MACxB0P,WAAY,EACZhb,QAAU8X,GAASA,EAAMmD,cACrB3e,KAAKkO,QAAQ0Q,qBACb,IAEZ,CACA,OAAO5e,IACX,CACA,WAAAke,CAAYW,GACR,MAAM,EAAEvP,EAAC,KAAEF,GAASyP,EACdrD,EAAQxb,KAAK8e,eAAe1P,GAC9BoM,IAA+B,IAAtBA,EAAMuD,aAGnB/e,KAAKqa,IAAIlL,MAAMC,EAAME,EACzB,CACA,MAAAhE,CAAO0T,EAAS1T,GACZ,MAAM2T,EAAQnV,OAAOC,KAAK/J,KAAKka,QAAQR,QAAO,CAACC,EAAMmB,KACjD,MAAMna,EAAQX,KAAKka,OAAOY,GACpBzZ,EAAOyZ,IAAcd,GAAQ0D,iBAAmB,KAAO5C,EACvD9C,EAAQrX,EAAM6E,MAAM0R,WAAW5L,QAAQvE,IACzC,IAAImY,GAAU,EAEVA,EADkB,oBAAX5T,EACG,WAAiBA,EAAQtL,KAAM+G,EAAMiY,EAAS3d,EAAMrB,MAEvC,mBAAXsL,EACFA,EAGAtL,KAAKmf,cAAcpY,EAAMiY,EAAS1T,EAAQ0T,EAAQ9T,gBAAkB8T,GAElF,MAAM7O,EAAOxP,EAAMye,SAAS1N,eAAe3K,GAI3C,OAHIoJ,GACA,kBAAgBA,EAAKxB,UAAW,aAAcuQ,GAE3CA,CAAO,IAEZD,EAAQjH,EAAMtP,OAAS,EACvBwF,EAAUlO,KAAKkO,QACf1I,EAAQ,IAAI,MAalB,OAZAA,EAAMgM,WAAWwG,GACb9J,EAAQqQ,QACR,WAAiBrQ,EAAQqQ,OAAQve,KAAMwF,EAAOxF,KAAKse,SAASxD,IAE5D9a,KAAKma,OAAOW,IACZ,kBAAgB9a,KAAKma,OAAOW,GAAY,aAAcmE,GAE1Dte,EAAMkR,aAAa,CACfwN,UAAW,EACXX,WAAY,EACZhb,QAASwK,EAAQ0Q,qBAAuB,KAErCjF,GAAQsF,CAAK,IACrB,GACH,kBAAgBjf,KAAK2O,UAAW,aAAcsQ,EAClD,CACA,aAAAE,CAAcpY,EAAMiY,EAASM,EAASC,GAClC,OAAIP,IAAWM,GACJxV,OAAOC,KAAKuV,GAAS3B,MAAM6B,IAC9B,GAAc,MAAVA,GAAiBzY,EAAKyY,QAAUA,EAAO,CACvC,MAAMlU,EAASgU,EAAQE,GACvB,GAAsB,mBAAXlU,EACP,OAAOA,EAEX,MAAMmU,EAAQ1E,MAAMC,QAAQ1P,GAAUA,EAAS,CAACA,GAChD,OAAOmU,EAAM9B,MAAM+B,IACf,IAAIC,EAAM5Y,EAAK6Y,cAAcF,GAC7B,OAAW,MAAPC,IACAA,EAAM,GAAGA,IACJJ,IACDI,EAAMA,EAAIzU,eAEPyU,EAAIE,QAAQb,IAAY,EAEvB,GAEpB,CACA,OAAO,CAAK,GAIxB,CACA,QAAA1E,CAASjL,GACLrP,KAAKsL,OAAO+D,EAAIhC,OAAOhI,MAAOrF,KAAKkO,QAAQmO,OAC/C,CACA,eAAAyD,GACI,eAAa9f,KAAK2O,UAAW,aACjC,CACA,gBAAAoR,GACI,kBAAgB/f,KAAK2O,UAAW,aACpC,CACA,YAAAqR,GACQhgB,KAAKkO,QAAQwO,cACb,kBAAgB1c,KAAK2O,UAAW,aAC5B,eAAa3O,KAAK2O,UAAW,aAC7B3O,KAAK0b,iBAGL1b,KAAK2b,eAGjB,CACA,iBAAAsE,CAAkB5Q,GACd,MAAMmM,EAAQnM,EAAIhC,OAAO6S,QAAQ,IAAIlgB,KAAK6O,gBAAgBkL,GAAWyB,UACjEA,GACAxb,KAAKmb,YAAY,WAASK,EAAO,cAAgB,IAErD,MAAM2E,EAAerW,OAAOC,KAAK/J,KAAKma,QAAQyD,OAAOvc,IACjD,MAAMma,EAAQxb,KAAKse,SAASjd,GACtBob,EAAYzc,KAAKma,OAAO9Y,GAC9B,OAASma,IAA+B,IAAtBA,EAAMkB,aACpB,eAAaD,EAAW,YAAa,IAE7C,kBAAgBzc,KAAK2O,UAAW,YAAawR,EACjD,CACA,QAAA/B,CAAStD,GACL,MAAMna,EAAQX,KAAKwe,SAAS1D,GAC5B,OAAOna,EAAQA,EAAM6E,MAAQ,IACjC,CACA,QAAAgZ,CAAS1D,GACL,OAAO9a,KAAKka,OAAOY,GAAad,GAAQ0D,iBAC5C,CACA,QAAAY,CAASxD,GACL,MAAMX,EAASna,KAAKkO,QAAQiM,OAC5B,OAAiB,MAAbW,GAAqBX,GAAUA,EAAOzR,OAC/ByR,EAAO7P,MAAMkR,GAAUA,EAAMna,OAASyZ,IAE1C,IACX,CACA,cAAAgE,CAAe1P,GACX,MAAM+K,EAASna,KAAKkO,QAAQiM,OAC5B,OAAIA,EACOA,EAAO7P,MAAMkR,IAChB,MAAMhW,EAAQxF,KAAKoe,SAAS5C,EAAMna,MAClC,QAAImE,GACOA,EAAM4a,IAAIhR,EAAK1K,GAEd,IAGb,IACX,CACA,WAAA8Y,GACI1T,OAAOC,KAAK/J,KAAKka,QAAQlQ,SAAS8Q,IAC9B,MAAMna,EAAQX,KAAKka,OAAOY,GAC1B9a,KAAKkc,sBAAsBvb,GAC3BA,EAAMgW,SAAS,IAEnB7M,OAAOC,KAAK/J,KAAKma,QAAQnQ,SAAS8Q,IAC9B,MAAMrF,EAAOzV,KAAKma,OAAOW,GACzB,aAAWrF,EAAK,IAEpBzV,KAAKka,OAAS,CAAC,EACfla,KAAKma,OAAS,CAAC,CACnB,CACA,QAAAzD,GACI1W,KAAKwd,cACLxd,KAAKqa,IAAIvF,SACT9U,KAAKie,gBACLje,KAAK4U,0BACT,CACA,OAAA+B,GACI3W,KAAK8U,SACL,WAAgB9U,KAAKqB,KACzB,EAEJ,GAAW,CACP,MAAKsV,WACNsD,GAAQd,UAAW,UAAW,MACjC,SAAWc,GACPA,EAAQG,eAAiBtQ,OAAO2E,OAAO,CAAEyO,kBAAmB,IAAKE,mBAAoB,IAAK1c,MAAO,UAAWgc,aAAa,EAAOoB,YAAa,SAAU1B,aAAc,mBAAoB,MAAAmC,CAAO/Y,EAAOgW,GAC/L,MAAMtN,EAAU,CACZ4J,YAAa9X,KAAKkO,QAAQgP,kBAAoB,EAAI,GAClD/F,QAAS,EACTmB,UAAW,GACXZ,aAAa,EACbJ,GAAI,GACJC,GAAI,IAERX,GAAKpR,EAAOsE,OAAO2E,OAAO3E,OAAO2E,OAAO3E,OAAO2E,OAAO,CAAC,EAAGP,GAAUlO,KAAKkO,QAAQmS,eAAiB7E,EAAQA,EAAM6E,cAAgB,CAAC,GACrI,GAAKrS,GAAIU,SAChB,CAZD,CAYGuL,KAAYA,GAAU,CAAC,IAE1B,SAAWF,GACPA,EAAWoC,KAAO,iBAClBpC,EAAWrZ,MAAQ,GAAGqZ,EAAWoC,aACjCpC,EAAWsC,OAAS,GAAGtC,EAAWoC,cAClCpC,EAAWgE,WAAa,GAAGhE,EAAWsC,cACtCtC,EAAW9M,QAAU,GAAG8M,EAAWoC,eACnCpC,EAAWyB,MAAQ,GAAGzB,EAAWoC,aACjCpC,EAAW6C,WAAa,GAAG7C,EAAWyB,cACtCzB,EAAW+C,aAAe,GAAG/C,EAAWyB,eAC3C,CATD,CASGzB,KAAeA,GAAa,CAAC,IAEhC,SAAWC,GACPA,EAAQ0D,iBAAmB,aAC9B,CAFD,CAEG1D,KAAYA,GAAU,CAAC,IC7d1B,MAAMsG,GAAoBjT,IAAM,CAC5B3M,OAAO6f,EAAAA,GAAAA,IAAG,gCACVlT,OAAQA,EACRqP,aAAa,EACbQ,kBAAmB,IACnB/C,OAAQ,CACJ,CACI9Y,KAAM,aACNX,OAAO6f,EAAAA,GAAAA,IAAG,kCACV5D,WAAW,EACXD,aAAa,GAEjB,CACIrb,KAAM,aACNX,OAAO6f,EAAAA,GAAAA,IAAG,kCACV5D,WAAW,EACXD,aAAa,GAEjB,CACIrb,KAAM,WACNX,OAAO6f,EAAAA,GAAAA,IAAG,gCACV5D,WAAW,EACXD,aAAa,IAGrB2D,cAAe,CACXlJ,QAAS,EACTM,QAAQ,EACRC,aAAa,KAIf8I,GAAMA,CAACnT,EAAQsB,EAAW8R,EAAeC,MAC3C,MAAMnK,EAAU,IAAIkK,EAAaH,GAAiBjT,IAElDkJ,EAAQsE,KACJ,CACI,IAAI8F,GAAAA,EAAOC,aACX,IAAID,GAAAA,EAAOE,WACX,IAAIF,GAAAA,EAAOG,WACX,IAAIH,GAAAA,EAAOI,aAEf,cAGJxK,EAAQsE,KACJ,CACI,IAAI8F,GAAAA,EAAOK,iBAAiB,CACxBhS,MAAO,IACPC,OAAQ,KAEZ,IAAI0R,GAAAA,EAAOM,2BAEf,cAGJ1K,EAAQsE,KAAK,CAAC,IAAI8F,GAAAA,EAAOO,WAAc,YAEvC3K,EAAQ+D,SAAS,CAAEjN,OAAQ,CAAEhI,MAAO,OACpCkR,EAAQ+D,SAAS,CAAEjN,OAAQ,CAAEhI,MAAO,MAEpCsJ,EAAUwS,YAAY5K,EAAQ5H,UAAU,EAG5C,QACI6R,QCbJ,IACAnf,KAAA,UACAc,WAAA,CACAif,eAAA,EACAC,YAAA,EACAC,oBAAA,EACAC,mBAAA,EACAC,sBAAAA,IAEAnf,UAAAC,EAAAA,EAAAA,IAAA,CACA7B,QAAA8B,GAAAA,EAAAC,YAAAC,gBACAgf,aAAAlf,IAAAmf,EAAAA,GAAAA,IAAAnf,EAAAof,SAAAC,YAEAlf,IAAAA,GACA,OACA/B,MAAA,KAEA,EACA,aAAAqH,GACA,KAAAC,MACA,EACAnF,QAAA,CACAmF,IAAAA,GACA,KAAAtH,MAAAkhB,GAAAA,EAAAC,KAAA,KAAAtX,MAAAuX,gBAAA,KAAAthB,SACA8V,GAAAiK,IAAA,KAAA7f,MAAA,KAAA6J,MAAAwX,mBACA,KAAA9Z,OAAAC,SAAAQ,EAAAA,GAAAsZ,aACA,KAAAthB,MAAAqC,UAAA,WAAApC,GAAA,eACA,MAAAshB,EAAApY,OAAA2E,OAAA,QAAAhO,SACAyhB,EAAArL,MAAA,KAAAlW,MAAAwhB,SAAAtL,MACA,KAAA3O,OAAAC,SAAAQ,EAAAA,GAAAyZ,gBAAAF,EAAA,GAEA,EACAlhB,cAAAA,CAAAqH,EAAA9F,GACA,KAAAiI,MAAA6X,iBAAAjY,WAAA/B,EAAA9F,EACA,EACAtB,aAAAA,CAAA6D,GACA,KAAA0F,MAAA8X,oBAAA3V,UAAA7H,EACA,EACAjE,KAAAA,GACAuC,QAAAC,MAAA,gBACA,MAAA6e,EAAApY,OAAA2E,OAAA,QAAAhO,SACAyhB,EAAArL,MAAA,KAAAlW,MAAAwhB,SAAAtL,MACA,KAAA3O,OAAAC,SAAAQ,EAAAA,GAAA4Z,aAAAL,GACA,KAAAha,OAAAC,SAAAQ,EAAAA,GAAA6Z,UACA,EACA,YAAA1hB,GACA,KAAAoH,OAAAua,QAAAC,qBAAA,KAAAC,0BACA,KAAAza,OAAAC,SAAAQ,EAAAA,GAAAia,eACA,KAAAC,QAAAra,KAAA,CAAAnH,KAAA,QAAAogB,0BAAAqB,OAAA,KAAAC,OAAAD,SAEA,EACAH,eAAAA,GACA,YAAAlX,SAAAC,cAAA,KAAAvK,GAAA,yBACAT,MAAA,KAAAS,GAAA,sBACA0K,UAAA,SACAF,QAAA,KAAAxK,GAAA,YACAyK,YAAA,KAAAzK,GAAA,gBACA6hB,iBAAA,EACAC,UAAA,GAEA,GAEAC,SAAAA,GACArB,GAAAA,EAAAlL,QAAA,KAAAhW,MACA,GCxHoP,MCQhP,IAAY,OACd,GACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,GAAiB,QCNhC,IACAU,KAAA,cACAc,WAAA,CACAghB,QAAAA,KChB0P,MCOtP,IAAY,OACd,GACArjB,EACAM,GACA,EACA,KACA,KACA,MAIF,GAAe,GAAiB,O","sources":["webpack://threat-dragon/./src/views/DiagramEdit.vue","webpack://threat-dragon/./src/components/Graph.vue","webpack://threat-dragon/./src/components/GraphButtons.vue","webpack://threat-dragon/src/components/GraphButtons.vue","webpack://threat-dragon/./src/components/GraphButtons.vue?88a2","webpack://threat-dragon/./src/components/GraphButtons.vue?56e0","webpack://threat-dragon/./src/components/GraphMeta.vue","webpack://threat-dragon/./src/components/GraphProperties.vue","webpack://threat-dragon/src/components/GraphProperties.vue","webpack://threat-dragon/./src/components/GraphProperties.vue?90b9","webpack://threat-dragon/./src/components/GraphProperties.vue?5cda","webpack://threat-dragon/./src/components/GraphThreats.vue","webpack://threat-dragon/src/components/GraphThreats.vue","webpack://threat-dragon/./src/components/GraphThreats.vue?be2d","webpack://threat-dragon/./src/components/GraphThreats.vue?55ad","webpack://threat-dragon/src/components/GraphMeta.vue","webpack://threat-dragon/./src/components/GraphMeta.vue?6e33","webpack://threat-dragon/./src/components/GraphMeta.vue?5cf8","webpack://threat-dragon/./src/components/KeyboardShortcuts.vue","webpack://threat-dragon/src/components/KeyboardShortcuts.vue","webpack://threat-dragon/./src/components/KeyboardShortcuts.vue?1d14","webpack://threat-dragon/./src/components/KeyboardShortcuts.vue?0761","webpack://threat-dragon/./src/components/ThreatEditDialog.vue","webpack://threat-dragon/src/components/ThreatEditDialog.vue","webpack://threat-dragon/./src/components/ThreatEditDialog.vue?be83","webpack://threat-dragon/./src/components/ThreatEditDialog.vue?a5be","webpack://threat-dragon/./src/components/ThreatSuggestDialog.vue","webpack://threat-dragon/./src/service/threats/oats/context-generator.js","webpack://threat-dragon/src/components/ThreatSuggestDialog.vue","webpack://threat-dragon/./src/components/ThreatSuggestDialog.vue?d762","webpack://threat-dragon/./src/components/ThreatSuggestDialog.vue?0d82","webpack://threat-dragon/./node_modules/@antv/x6-plugin-dnd/es/style/raw.js","webpack://threat-dragon/./node_modules/@antv/x6-plugin-dnd/es/index.js","webpack://threat-dragon/./node_modules/@antv/x6-plugin-stencil/es/grid.js","webpack://threat-dragon/./node_modules/@antv/x6-plugin-stencil/es/style/raw.js","webpack://threat-dragon/./node_modules/@antv/x6-plugin-stencil/es/index.js","webpack://threat-dragon/./src/service/x6/stencil.js","webpack://threat-dragon/src/components/Graph.vue","webpack://threat-dragon/./src/components/Graph.vue?ffdc","webpack://threat-dragon/./src/components/Graph.vue?20ce","webpack://threat-dragon/src/views/DiagramEdit.vue","webpack://threat-dragon/./src/views/DiagramEdit.vue?3f22","webpack://threat-dragon/./src/views/DiagramEdit.vue?4625"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mt-5\"},[_c('b-row',[_c('b-col',[_c('td-graph')],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-row',[_c('b-col',{attrs:{\"md\":\"2\"}},[_c('div',{ref:\"stencil_container\"})]),_c('b-col',{attrs:{\"md\":\"10\"}},[_c('b-row',[_c('b-col',[_c('h3',{staticClass:\"td-graph-title\"},[_vm._v(_vm._s(_vm.diagram.title))])]),_c('b-col',{attrs:{\"align\":\"right\"}},[_c('td-graph-buttons',{attrs:{\"graph\":_vm.graph},on:{\"saved\":_vm.saved,\"closed\":_vm.closed}})],1)],1),_c('b-row',[_c('b-col',{staticStyle:{\"display\":\"flex\",\"width\":\"100vw\"}},[_c('div',{ref:\"graph_container\",staticStyle:{\"height\":\"65vh\",\"width\":\"100%\",\"flex\":\"1\"},attrs:{\"id\":\"graph-container\"}})])],1)],1)],1),_c('td-graph-meta',{on:{\"threatSelected\":_vm.threatSelected,\"threatSuggest\":_vm.threatSuggest}}),_c('div',[_c('td-keyboard-shortcuts'),_c('td-threat-edit-dialog',{ref:\"threatEditDialog\"}),_c('td-threat-suggest-dialog',{ref:\"threatSuggestDialog\"})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-btn-group',[_c('td-form-button',{attrs:{\"onBtnClick\":_vm.deleteSelected,\"icon\":\"trash\",\"title\":_vm.$t('threatmodel.buttons.delete'),\"text\":\"\"}}),_c('td-form-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.shortcuts\",modifiers:{\"shortcuts\":true}}],attrs:{\"onBtnClick\":_vm.noOp,\"icon\":\"keyboard\",\"title\":_vm.$t('threatmodel.buttons.shortcuts'),\"text\":\"\"}}),_c('td-form-button',{attrs:{\"onBtnClick\":_vm.undo,\"icon\":\"undo\",\"title\":_vm.$t('threatmodel.buttons.undo'),\"text\":\"\"}}),_c('td-form-button',{attrs:{\"onBtnClick\":_vm.redo,\"icon\":\"redo\",\"title\":_vm.$t('threatmodel.buttons.redo'),\"text\":\"\"}}),_c('td-form-button',{attrs:{\"onBtnClick\":_vm.zoomIn,\"icon\":\"search-plus\",\"title\":_vm.$t('threatmodel.buttons.zoomIn'),\"text\":\"\"}}),_c('td-form-button',{attrs:{\"onBtnClick\":_vm.zoomOut,\"icon\":\"search-minus\",\"title\":_vm.$t('threatmodel.buttons.zoomOut'),\"text\":\"\"}}),_c('td-form-button',{attrs:{\"onBtnClick\":_vm.toggleGrid,\"icon\":\"th\",\"title\":_vm.$t('threatmodel.buttons.toggleGrid'),\"text\":\"\"}}),_c('b-dropdown',{attrs:{\"right\":\"\",\"text\":_vm.$t('forms.export'),\"id\":\"export-graph-btn\"}},[_c('b-dropdown-item',{attrs:{\"id\":\"export-graph-png\"},on:{\"click\":_vm.exportPNG}},[_vm._v(\" PNG \")]),_c('b-dropdown-item',{attrs:{\"id\":\"export-graph-jpeg\"},on:{\"click\":_vm.exportJPEG}},[_vm._v(\" JPEG \")]),_c('b-dropdown-item',{attrs:{\"id\":\"export-graph-svg\"},on:{\"click\":_vm.exportSVG}},[_vm._v(\" SVG \")])],1),_c('td-form-button',{attrs:{\"onBtnClick\":_vm.closeDiagram,\"icon\":\"times\",\"text\":_vm.$t('forms.close')}}),_c('td-form-button',{attrs:{\"isPrimary\":true,\"onBtnClick\":_vm.save,\"icon\":\"save\",\"text\":_vm.$t('forms.save')}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-btn-group>\n        <td-form-button\n            :onBtnClick=\"deleteSelected\"\n            icon=\"trash\"\n            :title=\"$t('threatmodel.buttons.delete')\"\n            text=\"\" />\n\n        <td-form-button\n            :onBtnClick=\"noOp\"\n            v-b-modal.shortcuts\n            icon=\"keyboard\"\n            :title=\"$t('threatmodel.buttons.shortcuts')\"\n            text=\"\" />\n\n        <td-form-button\n            :onBtnClick=\"undo\"\n            icon=\"undo\"\n            :title=\"$t('threatmodel.buttons.undo')\"\n            text=\"\" />\n\n        <td-form-button\n            :onBtnClick=\"redo\"\n            icon=\"redo\"\n            :title=\"$t('threatmodel.buttons.redo')\"\n            text=\"\" />\n\n        <td-form-button\n            :onBtnClick=\"zoomIn\"\n            icon=\"search-plus\"\n            :title=\"$t('threatmodel.buttons.zoomIn')\"\n            text=\"\" />\n\n        <td-form-button\n            :onBtnClick=\"zoomOut\"\n            icon=\"search-minus\"\n            :title=\"$t('threatmodel.buttons.zoomOut')\"\n            text=\"\" />\n\n        <td-form-button\n            :onBtnClick=\"toggleGrid\"\n            icon=\"th\"\n            :title=\"$t('threatmodel.buttons.toggleGrid')\"\n            text=\"\" />\n\n        <b-dropdown right :text=\"$t('forms.export')\" id=\"export-graph-btn\">\n            <b-dropdown-item @click=\"exportPNG\" id=\"export-graph-png\">\n                PNG\n            </b-dropdown-item>\n            <b-dropdown-item @click=\"exportJPEG\" id=\"export-graph-jpeg\">\n                JPEG\n            </b-dropdown-item>\n            <b-dropdown-item @click=\"exportSVG\" id=\"export-graph-svg\">\n                SVG\n            </b-dropdown-item>\n        </b-dropdown>\n\n        <td-form-button\n            :onBtnClick=\"closeDiagram\"\n            icon=\"times\"\n            :text=\"$t('forms.close')\" />\n\n        <td-form-button\n            :isPrimary=\"true\"\n            :onBtnClick=\"save\"\n            icon=\"save\"\n            :text=\"$t('forms.save')\" />\n\n    </b-btn-group>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nimport TdFormButton from '@/components/FormButton.vue';\n\nexport default {\n    name: 'TdGraphButtons',\n    components: {\n        TdFormButton\n    },\n    computed: mapState({\n        diagram: (state) => state.threatmodel.selectedDiagram,\n    }),\n    data() {\n        return {\n            gridShowing: true\n        };\n    },\n    props: {\n        graph: {\n            required: true\n        }\n    },\n    methods: {\n        save() {\n            this.$emit('saved');\n        },\n        async closeDiagram() {\n            this.$emit('closed');\n        },\n        noOp() {\n            return;\n        },\n        undo() {\n            if (this.graph.getPlugin('history').canUndo()) {\n                this.graph.getPlugin('history').undo();\n            }\n        },\n        redo() {\n            if (this.graph.getPlugin('history').canRedo()) {\n                this.graph.getPlugin('history').redo();\n            }\n        },\n        zoomIn() {\n            if (this.graph.zoom() < 1.0) {\n                this.graph.zoom(0.1);\n            } else {\n                this.graph.zoom(0.2);\n            }\n            console.debug('zoom to ' + this.graph.zoom());\n        },\n        zoomOut() {\n            if (this.graph.zoom() < 1.0) {\n                this.graph.zoom(-0.1);\n            } else {\n                this.graph.zoom(-0.2);\n            }\n            console.debug('zoom to ' + this.graph.zoom());\n        },\n        deleteSelected() {\n            this.graph.removeCells(this.graph.getSelectedCells());\n        },\n        toggleGrid() {\n            if (this.gridShowing) {\n                this.graph.hideGrid();\n                this.gridShowing = false;\n            } else {\n                this.graph.showGrid();\n                this.gridShowing = true;\n            }\n        },\n        exportPNG() {\n            this.graph.exportPNG(`${this.diagram.title}.png`, {\n                padding: 50\n            });\n        },\n        exportJPEG() {\n            this.graph.exportJPEG(`${this.diagram.title}.jpeg`, {\n                padding: 50\n            });\n        },\n        exportSVG() {\n            this.graph.exportSVG(`${this.diagram.title}.svg`);\n        }\n    }\n};\n\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphButtons.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphButtons.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GraphButtons.vue?vue&type=template&id=f38fd57c\"\nimport script from \"./GraphButtons.vue?vue&type=script&lang=js\"\nexport * from \"./GraphButtons.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-row',[_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-card',{attrs:{\"header\":`${_vm.$t('threatmodel.properties.title')}`}},[_c('b-card-body',[_c('td-graph-properties')],1)],1)],1),_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-card',{attrs:{\"header-tag\":\"header\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.$t('threatmodel.threats'))+\" \"),(!!_vm.cellRef)?_c('b-btn',{staticClass:\"float-right\",attrs:{\"disabled\":_vm.disableNewThreat,\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.newThreat()}}},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"plus\"}}),_vm._v(\" \"+_vm._s(_vm.$t('threats.newThreat'))+\" \")],1):_vm._e()]},proxy:true}])},[_c('b-card-body',[(!!_vm.cellRef)?_c('b-card-text',[_c('b-row',_vm._l((_vm.threats || []),function(threat,idx){return _c('b-col',{key:idx,attrs:{\"md\":\"4\"}},[_c('td-graph-threats',{attrs:{\"id\":threat.id,\"status\":threat.status,\"severity\":threat.severity,\"description\":threat.description,\"title\":threat.title,\"type\":threat.type,\"isai\":threat.isai,\"mitigation\":threat.mitigation,\"modelType\":threat.modelType,\"number\":threat.number},on:{\"threatSelected\":_vm.threatSelected}})],1)}),1)],1):_vm._e(),(!_vm.cellRef || !_vm.cellRef.data)?_c('b-card-text',[_vm._v(\" \"+_vm._s(_vm.$t('threats.emptyThreat'))+\" \")]):_vm._e()],1)],1),(!_vm.disableNewThreat)?_c('a',{staticClass:\"new-threat-by-type m-2\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.AddThreatByType()}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"plus\"}}),_vm._v(\" \"+_vm._s(_vm.$t('threats.newThreatByType'))+\" \")],1):_vm._e(),(!_vm.disableNewThreat)?_c('a',{staticClass:\"new-threat-by-type m-2\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.AddThreatByContext()}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"plus\"}}),_vm._v(\" \"+_vm._s(_vm.$t('threats.newThreatByContext'))+\" \")],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"props-card\"}},[_c('b-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.cellRef),expression:\"!cellRef\"}]},[_c('b-col',[_c('p',[_vm._v(_vm._s(_vm.$t('threatmodel.properties.emptyState')))])])],1),(!!_vm.cellRef && _vm.cellRef.data)?_c('b-form',[_c('b-form-row',[_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-form-group',{attrs:{\"id\":\"name-group\",\"label-cols\":\"auto\",\"label\":_vm.cellRef.data && _vm.cellRef.data.type === 'tm.Text'\n              ? _vm.$t('threatmodel.properties.text')\n              : _vm.$t('threatmodel.properties.name'),\"label-for\":\"name\"}},[_c('b-form-textarea',{attrs:{\"id\":\"name\",\"rows\":_vm.cellRef.data.type === 'tm.Text' ? 7 : 2,\"graphPro\":\"\"},on:{\"update\":function($event){return _vm.onChangeName()}},model:{value:(_vm.cellRef.data.name),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"name\", $$v)},expression:\"cellRef.data.name\"}})],1)],1),(_vm.cellRef.data.type !== 'tm.Text')?_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-form-group',{attrs:{\"id\":\"description-group\",\"label-cols\":\"auto\",\"label\":_vm.$t('threatmodel.properties.description'),\"label-for\":\"description\"}},[_c('b-form-textarea',{attrs:{\"id\":\"description\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.description),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"description\", $$v)},expression:\"cellRef.data.description\"}})],1)],1):_vm._e(),(!_vm.cellRef.data.isTrustBoundary && _vm.cellRef.data.type !== 'tm.Text' && _vm.cellRef.data.type !== 'tm.Flow')?_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"outofscope-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"outofscope\"},on:{\"change\":function($event){return _vm.onChangeScope()}},model:{value:(_vm.cellRef.data.outOfScope),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"outOfScope\", $$v)},expression:\"cellRef.data.outOfScope\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.outOfScope')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Flow')?_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"flowoutofscope-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"flowoutofscope\"},on:{\"change\":function($event){return _vm.onChangeScope()}},model:{value:(_vm.cellRef.data.outOfScope),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"outOfScope\", $$v)},expression:\"cellRef.data.outOfScope\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.outOfScope')))]),_c('b-form-checkbox',{attrs:{\"id\":\"bidirection\"},on:{\"change\":function($event){return _vm.onChangeBidirection()}},model:{value:(_vm.cellRef.data.isBidirectional),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isBidirectional\", $$v)},expression:\"cellRef.data.isBidirectional\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.bidirection')))])],1)],1):_vm._e(),(!_vm.cellRef.data.isTrustBoundary && _vm.cellRef.data.type !== 'tm.Text')?_c('b-col',{attrs:{\"md\":\"6\"}},[_c('b-form-group',{attrs:{\"id\":\"reasonoutofscope-group\",\"label-cols\":\"auto\",\"label\":_vm.$t('threatmodel.properties.reasonOutOfScope'),\"label-for\":\"reasonoutofscope\"}},[_c('b-form-textarea',{attrs:{\"id\":\"reasonoutofscope\",\"disabled\":!_vm.cellRef.data.outOfScope},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.reasonOutOfScope),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"reasonOutOfScope\", $$v)},expression:\"cellRef.data.reasonOutOfScope\"}})],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Process')?_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"privilegelevel-group\",\"label-cols\":\"auto\",\"label\":_vm.$t('threatmodel.properties.privilegeLevel'),\"label-for\":\"privilegelevel\"}},[_c('b-form-input',{attrs:{\"id\":\"privilegelevel\",\"type\":\"text\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.privilegeLevel),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"privilegeLevel\", $$v)},expression:\"cellRef.data.privilegeLevel\"}})],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Process')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"process-handles-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"handlesCardPayment\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.handlesCardPayment),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"handlesCardPayment\", $$v)},expression:\"cellRef.data.handlesCardPayment\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.handlesCardPayment')))]),_c('b-form-checkbox',{attrs:{\"id\":\"handlesGoodsOrServices\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.handlesGoodsOrServices),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"handlesGoodsOrServices\", $$v)},expression:\"cellRef.data.handlesGoodsOrServices\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.handlesGoodsOrServices')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Process')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"web-app-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"isWebApplication\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.isWebApplication),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isWebApplication\", $$v)},expression:\"cellRef.data.isWebApplication\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.isWebApplication')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Store')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"isalog-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"isalog\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.isALog),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isALog\", $$v)},expression:\"cellRef.data.isALog\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.isALog')))]),_c('b-form-checkbox',{attrs:{\"id\":\"storesCredentials\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.storesCredentials),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"storesCredentials\", $$v)},expression:\"cellRef.data.storesCredentials\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.storesCredentials')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Store')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"isEncrypted-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"isEncrypted\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.isEncrypted),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isEncrypted\", $$v)},expression:\"cellRef.data.isEncrypted\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.isEncrypted')))]),_c('b-form-checkbox',{attrs:{\"id\":\"isSigned\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.isSigned),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isSigned\", $$v)},expression:\"cellRef.data.isSigned\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.isSigned')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Store')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"storesInventory-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"storesInventory\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.storesInventory),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"storesInventory\", $$v)},expression:\"cellRef.data.storesInventory\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.storesInventory')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Actor')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"providesAuthentication-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"providesAuthentication\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.providesAuthentication),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"providesAuthentication\", $$v)},expression:\"cellRef.data.providesAuthentication\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.providesAuthentication')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Flow')?_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"protocol-group\",\"label-cols\":\"auto\",\"label\":_vm.$t('threatmodel.properties.protocol'),\"label-for\":\"protocol\"}},[_c('b-form-input',{attrs:{\"id\":\"protocol\",\"type\":\"text\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.protocol),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"protocol\", $$v)},expression:\"cellRef.data.protocol\"}})],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Flow')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"isEncrypted-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"isEncrypted\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.isEncrypted),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isEncrypted\", $$v)},expression:\"cellRef.data.isEncrypted\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.isEncrypted')))])],1)],1):_vm._e(),(_vm.cellRef.data.type === 'tm.Flow')?_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"auto\",\"id\":\"isPublicNetwork-group\"}},[_c('b-form-checkbox',{attrs:{\"id\":\"isPublicNetwork\"},on:{\"change\":function($event){return _vm.onChangeProperties()}},model:{value:(_vm.cellRef.data.isPublicNetwork),callback:function ($$v) {_vm.$set(_vm.cellRef.data, \"isPublicNetwork\", $$v)},expression:\"cellRef.data.isPublicNetwork\"}},[_vm._v(_vm._s(_vm.$t('threatmodel.properties.publicNetwork')))])],1)],1):_vm._e()],1)],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"props-card\">\n    <!--\n            All entities have the following properties:\n                - Name (text input)\n                - Description (text area)\n                - type (not shown in properties)\n\n            Process, Store, Actor, Flow share the following (not boundaries):\n                - outOfScope\n                - reasonOutOfScope\n                - hasOpenThreats\n                - threats\n\n            Process:\n                - handlesCardPayment\n                - handlesGoodsOrServices\n                - isWebApplication\n                - privilegeLevel\n\n            Store:\n                - isALog\n                - storesCredentials\n                - isEncrypted\n                - isSigned\n                - storesInventory\n\n            Actor:\n                - providesAuthentication\n\n            Flow:\n                - isBidirectional\n                - protocol\n                - isEncrypted\n                - isPublicNetwork\n        -->\n\n    <b-row v-show=\"!cellRef\">\n      <b-col>\n        <p>{{ $t('threatmodel.properties.emptyState') }}</p>\n      </b-col>\n    </b-row>\n\n    <b-form v-if=\"!!cellRef && cellRef.data\">\n      <b-form-row>\n        <b-col md=\"6\">\n          <b-form-group\n            id=\"name-group\"\n            label-cols=\"auto\"\n            :label=\"\n              cellRef.data && cellRef.data.type === 'tm.Text'\n                ? $t('threatmodel.properties.text')\n                : $t('threatmodel.properties.name')\n            \"\n            label-for=\"name\"\n          >\n            <b-form-textarea\n              id=\"name\"\n              v-model=\"cellRef.data.name\"\n              @update=\"onChangeName()\"\n              :rows=\"cellRef.data.type === 'tm.Text' ? 7 : 2\"\n              graphPro\n            ></b-form-textarea>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type !== 'tm.Text'\" md=\"6\">\n          <b-form-group\n            id=\"description-group\"\n            label-cols=\"auto\"\n            :label=\"$t('threatmodel.properties.description')\"\n            label-for=\"description\"\n          >\n            <b-form-textarea\n              id=\"description\"\n              v-model=\"cellRef.data.description\"\n              @change=\"onChangeProperties()\"\n            ></b-form-textarea>\n          </b-form-group>\n        </b-col>\n\n        <b-col\n          v-if=\"!cellRef.data.isTrustBoundary && cellRef.data.type !== 'tm.Text' && cellRef.data.type !== 'tm.Flow'\"\n          md=\"6\"\n        >\n          <b-form-group label-cols=\"auto\" id=\"outofscope-group\">\n            <b-form-checkbox id=\"outofscope\" v-model=\"cellRef.data.outOfScope\" @change=\"onChangeScope()\">{{\n              $t('threatmodel.properties.outOfScope')\n            }}</b-form-checkbox>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Flow'\" md=\"6\">\n          <b-form-group label-cols=\"auto\" id=\"flowoutofscope-group\">\n            <b-form-checkbox id=\"flowoutofscope\" v-model=\"cellRef.data.outOfScope\" @change=\"onChangeScope()\">{{\n              $t('threatmodel.properties.outOfScope')\n            }}</b-form-checkbox>\n            <b-form-checkbox id=\"bidirection\" v-model=\"cellRef.data.isBidirectional\" @change=\"onChangeBidirection()\">{{\n              $t('threatmodel.properties.bidirection')\n            }}</b-form-checkbox>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"!cellRef.data.isTrustBoundary && cellRef.data.type !== 'tm.Text'\" md=\"6\">\n          <b-form-group\n            id=\"reasonoutofscope-group\"\n            label-cols=\"auto\"\n            :label=\"$t('threatmodel.properties.reasonOutOfScope')\"\n            label-for=\"reasonoutofscope\"\n          >\n            <b-form-textarea\n              id=\"reasonoutofscope\"\n              :disabled=\"!cellRef.data.outOfScope\"\n              v-model=\"cellRef.data.reasonOutOfScope\"\n              @change=\"onChangeProperties()\"\n            ></b-form-textarea>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Process'\">\n          <b-form-group\n            id=\"privilegelevel-group\"\n            label-cols=\"auto\"\n            :label=\"$t('threatmodel.properties.privilegeLevel')\"\n            label-for=\"privilegelevel\"\n          >\n            <b-form-input\n              id=\"privilegelevel\"\n              v-model=\"cellRef.data.privilegeLevel\"\n              @change=\"onChangeProperties()\"\n              type=\"text\"\n            ></b-form-input>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Process'\">\n          <b-form-group label-cols=\"auto\" id=\"process-handles-group\">\n            <b-form-checkbox\n              id=\"handlesCardPayment\"\n              v-model=\"cellRef.data.handlesCardPayment\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.handlesCardPayment') }}</b-form-checkbox\n            >\n            <b-form-checkbox\n              id=\"handlesGoodsOrServices\"\n              v-model=\"cellRef.data.handlesGoodsOrServices\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.handlesGoodsOrServices') }}</b-form-checkbox\n            >\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Process'\">\n          <b-form-group label-cols=\"auto\" id=\"web-app-group\">\n            <b-form-checkbox\n              id=\"isWebApplication\"\n              v-model=\"cellRef.data.isWebApplication\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.isWebApplication') }}</b-form-checkbox\n            >\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Store'\">\n          <b-form-group label-cols=\"auto\" id=\"isalog-group\">\n            <b-form-checkbox id=\"isalog\" v-model=\"cellRef.data.isALog\" @change=\"onChangeProperties()\">{{\n              $t('threatmodel.properties.isALog')\n            }}</b-form-checkbox>\n            <b-form-checkbox\n              id=\"storesCredentials\"\n              v-model=\"cellRef.data.storesCredentials\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.storesCredentials') }}</b-form-checkbox\n            >\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Store'\">\n          <b-form-group label-cols=\"auto\" id=\"isEncrypted-group\">\n            <b-form-checkbox id=\"isEncrypted\" v-model=\"cellRef.data.isEncrypted\" @change=\"onChangeProperties()\">{{\n              $t('threatmodel.properties.isEncrypted')\n            }}</b-form-checkbox>\n            <b-form-checkbox id=\"isSigned\" v-model=\"cellRef.data.isSigned\" @change=\"onChangeProperties()\">{{\n              $t('threatmodel.properties.isSigned')\n            }}</b-form-checkbox>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Store'\">\n          <b-form-group label-cols=\"auto\" id=\"storesInventory-group\">\n            <b-form-checkbox\n              id=\"storesInventory\"\n              v-model=\"cellRef.data.storesInventory\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.storesInventory') }}</b-form-checkbox\n            >\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Actor'\">\n          <b-form-group label-cols=\"auto\" id=\"providesAuthentication-group\">\n            <b-form-checkbox\n              id=\"providesAuthentication\"\n              v-model=\"cellRef.data.providesAuthentication\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.providesAuthentication') }}</b-form-checkbox\n            >\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Flow'\">\n          <b-form-group\n            id=\"protocol-group\"\n            label-cols=\"auto\"\n            :label=\"$t('threatmodel.properties.protocol')\"\n            label-for=\"protocol\"\n          >\n            <b-form-input\n              id=\"protocol\"\n              v-model=\"cellRef.data.protocol\"\n              @change=\"onChangeProperties()\"\n              type=\"text\"\n            ></b-form-input>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Flow'\">\n          <b-form-group label-cols=\"auto\" id=\"isEncrypted-group\">\n            <b-form-checkbox id=\"isEncrypted\" v-model=\"cellRef.data.isEncrypted\" @change=\"onChangeProperties()\">{{\n              $t('threatmodel.properties.isEncrypted')\n            }}</b-form-checkbox>\n          </b-form-group>\n        </b-col>\n\n        <b-col v-if=\"cellRef.data.type === 'tm.Flow'\">\n          <b-form-group label-cols=\"auto\" id=\"isPublicNetwork-group\">\n            <b-form-checkbox\n              id=\"isPublicNetwork\"\n              v-model=\"cellRef.data.isPublicNetwork\"\n              @change=\"onChangeProperties()\"\n              >{{ $t('threatmodel.properties.publicNetwork') }}</b-form-checkbox\n            >\n          </b-form-group>\n        </b-col>\n      </b-form-row>\n    </b-form>\n  </div>\n</template>\n\n<style lang=\"scss\">\nlabel {\n  font-size: 12px !important;\n}\n</style>\n\n<script>\nimport { mapState } from 'vuex';\nimport dataChanged from '@/service/x6/graph/data-changed.js';\n\nexport default {\n    name: 'TdGraphProperties',\n    computed: mapState({\n        cellRef: (state) => state.cell.ref\n    }),\n    methods: {\n        updateComponent() {\n            // should not need to need to force an update\n            this.$forceUpdate();\n        },\n        onChangeName() {\n            dataChanged.updateName(this.cellRef);\n            this.updateComponent();\n        },\n        onChangeBidirection() {\n            dataChanged.updateProperties(this.cellRef);\n            dataChanged.updateStyleAttrs(this.cellRef);\n            this.updateComponent();\n        },\n        onChangeProperties() {\n            dataChanged.updateProperties(this.cellRef);\n            this.updateComponent();\n        },\n        onChangeScope() {\n            document.getElementById('reasonoutofscope').disabled = !this.cellRef.data.outOfScope;\n            dataChanged.updateProperties(this.cellRef);\n            dataChanged.updateStyleAttrs(this.cellRef);\n            this.updateComponent();\n        }\n    }\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphProperties.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphProperties.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GraphProperties.vue?vue&type=template&id=00118eec\"\nimport script from \"./GraphProperties.vue?vue&type=script&lang=js\"\nexport * from \"./GraphProperties.vue?vue&type=script&lang=js\"\nimport style0 from \"./GraphProperties.vue?vue&type=style&index=0&id=00118eec&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-card',{staticClass:\"threat-card\"},[_c('b-card-text',[_c('b-row',[_c('b-col',[(!!_vm.number)?_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.threatSelected()}}},[_vm._v(\"#\"+_vm._s(_vm.number)+\" \"+_vm._s(_vm.title || 'Unknown Threat'))]):_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.threatSelected()}}},[_vm._v(_vm._s(_vm.title || 'Unknown Threat'))])])],1),_c('b-row',[_c('b-col',[_vm._v(\" \"+_vm._s(_vm.type)+\" \")])],1),_c('b-row',[_c('b-col',[(_vm.isai)?_c('p',[_vm._v(_vm._s(_vm.$t('threats.properties.isai'))+\" : \"+_vm._s(_vm.isai))]):_vm._e()])],1),_c('b-row',[_c('b-col',[(_vm.status !== 'Open')?_c('font-awesome-icon',{staticClass:\"threat-icon green-icon\",attrs:{\"icon\":\"check\",\"title\":_vm.status}}):_vm._e(),(_vm.status === 'Open')?_c('font-awesome-icon',{staticClass:\"threat-icon red-icon\",attrs:{\"icon\":\"exclamation-triangle\",\"title\":_vm.status}}):_vm._e(),(_vm.severity === 'High')?_c('font-awesome-icon',{staticClass:\"threat-icon red-icon\",attrs:{\"icon\":\"circle\",\"title\":_vm.severity}}):_vm._e(),(_vm.severity === 'Medium')?_c('font-awesome-icon',{staticClass:\"threat-icon yellow-icon\",attrs:{\"icon\":\"circle\",\"title\":_vm.severity}}):_vm._e(),(_vm.severity === 'Low')?_c('font-awesome-icon',{staticClass:\"threat-icon green-icon\",attrs:{\"icon\":\"circle\",\"title\":_vm.severity}}):_vm._e()],1),_c('b-col',{attrs:{\"align-h\":\"end\"}},[_c('b-badge',{attrs:{\"v-if\":!!_vm.modelType}},[_vm._v(_vm._s(_vm.modelType))])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<b-card class=\"threat-card\">\n        <b-card-text>\n            <b-row>\n                <b-col>\n                    <a href=\"javascript:void(0)\" @click=\"threatSelected()\" v-if=\"!!number\">#{{ number }} {{ title || 'Unknown Threat' }}</a>\n                    <a href=\"javascript:void(0)\" @click=\"threatSelected()\" v-else>{{ title || 'Unknown Threat' }}</a>\n                </b-col>\n            </b-row>\n            <b-row>\n                <b-col>\n                    {{ type }}\n                </b-col>\n            </b-row>\n            <b-row>\n                <b-col>\n                    <p v-if=\"isai\">{{ $t('threats.properties.isai') }} : {{ isai }}</p>\n                </b-col>\n            </b-row>\n            <b-row>\n                <b-col>\n                    <font-awesome-icon \n                        icon=\"check\"\n                        class=\"threat-icon green-icon\"\n                        :title=\"status\"\n                        v-if=\"status !== 'Open'\" />\n                    <font-awesome-icon \n                        icon=\"exclamation-triangle\"\n                        class=\"threat-icon red-icon\"\n                        :title=\"status\"\n                        v-if=\"status === 'Open'\" />\n                    <font-awesome-icon \n                        icon=\"circle\"\n                        class=\"threat-icon red-icon\"\n                        :title=\"severity\"\n                        v-if=\"severity === 'High'\" />\n                    <font-awesome-icon \n                        icon=\"circle\"\n                        class=\"threat-icon yellow-icon\"\n                        :title=\"severity\"\n                        v-if=\"severity === 'Medium'\" />\n                    <font-awesome-icon \n                        icon=\"circle\"\n                        class=\"threat-icon green-icon\"\n                        :title=\"severity\"\n                        v-if=\"severity === 'Low'\" />\n                </b-col>\n                <b-col align-h=\"end\">\n                    <b-badge :v-if=\"!!modelType\">{{ modelType }}</b-badge>\n                </b-col>\n            </b-row>\n        </b-card-text>\n    </b-card>\n</template>\n\n<style lang=\"scss\" scoped>\n.threat-card {\n    font-size: 14px;\n}\n\n.threat-title {\n    margin-bottom: 5px;\n}\n\n.threat-icon {\n    margin: 2px;\n}\n\n.green-icon {\n    color: $green;\n}\n\n.red-icon {\n    color: $red;\n}\n\n.yellow-icon {\n    color: $yellow;\n}\n\n</style>\n\n<script>\nexport default {\n    name: 'TdGraphThreats',\n    props: {\n        id: { type: String },\n        status: { type: String },\n        severity: { type: String },\n        description: { type: String },\n        title: { type: String },\n        type: { type: String },\n        mitigation: { type: String },\n        modelType: { type: String },\n        number: { type: Number },\n        isai: {type: Boolean}\n    },\n    methods: {\n        threatSelected() {\n            this.$emit('threatSelected', this.id,'old');\n        }\n    }\n};\n\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphThreats.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphThreats.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GraphThreats.vue?vue&type=template&id=40684c40&scoped=true\"\nimport script from \"./GraphThreats.vue?vue&type=script&lang=js\"\nexport * from \"./GraphThreats.vue?vue&type=script&lang=js\"\nimport style0 from \"./GraphThreats.vue?vue&type=style&index=0&id=40684c40&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40684c40\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <b-row>\n        <b-col md=\"6\">\n            <b-card :header=\"`${$t('threatmodel.properties.title')}`\">\n                <b-card-body>\n                    <td-graph-properties />\n                </b-card-body>\n            </b-card>\n        </b-col>\n        <b-col md=\"6\">\n            <b-card header-tag=\"header\">\n                <template #header>\n                    {{ $t('threatmodel.threats') }}\n                    <b-btn\n                        :disabled=\"disableNewThreat\"\n                        @click=\"newThreat()\"\n                        v-if=\"!!cellRef\"\n                        variant=\"primary\"\n                        size=\"sm\"\n                        class=\"float-right\"\n                    >\n                        <font-awesome-icon icon=\"plus\" class=\"mr-1\"></font-awesome-icon>\n                        {{ $t('threats.newThreat') }}\n                    </b-btn>\n                </template>\n                <b-card-body>\n                    <b-card-text v-if=\"!!cellRef\">\n                        <b-row>\n                            <b-col\n                                md=\"4\"\n                                v-for=\"(threat, idx) in threats || []\"\n                                :key=\"idx\"\n                            >\n                                <td-graph-threats\n                                    :id=\"threat.id\"\n                                    :status=\"threat.status\"\n                                    :severity=\"threat.severity\"\n                                    :description=\"threat.description\"\n                                    :title=\"threat.title\"\n                                    :type=\"threat.type\"\n                                    :isai=\"threat.isai\"\n                                    :mitigation=\"threat.mitigation\"\n                                    :modelType=\"threat.modelType\"\n                                    :number=threat.number\n                                    @threatSelected=\"threatSelected\" />\n                            </b-col>\n                        </b-row>\n                    </b-card-text>\n                    <b-card-text\n                        v-if=\"!cellRef || !cellRef.data\">\n                        {{ $t('threats.emptyThreat') }}\n                    </b-card-text>\n                </b-card-body>\n            </b-card>\n            <a href=\"javascript:void(0)\"\n                v-if=\"!disableNewThreat\"\n                @click=\"AddThreatByType()\"\n                class=\"new-threat-by-type m-2\"\n            >\n                    <font-awesome-icon icon=\"plus\"></font-awesome-icon>\n                    {{ $t('threats.newThreatByType') }}\n            </a>\n            <a href=\"javascript:void(0)\"\n                v-if=\"!disableNewThreat\"\n                @click=\"AddThreatByContext()\"\n                class=\"new-threat-by-type m-2\"\n            >\n                    <font-awesome-icon icon=\"plus\"></font-awesome-icon>\n                    {{ $t('threats.newThreatByContext') }}\n            </a>\n        </b-col>\n    </b-row>\n</template>\n\n<style lang=\"scss\" scoped>\n.new-threat-by-type {\n    color: $orange;\n    font-size: 16px;\n    padding: 15px;\n}\n.props-header {\n    a {\n        font-size: 12px;\n        font-weight: bolder;\n        text-decoration: none;\n        margin-left: 5px;\n    }\n}\n.down-icon {\n    margin-left: 3px;\n}\n.collapsed > .when-open,\n.not-collapsed > .when-closed {\n  display: none;\n}\n</style>\n\n<script>\nimport { mapState } from 'vuex';\n\nimport { createNewTypedThreat } from '@/service/threats/index.js';\nimport { CELL_DATA_UPDATED, CELL_UNSELECTED } from '@/store/actions/cell.js';\nimport dataChanged from '@/service/x6/graph/data-changed.js';\nimport tmActions from '@/store/actions/threatmodel.js';\nimport TdGraphProperties from '@/components/GraphProperties.vue';\nimport TdGraphThreats from '@/components/GraphThreats.vue';\n\nexport default {\n    name: 'TdGraphMeta',\n    computed: mapState({\n        cellRef: (state) => state.cell.ref,\n        threats: (state) => state.cell.threats,\n        diagram: (state) => state.threatmodel.selectedDiagram,\n        threatTop: (state) => state.threatmodel.data.detail.threatTop,\n        disableNewThreat: function (state) {\n            if (!state.cell?.ref?.data) {\n                return true;\n            }\n            return state.cell.ref.data.outOfScope || state.cell.ref.data.isTrustBoundary || state.cell.ref.data.type === 'tm.Text';\n        }\n    }),\n    components: {\n        TdGraphProperties,\n        TdGraphThreats\n    },\n    async mounted() {\n        this.init();\n    },\n    methods: {\n        init() {\n            this.$store.dispatch(CELL_UNSELECTED);\n        },\n        threatSelected(threatId,state) {\n            console.debug('selected threat ID: ' + threatId);\n            this.$emit('threatSelected', threatId,state);\n        },\n        newThreat() {\n            const threat = createNewTypedThreat(this.diagram.diagramType, this.cellRef.data.type,this.threatTop+1);\n            console.debug('new threat ID: ' + threat.id);\n            this.cellRef.data.threats.push(threat);\n            this.cellRef.data.hasOpenThreats = this.cellRef.data.threats.length > 0;\n            this.$store.dispatch(tmActions.update, { threatTop: this.threatTop+1 });\n            this.$store.dispatch(tmActions.modified);\n            this.$store.dispatch(CELL_DATA_UPDATED, this.cellRef.data);\n            dataChanged.updateStyleAttrs(this.cellRef);\n            this.threatSelected(threat.id,'new');\n        },\n        AddThreatByType(){\n            this.$emit('threatSuggest','type');\n        },\n        AddThreatByContext(){\n            this.$emit('threatSuggest','context');\n        }\n    },\n};\n\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphMeta.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GraphMeta.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GraphMeta.vue?vue&type=template&id=293aaef4&scoped=true\"\nimport script from \"./GraphMeta.vue?vue&type=script&lang=js\"\nexport * from \"./GraphMeta.vue?vue&type=script&lang=js\"\nimport style0 from \"./GraphMeta.vue?vue&type=style&index=0&id=293aaef4&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"293aaef4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-modal',{attrs:{\"id\":\"shortcuts\",\"size\":\"lg\",\"ok-variant\":\"primary\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"light\",\"ok-only\":\"\",\"title\":_vm.$t('threatmodel.shortcuts.title')}},[_c('b-table',{attrs:{\"items\":_vm.shortcuts}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-modal\n        id=\"shortcuts\"\n        size=\"lg\"\n        ok-variant=\"primary\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"light\"\n        ok-only\n        :title=\"$t('threatmodel.shortcuts.title')\"\n    >\n        <b-table :items=\"shortcuts\"></b-table>\n    </b-modal>\n</template>\n\n<script>\nexport default {\n    name: 'TdKeyboardShortcuts',\n    data() {\n        return {\n            shortcuts: [\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.copy.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.copy.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.paste.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.paste.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.undo.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.undo.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.redo.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.redo.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.delete.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.delete.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.pan.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.pan.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.multiSelect.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.multiSelect.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.zoom.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.zoom.action')\n                },\n                {\n                    shortcut: this.$t('threatmodel.shortcuts.save.shortcut'),\n                    action: this.$t('threatmodel.shortcuts.save.action')\n                }\n            ]\n        };\n    }\n};\n\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeyboardShortcuts.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KeyboardShortcuts.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./KeyboardShortcuts.vue?vue&type=template&id=0b6ad6c2\"\nimport script from \"./KeyboardShortcuts.vue?vue&type=script&lang=js\"\nexport * from \"./KeyboardShortcuts.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!!_vm.threat)?_c('b-modal',{ref:\"editModal\",attrs:{\"id\":\"threat-edit\",\"size\":\"lg\",\"ok-variant\":\"primary\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"light\",\"title\":_vm.modalTitle},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('div',{staticClass:\"w-100\"},[(!_vm.newThreat)?_c('b-button',{staticClass:\"float-left\",attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.confirmDelete()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.delete'))+\" \")]):_vm._e(),(_vm.newThreat)?_c('b-button',{staticClass:\"float-left\",attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.immediateDelete()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.remove'))+\" \")]):_vm._e(),_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.updateThreat()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.apply'))+\" \")]),(!_vm.newThreat)?_c('b-button',{staticClass:\"float-right mr-2\",attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.hideModal()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.cancel'))+\" \")]):_vm._e()],1)]},proxy:true}],null,false,1622780337)},[_c('b-form',[_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"title-group\",\"label\":_vm.$t('threats.properties.title'),\"label-for\":\"title\"}},[_c('b-form-input',{attrs:{\"id\":\"title\",\"type\":\"text\",\"required\":\"\"},model:{value:(_vm.threat.title),callback:function ($$v) {_vm.$set(_vm.threat, \"title\", $$v)},expression:\"threat.title\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"threat-type-group\",\"label\":_vm.$t('threats.properties.type'),\"label-for\":\"threat-type\"}},[_c('b-form-select',{attrs:{\"id\":\"threat-type\",\"options\":_vm.threatTypes},model:{value:(_vm.threat.type),callback:function ($$v) {_vm.$set(_vm.threat, \"type\", $$v)},expression:\"threat.type\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',{attrs:{\"md\":\"5\"}},[_c('b-form-group',{staticClass:\"float-left\",attrs:{\"id\":\"status-group\",\"label\":_vm.$t('threats.properties.status'),\"label-for\":\"status\"}},[_c('b-form-radio-group',{attrs:{\"id\":\"status\",\"options\":_vm.statuses,\"buttons\":\"\"},model:{value:(_vm.threat.status),callback:function ($$v) {_vm.$set(_vm.threat, \"status\", $$v)},expression:\"threat.status\"}})],1)],1),_c('b-col',{attrs:{\"md\":\"2\"}},[_c('b-form-group',{attrs:{\"id\":\"score-group\",\"label\":_vm.$t('threats.properties.score'),\"label-for\":\"score\"}},[_c('b-form-input',{attrs:{\"id\":\"score\",\"type\":\"text\"},model:{value:(_vm.threat.score),callback:function ($$v) {_vm.$set(_vm.threat, \"score\", $$v)},expression:\"threat.score\"}})],1)],1),_c('b-col',{attrs:{\"md\":\"5\"}},[_c('b-form-group',{staticClass:\"float-right\",attrs:{\"id\":\"priority-group\",\"label\":_vm.$t('threats.properties.priority'),\"label-for\":\"priority\"}},[_c('b-form-radio-group',{attrs:{\"id\":\"priority\",\"options\":_vm.priorities,\"buttons\":\"\"},model:{value:(_vm.threat.severity),callback:function ($$v) {_vm.$set(_vm.threat, \"severity\", $$v)},expression:\"threat.severity\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{staticClass:\"float-left\",attrs:{\"id\":\"is-ai\",\"label\":_vm.$t('threats.properties.isai'),\"label-for\":\"isai-checkbox\"}},[_c('b-form-checkbox',{staticClass:\"float-left\",attrs:{\"id\":\"isai-checkbox\",\"name\":\"isai-checkbox\"},model:{value:(_vm.threat.isai),callback:function ($$v) {_vm.$set(_vm.threat, \"isai\", $$v)},expression:\"threat.isai\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"description-group\",\"label\":_vm.$t('threats.properties.description'),\"label-for\":\"description\"}},[_c('b-form-textarea',{attrs:{\"id\":\"description\",\"rows\":\"5\"},model:{value:(_vm.threat.description),callback:function ($$v) {_vm.$set(_vm.threat, \"description\", $$v)},expression:\"threat.description\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"mitigation-group\",\"label\":_vm.$t('threats.properties.mitigation'),\"label-for\":\"mitigation\"}},[_c('b-form-textarea',{attrs:{\"id\":\"mitigation\",\"rows\":\"5\"},model:{value:(_vm.threat.mitigation),callback:function ($$v) {_vm.$set(_vm.threat, \"mitigation\", $$v)},expression:\"threat.mitigation\"}})],1)],1)],1)],1)],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <b-modal\n            v-if=\"!!threat\"\n            id=\"threat-edit\"\n            size=\"lg\"\n            ok-variant=\"primary\"\n            header-bg-variant=\"primary\"\n            header-text-variant=\"light\"\n            :title=\"modalTitle\"\n            ref=\"editModal\"\n        >\n            <b-form>\n                <b-form-row>\n                    <b-col>\n                        <b-form-group\n                            id=\"title-group\"\n                            :label=\"$t('threats.properties.title')\"\n                            label-for=\"title\">\n                            <b-form-input\n                                id=\"title\"\n                                v-model=\"threat.title\"\n                                type=\"text\"\n                                required\n                            ></b-form-input>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group\n                            id=\"threat-type-group\"\n                            :label=\"$t('threats.properties.type')\"\n                            label-for=\"threat-type\">\n                            <b-form-select\n                                id=\"threat-type\"\n                                v-model=\"threat.type\"\n                                :options=\"threatTypes\">\n                            </b-form-select>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col md=5>\n                        <b-form-group\n                            id=\"status-group\"\n                            class=\"float-left\"\n                            :label=\"$t('threats.properties.status')\"\n                            label-for=\"status\">\n                            <b-form-radio-group\n                                id=\"status\"\n                                v-model=\"threat.status\"\n                                :options=\"statuses\"\n                                buttons\n                            ></b-form-radio-group>\n                        </b-form-group>\n                    </b-col>\n\n                    <b-col md=2>\n                        <b-form-group\n                            id=\"score-group\"\n                            :label=\"$t('threats.properties.score')\"\n                            label-for=\"score\">\n                            <b-form-input\n                                id=\"score\"\n                                v-model=\"threat.score\"\n                                type=\"text\"\n                            ></b-form-input>\n                        </b-form-group>\n                    </b-col>\n\n                    <b-col md=5>\n                        <b-form-group\n                            id=\"priority-group\"\n                            class=\"float-right\"\n                            :label=\"$t('threats.properties.priority')\"\n                            label-for=\"priority\">\n                            <b-form-radio-group\n                                id=\"priority\"\n                                v-model=\"threat.severity\"\n                                :options=\"priorities\"\n                                buttons\n                            ></b-form-radio-group>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group\n                            id=\"is-ai\"\n                            class=\"float-left\"\n                            :label=\"$t('threats.properties.isai')\"\n                            label-for=\"isai-checkbox\">\n\n                            <b-form-checkbox\n                            id=\"isai-checkbox\"\n                            class=\"float-left\"\n                            v-model=\"threat.isai\"\n                            name=\"isai-checkbox\"\n                            >\n                            </b-form-checkbox>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group\n                            id=\"description-group\"\n                            :label=\"$t('threats.properties.description')\"\n                            label-for=\"description\">\n                            <b-form-textarea\n                                id=\"description\"\n                                v-model=\"threat.description\"\n                                rows=\"5\">\n                            </b-form-textarea>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group\n                            id=\"mitigation-group\"\n                            :label=\"$t('threats.properties.mitigation')\"\n                            label-for=\"mitigation\">\n                            <b-form-textarea\n                                id=\"mitigation\"\n                                v-model=\"threat.mitigation\"\n                                rows=\"5\">\n                            </b-form-textarea>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n            </b-form>\n\n            <template #modal-footer>\n                <div class=\"w-100\">\n                <b-button\n                    v-if=\"!newThreat\"\n                    variant=\"danger\"\n                    class=\"float-left\"\n                    @click=\"confirmDelete()\"\n                >\n                    {{ $t('forms.delete') }}\n                </b-button>\n                <b-button\n                    v-if=\"newThreat\"\n                    variant=\"danger\"\n                    class=\"float-left\"\n                    @click=\"immediateDelete()\"\n                >\n                    {{ $t('forms.remove') }}\n                </b-button>\n                 <b-button\n                    variant=\"secondary\"\n                    class=\"float-right\"\n                    @click=\"updateThreat()\"\n                >\n                    {{ $t('forms.apply') }}\n                </b-button>\n                <b-button\n                v-if=\"!newThreat\"\n                variant=\"secondary\"\n                class=\"float-right mr-2\"\n                @click=\"hideModal()\"\n            >\n                {{ $t('forms.cancel') }}\n            </b-button>\n                </div>\n            </template>\n        </b-modal>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nimport { CELL_DATA_UPDATED } from '@/store/actions/cell.js';\nimport tmActions from '@/store/actions/threatmodel.js';\nimport dataChanged from '@/service/x6/graph/data-changed.js';\nimport threatModels from '@/service/threats/models/index.js';\n\nexport default {\n    name: 'TdThreatEditDialog',\n    computed: {\n        ...mapState({\n            cellRef: (state) => state.cell.ref,\n            threatTop: (state) => state.threatmodel.data.detail.threatTop\n        }),\n        threatTypes() {\n            if (!this.cellRef || !this.threat || !this.threat.modelType) {\n                return [];\n            }\n\n            const res = [];\n            const threatTypes = threatModels.getThreatTypesByElement(this.threat.modelType, this.cellRef.data.type);\n            Object.keys(threatTypes).forEach((type) => {\n                res.push(this.$t(type));\n            }, this);\n            if(!res.includes(this.threat.type))\n                res.push(this.threat.type);\n            return res;\n        },\n        statuses() {\n            return [\n                { value: 'NotApplicable', text: this.$t('threats.status.notApplicable') },\n                { value: 'Open', text: this.$t('threats.status.open') },\n                { value: 'Mitigated', text: this.$t('threats.status.mitigated') }\n            ];\n        },\n        priorities() {\n            return [\n                { value: 'TBD', text: this.$t('threats.priority.tbd') },\n                { value: 'Low', text: this.$t('threats.priority.low') },\n                { value: 'Medium', text: this.$t('threats.priority.medium') },\n                { value: 'High', text: this.$t('threats.priority.high') },\n                { value: 'Critical', text: this.$t('threats.priority.critical') }\n            ];\n        },\n        modalTitle() { return this.$t('threats.edit') + ' #' + this.number; }\n    },\n    data() {\n        return {\n            threat: {\n                isai: null\n            },\n            modelTypes: [\n                'CIA',\n                'DIE',\n                'LINDDUN',\n                'PLOT4ai',\n                'STRIDE'\n            ],\n            number: 0\n        };\n    },\n    methods: {\n        editThreat(threatId,state) {\n            const crnthreat = this.cellRef.data.threats.find(x => x.id === threatId);\n            this.threat = {...crnthreat};\n            if (!this.threat) {\n                // this should never happen with a valid threatId\n                console.warn('Trying to access a non-existent threatId: ' + threatId);\n            } else {\n                this.number = this.threat.number;\n                this.newThreat = state==='new';\n                this.$refs.editModal.show();\n            }\n        },\n        updateThreat() {\n            const threatRef = this.cellRef.data.threats.find(x => x.id === this.threat.id);\n            if (threatRef) {\n                const objRef = this.cellRef.data;\n                if(!objRef.threatFrequency){\n                    const tmpfreq = threatModels.getFrequencyMapByElement(this.threat.modelType,this.cellRef.data.type);\n                    if(tmpfreq!==null)\n                        objRef.threatFrequency = tmpfreq;\n                }\n                if(objRef.threatFrequency){\n                    Object.keys(objRef.threatFrequency).forEach((k)=>{\n                        if(this.$t(`threats.model.${this.threat.modelType.toLowerCase()}.${k}`)===this.threat.type)\n                            objRef.threatFrequency[k]++;\n                    });\n                }\n                threatRef.status = this.threat.status;\n                threatRef.severity = this.threat.severity;\n                threatRef.title = this.threat.title;\n                threatRef.type = this.threat.type;\n                threatRef.description = this.threat.description;\n                threatRef.mitigation = this.threat.mitigation;\n                threatRef.modelType = this.threat.modelType;\n                threatRef.new = false;\n                threatRef.number = this.number;\n                threatRef.isai = this.threat.isai;\n                threatRef.score = this.threat.score;\n                this.$store.dispatch(CELL_DATA_UPDATED, this.cellRef.data);\n                this.$store.dispatch(tmActions.modified);\n                dataChanged.updateStyleAttrs(this.cellRef);\n            }\n            this.hideModal();\n        },\n        deleteThreat() {\n            if(!this.threat.new){\n                const threatMap = this.cellRef.data.threatFrequency;\n                Object.keys(threatMap).forEach((k)=>{\n                    if(this.$t(`threats.model.${this.threat.modelType.toLowerCase()}.${k}`)===this.threat.type)\n                        threatMap[k]--;\n                });\n            }\n            this.cellRef.data.threats = this.cellRef.data.threats.filter(x => x.id !== this.threat.id);\n            this.cellRef.data.hasOpenThreats = this.cellRef.data.threats.length > 0;\n            this.$store.dispatch(CELL_DATA_UPDATED, this.cellRef.data);\n            this.$store.dispatch(tmActions.modified);\n            dataChanged.updateStyleAttrs(this.cellRef);\n        },\n        hideModal() {\n            this.$refs.editModal.hide();\n        },\n        async confirmDelete() {\n            const confirmed = await this.$bvModal.msgBoxConfirm(this.$t('threats.confirmDeleteMessage'), {\n                title: this.$t('threats.confirmDeleteTitle'),\n                okTitle: this.$t('forms.delete'),\n                cancelTitle: this.$t('forms.cancel'),\n                okVariant: 'danger'\n            });\n\n            if (!confirmed) { return; }\n\n            this.deleteThreat();\n            this.hideModal();\n        },\n        async immediateDelete() {\n            this.deleteThreat();\n            this.hideModal();\n        }\n    }\n};\n\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreatEditDialog.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreatEditDialog.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ThreatEditDialog.vue?vue&type=template&id=032315aa\"\nimport script from \"./ThreatEditDialog.vue?vue&type=script&lang=js\"\nexport * from \"./ThreatEditDialog.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-modal',{ref:\"editModal\",attrs:{\"id\":\"threat-edit\",\"size\":\"lg\",\"ok-variant\":\"primary\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"light\",\"title\":_vm.modalTitle},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('div',{staticClass:\"w-100\"},[_c('b-button',{staticClass:\"float-right\",attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.acceptSuggestion()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.apply'))+\" \")]),_c('b-button',{staticClass:\"float-left\",attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.previous()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.previous'))+\" \")]),_c('b-button',{staticClass:\"float-left\",attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.next()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.next'))+\" \")]),_c('b-button',{staticClass:\"float-right mr-2\",attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.hideModal()}}},[_vm._v(\" \"+_vm._s(_vm.$t('forms.cancel'))+\" \")])],1)]},proxy:true}])},[_c('b-form',[_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"title-group\",\"label\":_vm.$t('threats.properties.title'),\"label-for\":\"title\"}},[_c('b-form-input',{attrs:{\"id\":\"title\",\"type\":\"text\",\"required\":\"\"},model:{value:(_vm.threat.title),callback:function ($$v) {_vm.$set(_vm.threat, \"title\", $$v)},expression:\"threat.title\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"threat-type-group\",\"label\":_vm.$t('threats.properties.type'),\"label-for\":\"threat-type\"}},[_c('b-form-select',{attrs:{\"id\":\"threat-type\",\"options\":_vm.types},model:{value:(_vm.threat.type),callback:function ($$v) {_vm.$set(_vm.threat, \"type\", $$v)},expression:\"threat.type\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',{attrs:{\"md\":\"5\"}},[_c('b-form-group',{staticClass:\"float-left\",attrs:{\"id\":\"status-group\",\"label\":_vm.$t('threats.properties.status'),\"label-for\":\"status\"}},[_c('b-form-radio-group',{attrs:{\"id\":\"status\",\"options\":_vm.statuses,\"buttons\":\"\"},model:{value:(_vm.threat.status),callback:function ($$v) {_vm.$set(_vm.threat, \"status\", $$v)},expression:\"threat.status\"}})],1)],1),_c('b-col',{attrs:{\"md\":\"2\"}},[_c('b-form-group',{attrs:{\"id\":\"score-group\",\"label\":_vm.$t('threats.properties.score'),\"label-for\":\"score\"}},[_c('b-form-input',{attrs:{\"id\":\"score\",\"type\":\"text\"},model:{value:(_vm.threat.score),callback:function ($$v) {_vm.$set(_vm.threat, \"score\", $$v)},expression:\"threat.score\"}})],1)],1),_c('b-col',{attrs:{\"md\":\"5\"}},[_c('b-form-group',{staticClass:\"float-right\",attrs:{\"id\":\"priority-group\",\"label\":_vm.$t('threats.properties.priority'),\"label-for\":\"priority\"}},[_c('b-form-radio-group',{attrs:{\"id\":\"priority\",\"options\":_vm.priorities,\"buttons\":\"\"},model:{value:(_vm.threat.severity),callback:function ($$v) {_vm.$set(_vm.threat, \"severity\", $$v)},expression:\"threat.severity\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"description-group\",\"label\":_vm.$t('threats.properties.description'),\"label-for\":\"description\"}},[_c('b-form-textarea',{attrs:{\"id\":\"description\",\"rows\":\"5\"},model:{value:(_vm.threat.description),callback:function ($$v) {_vm.$set(_vm.threat, \"description\", $$v)},expression:\"threat.description\"}})],1)],1)],1),_c('b-form-row',[_c('b-col',[_c('b-form-group',{attrs:{\"id\":\"mitigation-group\",\"label\":_vm.$t('threats.properties.mitigation'),\"label-for\":\"mitigation\"}},[_c('b-form-textarea',{attrs:{\"id\":\"mitigation\",\"rows\":\"5\"},model:{value:(_vm.threat.mitigation),callback:function ($$v) {_vm.$set(_vm.threat, \"mitigation\", $$v)},expression:\"threat.mitigation\"}})],1)],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\nfunction fixupByContext(suggestions,modelType){\n    return suggestions.map((suggestion)=>{\n        switch(suggestion.type){\n        case 'threats.model.linddun.linkability':\n            if(modelType==='STRIDE')\n                suggestion.type = 'threats.model.stride.informationDisclosure';\n            else if (modelType === 'CIA')\n                suggestion.type = 'threats.model.cia.confidentiality';\n            break;\n        case 'threats.model.linddun.identifiability':\n            if(modelType==='STRIDE')\n                suggestion.type = 'threats.model.stride.spoofing';\n            else if(modelType==='CIA')\n                suggestion.type = 'threats.model.cia.confidentiality';\n            break;\n        case 'threats.model.stride.repudiation':\n            if(modelType==='LINDDUN')\n                suggestion.type='threats.model.linddun.nonRepudiation';\n            else if (modelType==='CIA')\n                suggestion.type = 'threats.model.cia.integrity';\n            break;\n        case 'threats.model.linddun.detectability':\n            if(modelType==='STRIDE')\n                suggestion.type = 'threats.model.stride.informationDisclosure';\n            else if(modelType==='CIA')\n                suggestion.type = 'threats.model.cia.confidentiality';\n            break;\n        case 'threats.model.linddun.disclosureOfInformation':\n            if(modelType==='STRIDE')\n                suggestion.type = 'threats.model.stride.informationDisclosure';\n            else if(modelType==='CIA')\n                suggestion.type = 'threats.model.cia.confidentiality';\n            break;\n        case 'threats.model.linddun.unawareness':\n            if(modelType==='STRIDE')\n                suggestion.type = 'threats.model.stride.elevationOfPrivilege';\n            else if(modelType==='CIA')\n                suggestion.type = 'threats.model.cia.integrity';\n            break;\n        case 'threats.model.stride.tampering':\n            if(modelType==='LINDDUN')\n                suggestion.type = 'threats.model.linddun.nonCompliance';\n            else if(modelType === 'CIA')\n                suggestion.type = 'threats.model.cia.integrity';\n            break;\n        }\n        return suggestion;\n    });\n}\n\n\n\n\nexport const GetContextSuggestions = (element, model) => {\n    const suggestions = [];\n    const diagram = (model == 'STRIDE' || model ==  'LINDDUN' || model == 'CIA')?model:'null';\n    \n    if((diagram==='null')||((element.type==='tm.Actor'&&!element.providesAuthentication)||(element.type==='tm.Flow'&&(!element.isPublicNetwork&&!element.isEncrypted))))\n    {\n        suggestions.push({\n            title: 'No Suggestions available',\n            type: '',\n            description:'No suggestions available for this context. Add one manually please',\n            mitigation:''\n        });\n        return suggestions;\n    }\n    if((element.type==='tm.Actor'&&element.providesAuthentication)){\n        suggestions.push({\n            title: 'CAPTCHA defeat',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #9:\\nAutomation is used in an attempt to analyse and determination the answers to CAPTCHA tests and related puzzles',\n            mitigation:'Defences include guarding against automation, unguessable CAPTCHA and proper enforcement of behavioral workflow'\n        });\n        suggestions.push({\n            title: 'Credential stuffing',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'See OWASP Automated Threat #8:\\nLists of stolen authentication credentials are tested against the application’s authentication mechanisms to identify whether users have re-used the same login credentials',\n            mitigation:'Defences against Credential Stuffing are described in the OWASP Credential Stuffing Prevention Cheat Sheet, Multi-Factor Authentication being a primary counter-measure'\n        });\n    }\n    \n    if((element.type==='tm.Flow'&&element.isPublicNetwork&&!element.isEncrypted)){\n        suggestions.push({\n            title: 'Use encryption',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'Unencrypted data sent over a public network may be intercepted and read by an attacker',\n            mitigation:'Data should be encrypted either at the message or transport level'\n        });\n    }\n    \n    if( (element.type==='tm.Flow'&&element.isEncrypted)){\n        suggestions.push({\n            title: 'Vulnerable transport protocol',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'Older transport protocols are vulnerable and have known vulnerabilities',\n            mitigation:'Use up to date cryptography and transport protocols'\n        });\n    }\n\n    if( (element.type==='tm.Flow'&&element.isPublicNetwork)){\n        suggestions.push({\n            title: 'Fingerprinting',\n            type: 'threats.model.linddun.linkability',\n            description:'See OWASP Automated Threat #4:\\nSpecific requests are sent to the application eliciting information in order to profile the application',\n            mitigation:'Defence includes restricting what information is provided, for example version numbers and package details'\n        });\n    }\n    \n    if( (element.type==='tm.Process'&&element.privilegeLevel!==''&&element.privilegeLevel!==undefined)){\n        suggestions.push({\n            title: 'Least privilege',\n            type: 'threats.model.linddun.unawareness',\n            description:'If a process is comprimised and under control of a malicious actor, horizontal/lateral elevation of privilege can be used to comprimise other processes',\n            mitigation:'Processes should run with least privilege that is practical, to minimise the impact of horizontal elevation of privilege'\n        });\n    }\n    \n    if((element.type==='tm.Process')){\n        suggestions.push({\n            title: 'Expedition',\n            type: 'threats.model.stride.tampering',\n            description:'See OWASP Automated Threat #6:\\nUsing speed to violate explicit or implicit assumptions about the application’s normal use to achieve unfair individual gain',\n            mitigation:'Defences include providing enforcement of behavioral workflow and anti-automation'\n        });\n    }\n    \n    if( (element.type==='tm.Process')){\n        suggestions.push({\n            title: 'Vulnerability scanning',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'See OWASP Automated Threat #14:\\nSystematic enumeration and examination in order to find weaknesses and points where a security vulnerability might exist',\n            mitigation:'Defence includes providing anti-automation'\n        });\n    }\n    \n    if( (element.type==='tm.Process')){\n        suggestions.push({\n            title: 'Denial of Service',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #15:\\nUsage may resemble legitimate application usage but leads to exhaustion of resources',\n            mitigation:'Mitigation or prevention such as providing backoff, resource management and avoiding forced deadlock'\n        });\n    }\n    \n    if( (element.type==='tm.Process'&&element.handlesCardPayment)){\n        suggestions.push({\n            title: 'Carding',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'See OWASP Automated Threat #1:\\nLists of full credit/debit card data are tested against a merchant`s payment processes to identify valid card details',\n            mitigation:'Defences include control of interaction frequency, enforcement of a single unique a action and preventing abuse of functionality'\n        });\n        suggestions.push({\n            title: 'Card cracking',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'See OWASP Automated Threat #10:\\nBrute force attack against application payment card process to identify the missing values for start date, expiry date and card security code',\n            mitigation:'Defences include control of interaction frequency, preventing brute force attacks and anti-automation'\n        });\n    }\n    \n    if((element.type==='tm.Process'&&element.handlesCardPayment)){\n        suggestions.push({\n            title: 'Cashing out',\n            type: 'threats.model.stride.repudiation',\n            description:'See OWASP Automated Threat #12:\\nObtaining currency or higher-value merchandise via the application using stolen previously validated payment cards or account login credentials',\n            mitigation:'Defences include control of interaction frequency, enforcement of a single unique action, anti-automation and preventing abuse of functionality'\n        });\n    }\n    \n    if( (element.type==='tm.Process'&&element.isWebApplication)){\n        suggestions.push({\n            title: 'Footprinting',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'See OWASP Automated Threat #18:\\nInformation gathering with the objective of learning as much as possible about the composition, configuration and security mechanisms of the application',\n            mitigation:'Defences include shutting down unnecessary services/ports and excluding information that could identify and compromise security of the organisation'\n        });\n    }\n    \n    if( (element.type==='tm.Process'&&element.handlesGoodsOrServices)){\n        suggestions.push({\n            title: 'Footprinting',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #5:\\nMass acquisition of goods or services using the application in a manner that a normal user would be unable to undertake manually',\n            mitigation:'Defences against this automated threat include control of interaction frequency, enforcement of a single unique a action and enforcement of behavioral workflow'\n        });\n        suggestions.push({\n            title: 'Sniping',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #13:\\nAutomated exploitation of system latencies in the form of timing attacks',\n            mitigation:'Defences include anti-automation and prevention of abuse of functionality'\n        });\n        suggestions.push({\n            title: 'Denial of inventory',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #21:\\nSelection and deliberate holding of items from a limited inventory or stock such that other users are unable to buy/pay/confirm the items',\n            mitigation:'Defences include control of interaction frequency and anti-automation'\n        });\n    }\n    if( (element.type==='tm.Store')){\n        suggestions.push({\n            title: 'Scraping',\n            type: 'threats.model.linddun.linkability',\n            description:'See OWASP Automated Threat #11:\\nCollecting accessible data and/or processed output from the application',\n            mitigation:'Detect fake or compromised accounts, ensure information is accessible only with authentication and authorisation'\n        });\n        suggestions.push({\n            title: 'Skewing',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #16:\\nAutomated repeated clicking or requesting or submitting content, affecting application based metrics such as counts, and measures of frequency and/or rate',\n            mitigation:'Defences include control of interaction frequency or proper enforcement of a single unique action'\n        });\n        suggestions.push({\n            title: 'Spamming',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #17:\\nStoring malicious such as malware, Iframe distribution, photographs & videos, advertisements, referrer spam and tracking/surveillance code',\n            mitigation:'Defences include detecting embedded malicious code, controling interaction frequency and enforcement of a single unique action'\n        });\n    }\n    \n    if( (element.type==='tm.Store'&&element.storesCredentials)){\n        suggestions.push({\n            title: 'Credential cracking',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'See OWASP Automated Threat #7:\\nBrute force, dictionary and guessing attacks used against authentication processes of the application to identify valid account credentials',\n            mitigation:'Defences include restriction of excessive authentication attempts, control of interaction frequency and enforcement of a single unique action'\n        });\n        suggestions.push({\n            title: 'Account creation',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #19:\\nBulk account creation, and sometimes profile population, by using the application’s account signup processes',\n            mitigation:'Defences include control of interaction frequency, enforcement of a single unique a action and enforcement of behavioral workflow'\n        });\n        suggestions.push({\n            title: 'Account aggregation',\n            type: 'threats.model.linddun.identifiability',\n            description:'See OWASP Automated Threat #20:\\nCompilation of credentials and information from multiple application accounts into another system',\n            mitigation:'Defences include control of interaction frequency and prevention of abuse of functionality'\n        });\n    }\n    if((element.type==='tm.Store'&&element.storesInventory)){\n        suggestions.push({\n            title: 'Coupon cracking',\n            type: 'threats.model.stride.tampering',\n            description:'See OWASP Automated Threat #2:\\nMass enumeration (for example coupon numbers, voucher codes, discount tokens) providing some form of user benefit within the application',\n            mitigation:'Defences include providing anti-automation, guarding against brute force, and preventing abuse of functionality'\n        });\n    }\n    if( (element.type==='tm.Store'&&element.storesInventory)){\n        suggestions.push({\n            title: 'Scalping',\n            type: 'threats.model.linddun.unawareness',\n            description:'See OWASP Automated Threat #5:\\nMass acquisition of goods or services using the application in a manner that a normal user would be unable to undertake manually',\n            mitigation:'Defences against this automated threat include control of interaction frequency, enforcement of a single unique a action and enforcement of behavioral workflow'\n        });    \n    }\n    if( (element.type==='tm.Store'&&element.isEncrypted)){\n        suggestions.push({\n            title: 'Vulnerable encryption algorithms',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'Out of date encryption algorithms are vulnerable and have known vulnerabilities',\n            mitigation:'Use up to date cryptography for all signatures and encryption'\n        });    \n    }\n    if( (element.type==='tm.Store'&&element.isSigned)){\n        suggestions.push({\n            title: 'Vulnerable cryptography',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'Out of date cryptographic techniques are vulnerable and have known vulnerabilities',\n            mitigation:'Use up to date cryptographic methods for checksums, signatures and certificates'\n        });    \n    }\n    if( (element.type==='tm.Store'&&element.isALog)){\n        suggestions.push({\n            title: 'Log contains sensetive data',\n            type: 'threats.model.linddun.disclosureOfInformation',\n            description:'Logs are read by unauthorised users or made public, sensitive data is then disclosed',\n            mitigation:'Minimise any sensitive data contained in logs, consider encryption techniques'\n        });    \n    }\n    fixupByContext(suggestions,diagram);\n    return suggestions;\n};\n\n\n","<template>\n    <div>\n        <b-modal id=\"threat-edit\" size=\"lg\" ok-variant=\"primary\" header-bg-variant=\"primary\" header-text-variant=\"light\"\n            :title=\"modalTitle\" ref=\"editModal\">\n            <b-form>\n                <b-form-row>\n                    <b-col>\n                        <b-form-group id=\"title-group\" :label=\"$t('threats.properties.title')\" label-for=\"title\">\n                            <b-form-input id=\"title\" v-model=\"threat.title\" type=\"text\" required></b-form-input>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group id=\"threat-type-group\" :label=\"$t('threats.properties.type')\"\n                            label-for=\"threat-type\">\n                            <b-form-select id=\"threat-type\" v-model=\"threat.type\" :options=\"types\">\n                            </b-form-select>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col md=5>\n                        <b-form-group id=\"status-group\" class=\"float-left\" :label=\"$t('threats.properties.status')\"\n                            label-for=\"status\">\n                            <b-form-radio-group id=\"status\" v-model=\"threat.status\" :options=\"statuses\"\n                                buttons></b-form-radio-group>\n                        </b-form-group>\n                    </b-col>\n\n                    <b-col md=2>\n                        <b-form-group id=\"score-group\" :label=\"$t('threats.properties.score')\" label-for=\"score\">\n                            <b-form-input id=\"score\" v-model=\"threat.score\" type=\"text\"></b-form-input>\n                        </b-form-group>\n                    </b-col>\n\n                    <b-col md=5>\n                        <b-form-group id=\"priority-group\" class=\"float-right\" :label=\"$t('threats.properties.priority')\"\n                            label-for=\"priority\">\n                            <b-form-radio-group id=\"priority\" v-model=\"threat.severity\" :options=\"priorities\"\n                                buttons></b-form-radio-group>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group id=\"description-group\" :label=\"$t('threats.properties.description')\"\n                            label-for=\"description\">\n                            <b-form-textarea id=\"description\" v-model=\"threat.description\" rows=\"5\">\n                            </b-form-textarea>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n\n                <b-form-row>\n                    <b-col>\n                        <b-form-group id=\"mitigation-group\" :label=\"$t('threats.properties.mitigation')\"\n                            label-for=\"mitigation\">\n                            <b-form-textarea id=\"mitigation\" v-model=\"threat.mitigation\" rows=\"5\">\n                            </b-form-textarea>\n                        </b-form-group>\n                    </b-col>\n                </b-form-row>\n            </b-form>\n\n            <template #modal-footer>\n                <div class=\"w-100\">\n                    <b-button variant=\"danger\" class=\"float-right\" @click=\"acceptSuggestion()\">\n                        {{ $t('forms.apply') }}\n                    </b-button>\n                    <b-button variant=\"secondary\" class=\"float-left\" @click=\"previous()\">\n                        {{ $t('forms.previous') }}\n                    </b-button>\n                    <b-button variant=\"danger\" class=\"float-left\" @click=\"next()\">\n                        {{ $t('forms.next') }}\n                    </b-button>\n                    <b-button variant=\"secondary\" class=\"float-right mr-2\" @click=\"hideModal()\">\n                        {{ $t('forms.cancel') }}\n                    </b-button>\n                </div>\n            </template>\n        </b-modal>\n    </div>\n</template>\n\n\n<script>\nimport { mapState } from 'vuex';\nimport { createNewTypedThreat } from '@/service/threats/index.js';\nimport { CELL_DATA_UPDATED } from '@/store/actions/cell.js';\nimport tmActions from '@/store/actions/threatmodel.js';\nimport dataChanged from '@/service/x6/graph/data-changed.js';\nimport threatModels from '@/service/threats/models/index.js';\nimport { GetContextSuggestions } from '@/service/threats/oats/context-generator.js';\nimport { v4 } from 'uuid';\nexport default {\n    name: 'TdThreatSuggest',\n    computed: {\n        ...mapState({\n            cellRef: (state) => state.cell.ref,\n            modelType: (state) => state.threatmodel.selectedDiagram.diagramType,\n            threatTop: (state) => state.threatmodel.data.detail.threatTop\n        }),\n        threatTypes() {\n            if (!this.cellRef || !this.threat || !this.modelType)\n                return [];\n            const res = [];\n            const threattypes = threatModels.getThreatTypesByElement(this.modelType, this.cellRef.data.type);\n            Object.keys(threattypes).forEach((type) => {\n                res.push(this.$t(type));\n            }, this);\n            return res;\n        },\n        statuses() {\n            return [\n                { value: 'NotApplicable', text: this.$t('threats.status.notApplicable') },\n                { value: 'Open', text: this.$t('threats.status.open') },\n                { value: 'Mitigated', text: this.$t('threats.status.mitigated') }\n            ];\n        },\n        priorities() {\n            return [\n                { value: 'TBD', text: this.$t('threats.priority.tbd') },\n                { value: 'Low', text: this.$t('threats.priority.low') },\n                { value: 'Medium', text: this.$t('threats.priority.medium') },\n                { value: 'High', text: this.$t('threats.priority.high') },\n                { value: 'Critical', text: this.$t('threats.priority.critical') }\n            ];\n        },\n        modalTitle() { return this.$t('threats.newThreat') + ' #' + (this.threatTop + 1); }\n    },\n    data() {\n        return {\n            suggestions: [],\n            types: [],\n            threat: {},\n            index: 0\n        };\n    },\n    methods: {\n        showModal(type) {\n            this.index = 0;\n            const tmpThreat = createNewTypedThreat(this.modelType, this.cellRef.data.type, this.threatTop + 1);\n            this.types = [...this.threatTypes];\n            if (type == 'type') {\n                this.threatTypes.map((t, ind) => {\n                    console.log(t);\n                    this.suggestions.push({ ...tmpThreat });\n                    this.suggestions[ind].type = t;\n                });\n            } else {\n                this.suggestions = GetContextSuggestions(this.cellRef.data, this.modelType).map((suggestion) => {\n                    tmpThreat.title = suggestion.title;\n                    tmpThreat.type = this.$t(suggestion.type);\n                    if (!this.types.includes(tmpThreat.type) && tmpThreat.type !== '')\n                        this.types.push(tmpThreat.type);\n                    tmpThreat.description = suggestion.description;\n                    tmpThreat.mitigation = suggestion.mitigation;\n                    console.log(tmpThreat);\n                    return { ...tmpThreat };\n                });\n            }\n            if (this.suggestions.length)\n                this.threat = this.suggestions[0];\n            this.$refs.editModal.show();\n        },\n        hideModal() {\n            this.threat = {};\n            this.suggestions = [];\n            this.types = [];\n            this.index = 0;\n            this.$refs.editModal.hide();\n        },\n        next() {\n            this.index++;\n            if (this.index >= this.suggestions.length) {\n                this.hideModal();\n                this.index = 0;\n                return;\n            }\n            this.threat = this.suggestions[this.index];\n        },\n        acceptSuggestion() {\n            const objRef = this.cellRef.data;\n            this.threat.number = this.threatTop + 1;\n            this.threat.id = v4();\n            if (!objRef.threatFrequency) {\n                const tmpfreq = threatModels.getFrequencyMapByElement(this.threat.modelType, this.cellRef.data.type);\n                if (tmpfreq !== null)\n                    objRef.threatFrequency = tmpfreq;\n            }\n            if (objRef.threatFrequency) {\n                Object.keys(objRef.threatFrequency).forEach((k) => {\n                    if (this.$t(`threats.model.${this.modelType.toLowerCase()}.${k}`) === this.threat.type && this.threatTypes.includes(this.threat.type))\n                        objRef.threatFrequency[k]++;\n                });\n            }\n            this.threat.new = false;\n            this.cellRef.data.threats.push(this.threat);\n            this.cellRef.data.hasOpenThreats = this.cellRef.data.threats.length > 0;\n            this.$store.dispatch(tmActions.update, { threatTop: this.threatTop + 1 });\n            this.$store.dispatch(tmActions.modified);\n            this.$store.dispatch(CELL_DATA_UPDATED, this.cellRef.data);\n            dataChanged.updateStyleAttrs(this.cellRef);\n            this.next();\n\n        },\n        previous() {\n            if (this.index > 0) {\n                this.index--;\n                this.threat = this.suggestions[this.index];\n            }\n        }\n    }\n};\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreatSuggestDialog.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ThreatSuggestDialog.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ThreatSuggestDialog.vue?vue&type=template&id=4a4209b0\"\nimport script from \"./ThreatSuggestDialog.vue?vue&type=script&lang=js\"\nexport * from \"./ThreatSuggestDialog.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { GeometryUtil, Rectangle, FunctionExt, Dom, CssLoader, View, Graph, } from '@antv/x6';\nimport { content } from './style/raw';\nexport class Dnd extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    get snapline() {\n        const target = this.options.target;\n        const snapline = target.getPlugin('snapline');\n        return snapline;\n    }\n    constructor(options) {\n        super();\n        this.name = 'dnd';\n        this.options = Object.assign(Object.assign({}, Dnd.defaults), options);\n        this.init();\n    }\n    init() {\n        CssLoader.ensure(this.name, content);\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName('widget-dnd'));\n        this.draggingGraph = new Graph(Object.assign(Object.assign({}, this.options.delegateGraphOptions), { container: document.createElement('div'), width: 1, height: 1, async: false }));\n        Dom.append(this.container, this.draggingGraph.container);\n    }\n    start(node, evt) {\n        const e = evt;\n        e.preventDefault();\n        this.targetModel.startBatch('dnd');\n        Dom.addClass(this.container, 'dragging');\n        Dom.appendTo(this.container, this.options.draggingContainer || document.body);\n        this.sourceNode = node;\n        this.prepareDragging(node, e.clientX, e.clientY);\n        const local = this.updateNodePosition(e.clientX, e.clientY);\n        if (this.isSnaplineEnabled()) {\n            this.snapline.captureCursorOffset({\n                e,\n                node,\n                cell: node,\n                view: this.draggingView,\n                x: local.x,\n                y: local.y,\n            });\n            this.draggingNode.on('change:position', this.snap, this);\n        }\n        this.delegateDocumentEvents(Dnd.documentEvents, e.data);\n    }\n    isSnaplineEnabled() {\n        return this.snapline && this.snapline.isEnabled();\n    }\n    prepareDragging(sourceNode, clientX, clientY) {\n        const draggingGraph = this.draggingGraph;\n        const draggingModel = draggingGraph.model;\n        const draggingNode = this.options.getDragNode(sourceNode, {\n            sourceNode,\n            draggingGraph,\n            targetGraph: this.targetGraph,\n        });\n        draggingNode.position(0, 0);\n        let padding = 5;\n        if (this.isSnaplineEnabled()) {\n            padding += this.snapline.options.tolerance || 0;\n        }\n        if (this.isSnaplineEnabled() || this.options.scaled) {\n            const scale = this.targetGraph.transform.getScale();\n            draggingGraph.scale(scale.sx, scale.sy);\n            padding *= Math.max(scale.sx, scale.sy);\n        }\n        else {\n            draggingGraph.scale(1, 1);\n        }\n        this.clearDragging();\n        // if (this.options.animation) {\n        //   this.$container.stop(true, true)\n        // }\n        draggingModel.resetCells([draggingNode]);\n        const delegateView = draggingGraph.findViewByCell(draggingNode);\n        delegateView.undelegateEvents();\n        delegateView.cell.off('changed');\n        draggingGraph.fitToContent({\n            padding,\n            allowNewOrigin: 'any',\n            useCellGeometry: false,\n        });\n        const bbox = delegateView.getBBox();\n        this.geometryBBox = delegateView.getBBox({ useCellGeometry: true });\n        this.delta = this.geometryBBox.getTopLeft().diff(bbox.getTopLeft());\n        this.draggingNode = draggingNode;\n        this.draggingView = delegateView;\n        this.draggingBBox = draggingNode.getBBox();\n        this.padding = padding;\n        this.originOffset = this.updateGraphPosition(clientX, clientY);\n    }\n    updateGraphPosition(clientX, clientY) {\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n        const delta = this.delta;\n        const nodeBBox = this.geometryBBox;\n        const padding = this.padding || 5;\n        const offset = {\n            left: clientX - delta.x - nodeBBox.width / 2 - padding + scrollLeft,\n            top: clientY - delta.y - nodeBBox.height / 2 - padding + scrollTop,\n        };\n        if (this.draggingGraph) {\n            Dom.css(this.container, {\n                left: `${offset.left}px`,\n                top: `${offset.top}px`,\n            });\n        }\n        return offset;\n    }\n    updateNodePosition(x, y) {\n        const local = this.targetGraph.clientToLocal(x, y);\n        const bbox = this.draggingBBox;\n        local.x -= bbox.width / 2;\n        local.y -= bbox.height / 2;\n        this.draggingNode.position(local.x, local.y);\n        return local;\n    }\n    snap({ cell, current, options, }) {\n        const node = cell;\n        if (options.snapped) {\n            const bbox = this.draggingBBox;\n            node.position(bbox.x + options.tx, bbox.y + options.ty, { silent: true });\n            this.draggingView.translate();\n            node.position(current.x, current.y, { silent: true });\n            this.snapOffset = {\n                x: options.tx,\n                y: options.ty,\n            };\n        }\n        else {\n            this.snapOffset = null;\n        }\n    }\n    onDragging(evt) {\n        const draggingView = this.draggingView;\n        if (draggingView) {\n            evt.preventDefault();\n            const e = this.normalizeEvent(evt);\n            const clientX = e.clientX;\n            const clientY = e.clientY;\n            this.updateGraphPosition(clientX, clientY);\n            const local = this.updateNodePosition(clientX, clientY);\n            const embeddingMode = this.targetGraph.options.embedding.enabled;\n            const isValidArea = (embeddingMode || this.isSnaplineEnabled()) &&\n                this.isInsideValidArea({\n                    x: clientX,\n                    y: clientY,\n                });\n            if (embeddingMode) {\n                draggingView.setEventData(e, {\n                    graph: this.targetGraph,\n                    candidateEmbedView: this.candidateEmbedView,\n                });\n                const data = draggingView.getEventData(e);\n                if (isValidArea) {\n                    draggingView.processEmbedding(e, data);\n                }\n                else {\n                    draggingView.clearEmbedding(data);\n                }\n                this.candidateEmbedView = data.candidateEmbedView;\n            }\n            // update snapline\n            if (this.isSnaplineEnabled()) {\n                if (isValidArea) {\n                    this.snapline.snapOnMoving({\n                        e,\n                        view: draggingView,\n                        x: local.x,\n                        y: local.y,\n                    });\n                }\n                else {\n                    this.snapline.hide();\n                }\n            }\n        }\n    }\n    onDragEnd(evt) {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            const e = this.normalizeEvent(evt);\n            const draggingView = this.draggingView;\n            const draggingBBox = this.draggingBBox;\n            const snapOffset = this.snapOffset;\n            let x = draggingBBox.x;\n            let y = draggingBBox.y;\n            if (snapOffset) {\n                x += snapOffset.x;\n                y += snapOffset.y;\n            }\n            draggingNode.position(x, y, { silent: true });\n            const ret = this.drop(draggingNode, { x: e.clientX, y: e.clientY });\n            const callback = (node) => {\n                if (node) {\n                    this.onDropped(draggingNode);\n                    if (this.targetGraph.options.embedding.enabled && draggingView) {\n                        draggingView.setEventData(e, {\n                            cell: node,\n                            graph: this.targetGraph,\n                            candidateEmbedView: this.candidateEmbedView,\n                        });\n                        draggingView.finalizeEmbedding(e, draggingView.getEventData(e));\n                    }\n                }\n                else {\n                    this.onDropInvalid();\n                }\n                this.candidateEmbedView = null;\n                this.targetModel.stopBatch('dnd');\n            };\n            if (FunctionExt.isAsync(ret)) {\n                // stop dragging\n                this.undelegateDocumentEvents();\n                ret.then(callback); // eslint-disable-line\n            }\n            else {\n                callback(ret);\n            }\n        }\n    }\n    clearDragging() {\n        if (this.draggingNode) {\n            this.sourceNode = null;\n            this.draggingNode.remove();\n            this.draggingNode = null;\n            this.draggingView = null;\n            this.delta = null;\n            this.padding = null;\n            this.snapOffset = null;\n            this.originOffset = null;\n            this.undelegateDocumentEvents();\n        }\n    }\n    onDropped(draggingNode) {\n        if (this.draggingNode === draggingNode) {\n            this.clearDragging();\n            Dom.removeClass(this.container, 'dragging');\n            Dom.remove(this.container);\n        }\n    }\n    onDropInvalid() {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            this.onDropped(draggingNode);\n            // todo\n            // const anim = this.options.animation\n            // if (anim) {\n            //   const duration = (typeof anim === 'object' && anim.duration) || 150\n            //   const easing = (typeof anim === 'object' && anim.easing) || 'swing'\n            //   this.draggingView = null\n            //   this.$container.animate(this.originOffset!, duration, easing, () =>\n            //     this.onDropped(draggingNode),\n            //   )\n            // } else {\n            //   this.onDropped(draggingNode)\n            // }\n        }\n    }\n    isInsideValidArea(p) {\n        let targetRect;\n        let dndRect = null;\n        const targetGraph = this.targetGraph;\n        const targetScroller = this.targetScroller;\n        if (this.options.dndContainer) {\n            dndRect = this.getDropArea(this.options.dndContainer);\n        }\n        const isInsideDndRect = dndRect && dndRect.containsPoint(p);\n        if (targetScroller) {\n            if (targetScroller.options.autoResize) {\n                targetRect = this.getDropArea(targetScroller.container);\n            }\n            else {\n                const outter = this.getDropArea(targetScroller.container);\n                targetRect = this.getDropArea(targetGraph.container).intersectsWithRect(outter);\n            }\n        }\n        else {\n            targetRect = this.getDropArea(targetGraph.container);\n        }\n        return !isInsideDndRect && targetRect && targetRect.containsPoint(p);\n    }\n    getDropArea(elem) {\n        const offset = Dom.offset(elem);\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n        return Rectangle.create({\n            x: offset.left +\n                parseInt(Dom.css(elem, 'border-left-width'), 10) -\n                scrollLeft,\n            y: offset.top +\n                parseInt(Dom.css(elem, 'border-top-width'), 10) -\n                scrollTop,\n            width: elem.clientWidth,\n            height: elem.clientHeight,\n        });\n    }\n    drop(draggingNode, pos) {\n        if (this.isInsideValidArea(pos)) {\n            const targetGraph = this.targetGraph;\n            const targetModel = targetGraph.model;\n            const local = targetGraph.clientToLocal(pos);\n            const sourceNode = this.sourceNode;\n            const droppingNode = this.options.getDropNode(draggingNode, {\n                sourceNode,\n                draggingNode,\n                targetGraph: this.targetGraph,\n                draggingGraph: this.draggingGraph,\n            });\n            const bbox = droppingNode.getBBox();\n            local.x += bbox.x - bbox.width / 2;\n            local.y += bbox.y - bbox.height / 2;\n            const gridSize = this.snapOffset ? 1 : targetGraph.getGridSize();\n            droppingNode.position(GeometryUtil.snapToGrid(local.x, gridSize), GeometryUtil.snapToGrid(local.y, gridSize));\n            droppingNode.removeZIndex();\n            const validateNode = this.options.validateNode;\n            const ret = validateNode\n                ? validateNode(droppingNode, {\n                    sourceNode,\n                    draggingNode,\n                    droppingNode,\n                    targetGraph,\n                    draggingGraph: this.draggingGraph,\n                })\n                : true;\n            if (typeof ret === 'boolean') {\n                if (ret) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            }\n            return FunctionExt.toDeferredBoolean(ret).then((valid) => {\n                if (valid) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            });\n        }\n        return null;\n    }\n    onRemove() {\n        if (this.draggingGraph) {\n            this.draggingGraph.view.remove();\n            this.draggingGraph.dispose();\n        }\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Dnd.prototype, \"dispose\", null);\n(function (Dnd) {\n    Dnd.defaults = {\n        // animation: false,\n        getDragNode: (sourceNode) => sourceNode.clone(),\n        getDropNode: (draggingNode) => draggingNode.clone(),\n    };\n    Dnd.documentEvents = {\n        mousemove: 'onDragging',\n        touchmove: 'onDragging',\n        mouseup: 'onDragEnd',\n        touchend: 'onDragEnd',\n        touchcancel: 'onDragEnd',\n    };\n})(Dnd || (Dnd = {}));\n//# sourceMappingURL=index.js.map","import { Model } from '@antv/x6';\nexport function grid(cells, options = {}) {\n    const model = Model.isModel(cells)\n        ? cells\n        : new Model().resetCells(cells, {\n            sort: false,\n            dryrun: true,\n        });\n    const nodes = model.getNodes();\n    const columns = options.columns || 1;\n    const rows = Math.ceil(nodes.length / columns);\n    const dx = options.dx || 0;\n    const dy = options.dy || 0;\n    const centre = options.center !== false;\n    const resizeToFit = options.resizeToFit === true;\n    const marginX = options.marginX || 0;\n    const marginY = options.marginY || 0;\n    const columnWidths = [];\n    let columnWidth = options.columnWidth;\n    if (columnWidth === 'compact') {\n        for (let j = 0; j < columns; j += 1) {\n            const items = GridLayout.getNodesInColumn(nodes, j, columns);\n            columnWidths.push(GridLayout.getMaxDim(items, 'width') + dx);\n        }\n    }\n    else {\n        if (columnWidth == null || columnWidth === 'auto') {\n            columnWidth = GridLayout.getMaxDim(nodes, 'width') + dx;\n        }\n        for (let i = 0; i < columns; i += 1) {\n            columnWidths.push(columnWidth);\n        }\n    }\n    const columnLefts = GridLayout.accumulate(columnWidths, marginX);\n    const rowHeights = [];\n    let rowHeight = options.rowHeight;\n    if (rowHeight === 'compact') {\n        for (let i = 0; i < rows; i += 1) {\n            const items = GridLayout.getNodesInRow(nodes, i, columns);\n            rowHeights.push(GridLayout.getMaxDim(items, 'height') + dy);\n        }\n    }\n    else {\n        if (rowHeight == null || rowHeight === 'auto') {\n            rowHeight = GridLayout.getMaxDim(nodes, 'height') + dy;\n        }\n        for (let i = 0; i < rows; i += 1) {\n            rowHeights.push(rowHeight);\n        }\n    }\n    const rowTops = GridLayout.accumulate(rowHeights, marginY);\n    model.startBatch('layout');\n    nodes.forEach((node, index) => {\n        const rowIndex = index % columns;\n        const columnIndex = Math.floor(index / columns);\n        const columnWidth = columnWidths[rowIndex];\n        const rowHeight = rowHeights[columnIndex];\n        let cx = 0;\n        let cy = 0;\n        let size = node.getSize();\n        if (resizeToFit) {\n            let width = columnWidth - 2 * dx;\n            let height = rowHeight - 2 * dy;\n            const calcHeight = size.height * (size.width ? width / size.width : 1);\n            const calcWidth = size.width * (size.height ? height / size.height : 1);\n            if (rowHeight < calcHeight) {\n                width = calcWidth;\n            }\n            else {\n                height = calcHeight;\n            }\n            size = {\n                width,\n                height,\n            };\n            node.setSize(size, options);\n        }\n        if (centre) {\n            cx = (columnWidth - size.width) / 2;\n            cy = (rowHeight - size.height) / 2;\n        }\n        node.position(columnLefts[rowIndex] + dx + cx, rowTops[columnIndex] + dy + cy, options);\n    });\n    model.stopBatch('layout');\n}\nvar GridLayout;\n(function (GridLayout) {\n    function getMaxDim(nodes, name) {\n        return nodes.reduce((memo, node) => Math.max(node === null || node === void 0 ? void 0 : node.getSize()[name], memo), 0);\n    }\n    GridLayout.getMaxDim = getMaxDim;\n    function getNodesInRow(nodes, rowIndex, columnCount) {\n        const res = [];\n        for (let i = columnCount * rowIndex, ii = i + columnCount; i < ii; i += 1) {\n            if (nodes[i])\n                res.push(nodes[i]);\n        }\n        return res;\n    }\n    GridLayout.getNodesInRow = getNodesInRow;\n    function getNodesInColumn(nodes, columnIndex, columnCount) {\n        const res = [];\n        for (let i = columnIndex, ii = nodes.length; i < ii; i += columnCount) {\n            if (nodes[i])\n                res.push(nodes[i]);\n        }\n        return res;\n    }\n    GridLayout.getNodesInColumn = getNodesInColumn;\n    function accumulate(items, start) {\n        return items.reduce((memo, item, i) => {\n            memo.push(memo[i] + item);\n            return memo;\n        }, [start || 0]);\n    }\n    GridLayout.accumulate = accumulate;\n})(GridLayout || (GridLayout = {}));\n//# sourceMappingURL=grid.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt, CssLoader, Node, Model, View, Graph, } from '@antv/x6';\nimport { Dnd } from '@antv/x6-plugin-dnd';\nimport { grid } from './grid';\nimport { content } from './style/raw';\nexport class Stencil extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    constructor(options = {}) {\n        super();\n        this.name = 'stencil';\n        CssLoader.ensure(this.name, content);\n        this.graphs = {};\n        this.groups = {};\n        this.options = Object.assign(Object.assign({}, Stencil.defaultOptions), options);\n        this.init();\n    }\n    init() {\n        this.dnd = new Dnd(this.options);\n        this.onSearch = FunctionExt.debounce(this.onSearch, 200);\n        this.initContainer();\n        this.initSearch();\n        this.initContent();\n        this.initGroups();\n        this.setTitle();\n        this.startListening();\n    }\n    load(data, groupName) {\n        if (Array.isArray(data)) {\n            this.loadGroup(data, groupName);\n        }\n        else if (this.options.groups) {\n            Object.keys(this.options.groups).forEach((groupName) => {\n                if (data[groupName]) {\n                    this.loadGroup(data[groupName], groupName);\n                }\n            });\n        }\n        return this;\n    }\n    unload(data, groupName) {\n        if (Array.isArray(data)) {\n            this.loadGroup(data, groupName, true);\n        }\n        else if (this.options.groups) {\n            Object.keys(this.options.groups).forEach((groupName) => {\n                if (data[groupName]) {\n                    this.loadGroup(data[groupName], groupName, true);\n                }\n            });\n        }\n        return this;\n    }\n    toggleGroup(groupName) {\n        if (this.isGroupCollapsed(groupName)) {\n            this.expandGroup(groupName);\n        }\n        else {\n            this.collapseGroup(groupName);\n        }\n        return this;\n    }\n    collapseGroup(groupName) {\n        if (this.isGroupCollapsable(groupName)) {\n            const group = this.groups[groupName];\n            if (group && !this.isGroupCollapsed(groupName)) {\n                this.trigger('group:collapse', { name: groupName });\n                Dom.addClass(group, 'collapsed');\n            }\n        }\n        return this;\n    }\n    expandGroup(groupName) {\n        if (this.isGroupCollapsable(groupName)) {\n            const group = this.groups[groupName];\n            if (group && this.isGroupCollapsed(groupName)) {\n                this.trigger('group:expand', { name: groupName });\n                Dom.removeClass(group, 'collapsed');\n            }\n        }\n        return this;\n    }\n    isGroupCollapsable(groupName) {\n        const group = this.groups[groupName];\n        return Dom.hasClass(group, 'collapsable');\n    }\n    isGroupCollapsed(groupName) {\n        const group = this.groups[groupName];\n        return group && Dom.hasClass(group, 'collapsed');\n    }\n    collapseGroups() {\n        Object.keys(this.groups).forEach((groupName) => this.collapseGroup(groupName));\n        return this;\n    }\n    expandGroups() {\n        Object.keys(this.groups).forEach((groupName) => this.expandGroup(groupName));\n        return this;\n    }\n    resizeGroup(groupName, size) {\n        const graph = this.graphs[groupName];\n        if (graph) {\n            graph.resize(size.width, size.height);\n        }\n        return this;\n    }\n    addGroup(group) {\n        const groups = Array.isArray(group) ? group : [group];\n        if (this.options.groups) {\n            this.options.groups.push(...groups);\n        }\n        else {\n            this.options.groups = groups;\n        }\n        groups.forEach((group) => this.initGroup(group));\n    }\n    removeGroup(groupName) {\n        const groupNames = Array.isArray(groupName) ? groupName : [groupName];\n        if (this.options.groups) {\n            this.options.groups = this.options.groups.filter((group) => !groupNames.includes(group.name));\n            groupNames.forEach((groupName) => {\n                const graph = this.graphs[groupName];\n                this.unregisterGraphEvents(graph);\n                graph.dispose();\n                delete this.graphs[groupName];\n                const elem = this.groups[groupName];\n                Dom.remove(elem);\n                delete this.groups[groupName];\n            });\n        }\n    }\n    // #endregion\n    initContainer() {\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName(ClassNames.base));\n        Dom.attr(this.container, 'data-not-found-text', this.options.notFoundText || 'No matches found');\n    }\n    initContent() {\n        this.content = document.createElement('div');\n        Dom.addClass(this.content, this.prefixClassName(ClassNames.content));\n        Dom.appendTo(this.content, this.container);\n    }\n    initSearch() {\n        if (this.options.search) {\n            Dom.addClass(this.container, 'searchable');\n            Dom.append(this.container, this.renderSearch());\n        }\n    }\n    initGroup(group) {\n        const globalGraphOptions = this.options.stencilGraphOptions || {};\n        const groupElem = document.createElement('div');\n        Dom.addClass(groupElem, this.prefixClassName(ClassNames.group));\n        Dom.attr(groupElem, 'data-name', group.name);\n        if ((group.collapsable == null && this.options.collapsable) ||\n            group.collapsable !== false) {\n            Dom.addClass(groupElem, 'collapsable');\n        }\n        Dom.toggleClass(groupElem, 'collapsed', group.collapsed === true);\n        const title = document.createElement('h3');\n        Dom.addClass(title, this.prefixClassName(ClassNames.groupTitle));\n        title.innerHTML = group.title || group.name;\n        const content = document.createElement('div');\n        Dom.addClass(content, this.prefixClassName(ClassNames.groupContent));\n        const graphOptionsInGroup = group.graphOptions;\n        const graph = new Graph(Object.assign(Object.assign(Object.assign({}, globalGraphOptions), graphOptionsInGroup), { container: document.createElement('div'), model: globalGraphOptions.model || new Model(), width: group.graphWidth || this.options.stencilGraphWidth, height: group.graphHeight || this.options.stencilGraphHeight, interacting: false, preventDefaultBlankAction: false }));\n        this.registerGraphEvents(graph);\n        Dom.append(content, graph.container);\n        Dom.append(groupElem, [title, content]);\n        Dom.appendTo(groupElem, this.content);\n        this.groups[group.name] = groupElem;\n        this.graphs[group.name] = graph;\n    }\n    initGroups() {\n        this.clearGroups();\n        this.setCollapsableState();\n        if (this.options.groups && this.options.groups.length) {\n            this.options.groups.forEach((group) => {\n                this.initGroup(group);\n            });\n        }\n        else {\n            const globalGraphOptions = this.options.stencilGraphOptions || {};\n            const graph = new Graph(Object.assign(Object.assign({}, globalGraphOptions), { container: document.createElement('div'), model: globalGraphOptions.model || new Model(), width: this.options.stencilGraphWidth, height: this.options.stencilGraphHeight, interacting: false, preventDefaultBlankAction: false }));\n            Dom.append(this.content, graph.container);\n            this.graphs[Private.defaultGroupName] = graph;\n        }\n    }\n    setCollapsableState() {\n        this.options.collapsable =\n            this.options.collapsable &&\n                this.options.groups &&\n                this.options.groups.some((group) => group.collapsable !== false);\n        if (this.options.collapsable) {\n            Dom.addClass(this.container, 'collapsable');\n            const collapsed = this.options.groups &&\n                this.options.groups.every((group) => group.collapsed || group.collapsable === false);\n            if (collapsed) {\n                Dom.addClass(this.container, 'collapsed');\n            }\n            else {\n                Dom.removeClass(this.container, 'collapsed');\n            }\n        }\n        else {\n            Dom.removeClass(this.container, 'collapsable');\n        }\n    }\n    setTitle() {\n        const title = document.createElement('div');\n        Dom.addClass(title, this.prefixClassName(ClassNames.title));\n        title.innerHTML = this.options.title;\n        Dom.appendTo(title, this.container);\n    }\n    renderSearch() {\n        const elem = document.createElement('div');\n        Dom.addClass(elem, this.prefixClassName(ClassNames.search));\n        const input = document.createElement('input');\n        Dom.attr(input, {\n            type: 'search',\n            placeholder: this.options.placeholder || 'Search',\n        });\n        Dom.addClass(input, this.prefixClassName(ClassNames.searchText));\n        Dom.append(elem, input);\n        return elem;\n    }\n    startListening() {\n        const title = this.prefixClassName(ClassNames.title);\n        const searchText = this.prefixClassName(ClassNames.searchText);\n        const groupTitle = this.prefixClassName(ClassNames.groupTitle);\n        this.delegateEvents({\n            [`click .${title}`]: 'onTitleClick',\n            [`touchstart .${title}`]: 'onTitleClick',\n            [`click .${groupTitle}`]: 'onGroupTitleClick',\n            [`touchstart .${groupTitle}`]: 'onGroupTitleClick',\n            [`input .${searchText}`]: 'onSearch',\n            [`focusin .${searchText}`]: 'onSearchFocusIn',\n            [`focusout .${searchText}`]: 'onSearchFocusOut',\n        });\n    }\n    stopListening() {\n        this.undelegateEvents();\n    }\n    registerGraphEvents(graph) {\n        graph.on('cell:mousedown', this.onDragStart, this);\n    }\n    unregisterGraphEvents(graph) {\n        graph.off('cell:mousedown', this.onDragStart, this);\n    }\n    loadGroup(cells, groupName, reverse) {\n        const model = this.getModel(groupName);\n        if (model) {\n            const nodes = cells.map((cell) => Node.isNode(cell) ? cell : Node.create(cell));\n            if (reverse === true) {\n                model.removeCells(nodes);\n            }\n            else {\n                model.resetCells(nodes);\n            }\n        }\n        const group = this.getGroup(groupName);\n        let height = this.options.stencilGraphHeight;\n        if (group && group.graphHeight != null) {\n            height = group.graphHeight;\n        }\n        const layout = (group && group.layout) || this.options.layout;\n        if (layout && model) {\n            FunctionExt.call(layout, this, model, group);\n        }\n        if (!height) {\n            const graph = this.getGraph(groupName);\n            graph.fitToContent({\n                minWidth: graph.options.width,\n                gridHeight: 1,\n                padding: (group && group.graphPadding) ||\n                    this.options.stencilGraphPadding ||\n                    10,\n            });\n        }\n        return this;\n    }\n    onDragStart(args) {\n        const { e, node } = args;\n        const group = this.getGroupByNode(node);\n        if (group && group.nodeMovable === false) {\n            return;\n        }\n        this.dnd.start(node, e);\n    }\n    filter(keyword, filter) {\n        const found = Object.keys(this.graphs).reduce((memo, groupName) => {\n            const graph = this.graphs[groupName];\n            const name = groupName === Private.defaultGroupName ? null : groupName;\n            const items = graph.model.getNodes().filter((cell) => {\n                let matched = false;\n                if (typeof filter === 'function') {\n                    matched = FunctionExt.call(filter, this, cell, keyword, name, this);\n                }\n                else if (typeof filter === 'boolean') {\n                    matched = filter;\n                }\n                else {\n                    matched = this.isCellMatched(cell, keyword, filter, keyword.toLowerCase() !== keyword);\n                }\n                const view = graph.renderer.findViewByCell(cell);\n                if (view) {\n                    Dom.toggleClass(view.container, 'unmatched', !matched);\n                }\n                return matched;\n            });\n            const found = items.length > 0;\n            const options = this.options;\n            const model = new Model();\n            model.resetCells(items);\n            if (options.layout) {\n                FunctionExt.call(options.layout, this, model, this.getGroup(groupName));\n            }\n            if (this.groups[groupName]) {\n                Dom.toggleClass(this.groups[groupName], 'unmatched', !found);\n            }\n            graph.fitToContent({\n                gridWidth: 1,\n                gridHeight: 1,\n                padding: options.stencilGraphPadding || 10,\n            });\n            return memo || found;\n        }, false);\n        Dom.toggleClass(this.container, 'not-found', !found);\n    }\n    isCellMatched(cell, keyword, filters, ignoreCase) {\n        if (keyword && filters) {\n            return Object.keys(filters).some((shape) => {\n                if (shape === '*' || cell.shape === shape) {\n                    const filter = filters[shape];\n                    if (typeof filter === 'boolean') {\n                        return filter;\n                    }\n                    const paths = Array.isArray(filter) ? filter : [filter];\n                    return paths.some((path) => {\n                        let val = cell.getPropByPath(path);\n                        if (val != null) {\n                            val = `${val}`;\n                            if (!ignoreCase) {\n                                val = val.toLowerCase();\n                            }\n                            return val.indexOf(keyword) >= 0;\n                        }\n                        return false;\n                    });\n                }\n                return false;\n            });\n        }\n        return true;\n    }\n    onSearch(evt) {\n        this.filter(evt.target.value, this.options.search);\n    }\n    onSearchFocusIn() {\n        Dom.addClass(this.container, 'is-focused');\n    }\n    onSearchFocusOut() {\n        Dom.removeClass(this.container, 'is-focused');\n    }\n    onTitleClick() {\n        if (this.options.collapsable) {\n            Dom.toggleClass(this.container, 'collapsed');\n            if (Dom.hasClass(this.container, 'collapsed')) {\n                this.collapseGroups();\n            }\n            else {\n                this.expandGroups();\n            }\n        }\n    }\n    onGroupTitleClick(evt) {\n        const group = evt.target.closest(`.${this.prefixClassName(ClassNames.group)}`);\n        if (group) {\n            this.toggleGroup(Dom.attr(group, 'data-name') || '');\n        }\n        const allCollapsed = Object.keys(this.groups).every((name) => {\n            const group = this.getGroup(name);\n            const groupElem = this.groups[name];\n            return ((group && group.collapsable === false) ||\n                Dom.hasClass(groupElem, 'collapsed'));\n        });\n        Dom.toggleClass(this.container, 'collapsed', allCollapsed);\n    }\n    getModel(groupName) {\n        const graph = this.getGraph(groupName);\n        return graph ? graph.model : null;\n    }\n    getGraph(groupName) {\n        return this.graphs[groupName || Private.defaultGroupName];\n    }\n    getGroup(groupName) {\n        const groups = this.options.groups;\n        if (groupName != null && groups && groups.length) {\n            return groups.find((group) => group.name === groupName);\n        }\n        return null;\n    }\n    getGroupByNode(node) {\n        const groups = this.options.groups;\n        if (groups) {\n            return groups.find((group) => {\n                const model = this.getModel(group.name);\n                if (model) {\n                    return model.has(node.id);\n                }\n                return false;\n            });\n        }\n        return null;\n    }\n    clearGroups() {\n        Object.keys(this.graphs).forEach((groupName) => {\n            const graph = this.graphs[groupName];\n            this.unregisterGraphEvents(graph);\n            graph.dispose();\n        });\n        Object.keys(this.groups).forEach((groupName) => {\n            const elem = this.groups[groupName];\n            Dom.remove(elem);\n        });\n        this.graphs = {};\n        this.groups = {};\n    }\n    onRemove() {\n        this.clearGroups();\n        this.dnd.remove();\n        this.stopListening();\n        this.undelegateDocumentEvents();\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Stencil.prototype, \"dispose\", null);\n(function (Stencil) {\n    Stencil.defaultOptions = Object.assign({ stencilGraphWidth: 200, stencilGraphHeight: 800, title: 'Stencil', collapsable: false, placeholder: 'Search', notFoundText: 'No matches found', layout(model, group) {\n            const options = {\n                columnWidth: this.options.stencilGraphWidth / 2 - 10,\n                columns: 2,\n                rowHeight: 80,\n                resizeToFit: false,\n                dx: 10,\n                dy: 10,\n            };\n            grid(model, Object.assign(Object.assign(Object.assign({}, options), this.options.layoutOptions), (group ? group.layoutOptions : {})));\n        } }, Dnd.defaults);\n})(Stencil || (Stencil = {}));\nvar ClassNames;\n(function (ClassNames) {\n    ClassNames.base = 'widget-stencil';\n    ClassNames.title = `${ClassNames.base}-title`;\n    ClassNames.search = `${ClassNames.base}-search`;\n    ClassNames.searchText = `${ClassNames.search}-text`;\n    ClassNames.content = `${ClassNames.base}-content`;\n    ClassNames.group = `${ClassNames.base}-group`;\n    ClassNames.groupTitle = `${ClassNames.group}-title`;\n    ClassNames.groupContent = `${ClassNames.group}-content`;\n})(ClassNames || (ClassNames = {}));\nvar Private;\n(function (Private) {\n    Private.defaultGroupName = '__default__';\n})(Private || (Private = {}));\n//# sourceMappingURL=index.js.map","import shapes from './shapes/index.js';\nimport { tc } from '@/i18n/index.js';\nimport { Stencil as DefaultStencil } from '@antv/x6-plugin-stencil';\n\nconst getStencilConfig = (target) => ({\n    title: tc('threatmodel.stencil.entities'),\n    target: target,\n    collapsable: true,\n    stencilGraphWidth: 500,\n    groups: [\n        {\n            name: 'components',\n            title: tc('threatmodel.stencil.components'),\n            collapsed: false,\n            collapsable: true\n        },\n        {\n            name: 'boundaries',\n            title: tc('threatmodel.stencil.boundaries'),\n            collapsed: false,\n            collapsable: true\n        },\n        {\n            name: 'metadata',\n            title: tc('threatmodel.stencil.metadata'),\n            collapsed: false,\n            collapsable: true\n        }\n    ],\n    layoutOptions: {\n        columns: 1,\n        center: true,\n        resizeToFit: true,\n    },\n});\n\nconst get = (target, container, StencilClass = DefaultStencil) => {\n    const stencil = new StencilClass(getStencilConfig(target));\n\n    stencil.load(\n        [\n            new shapes.ProcessShape(),\n            new shapes.StoreShape(),\n            new shapes.ActorShape(),\n            new shapes.FlowStencil(),\n        ],\n        'components'\n    );\n\n    stencil.load(\n        [\n            new shapes.TrustBoundaryBox({\n                width: 160,\n                height: 75,\n            }),\n            new shapes.TrustBoundaryCurveStencil(),\n        ],\n        'boundaries'\n    );\n\n    stencil.load([new shapes.TextBlock()], 'metadata');\n\n    stencil.onSearch({ target: { value: ' ' } });\n    stencil.onSearch({ target: { value: '' } });\n\n    container.appendChild(stencil.container);\n};\n\nexport default {\n    get,\n};\n\n","<template>\n    <div>\n        <b-row>\n            <b-col md=\"2\">\n                <div ref=\"stencil_container\"></div>\n            </b-col>\n            <b-col md=\"10\">\n                <b-row>\n                    <b-col>\n                        <h3 class=\"td-graph-title\">{{ diagram.title }}</h3>\n                    </b-col>\n                    <b-col align=\"right\">\n                        <td-graph-buttons :graph=\"graph\" @saved=\"saved\" @closed=\"closed\" />\n                    </b-col>\n                </b-row>\n                <b-row>\n                    <b-col style=\"display: flex;    width: 100vw; \">\n                        <div\n                            id=\"graph-container\"\n                            ref=\"graph_container\"\n                            style=\"height: 65vh; width: 100%; flex: 1; \"\n                        ></div>\n                    </b-col>\n                </b-row>\n            </b-col>\n        </b-row>\n        <td-graph-meta @threatSelected=\"threatSelected\" @threatSuggest=\"threatSuggest\" />\n\n        <div>\n            <td-keyboard-shortcuts />\n            <td-threat-edit-dialog ref=\"threatEditDialog\" />\n            <td-threat-suggest-dialog ref=\"threatSuggestDialog\" />\n        </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.td-graph-title {\n    margin-right: 15px;\n}\n</style>\n\n<script>\nimport { mapState } from 'vuex';\n\nimport TdGraphButtons from '@/components/GraphButtons.vue';\nimport TdGraphMeta from '@/components/GraphMeta.vue';\nimport TdKeyboardShortcuts from '@/components/KeyboardShortcuts.vue';\nimport TdThreatEditDialog from '@/components/ThreatEditDialog.vue';\nimport TdThreatSuggestDialog from './ThreatSuggestDialog.vue';\n\nimport { getProviderType } from '@/service/provider/providers.js';\nimport diagramService from '@/service/migration/diagram.js';\nimport stencil from '@/service/x6/stencil.js';\nimport tmActions from '@/store/actions/threatmodel.js';\n\nexport default {\n    name: 'TdGraph',\n    components: {\n        TdGraphButtons,\n        TdGraphMeta,\n        TdKeyboardShortcuts,\n        TdThreatEditDialog,\n        TdThreatSuggestDialog\n    },\n    computed: mapState({\n        diagram: (state) => state.threatmodel.selectedDiagram,\n        providerType: (state) => getProviderType(state.provider.selected)\n    }),\n    data() {\n        return {\n            graph: null\n        };\n    },\n    async mounted() {\n        this.init();\n    },\n    methods: {\n        init() {\n            this.graph = diagramService.edit(this.$refs.graph_container, this.diagram);\n            stencil.get(this.graph, this.$refs.stencil_container);\n            this.$store.dispatch(tmActions.notModified);\n            this.graph.getPlugin('history').on('change', () => {\n                const updated = Object.assign({}, this.diagram);\n                updated.cells = this.graph.toJSON().cells;\n                this.$store.dispatch(tmActions.diagramModified, updated);\n            });\n        },\n        threatSelected(threatId,state) {\n            this.$refs.threatEditDialog.editThreat(threatId,state);\n        },\n        threatSuggest(type){\n            this.$refs.threatSuggestDialog.showModal(type);\n        },\n        saved() {\n            console.debug('Save diagram');\n            const updated = Object.assign({}, this.diagram);\n            updated.cells = this.graph.toJSON().cells;\n            this.$store.dispatch(tmActions.diagramSaved, updated);\n            this.$store.dispatch(tmActions.saveModel);\n        },\n        async closed() {\n            if (!this.$store.getters.modelChanged || await this.getConfirmModal()) {\n                await this.$store.dispatch(tmActions.diagramClosed);\n                this.$router.push({ name: `${this.providerType}ThreatModel`, params: this.$route.params });\n            }\n        },\n        getConfirmModal() {\n            return this.$bvModal.msgBoxConfirm(this.$t('forms.discardMessage'), {\n                title: this.$t('forms.discardTitle'),\n                okVariant: 'danger',\n                okTitle: this.$t('forms.ok'),\n                cancelTitle: this.$t('forms.cancel'),\n                hideHeaderClose: true,\n                centered: true\n            });\n        }\n    },\n    destroyed() {\n        diagramService.dispose(this.graph);\n    }\n};\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Graph.vue?vue&type=template&id=aa736afc&scoped=true\"\nimport script from \"./Graph.vue?vue&type=script&lang=js\"\nexport * from \"./Graph.vue?vue&type=script&lang=js\"\nimport style0 from \"./Graph.vue?vue&type=style&index=0&id=aa736afc&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa736afc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"mt-5\">\n        <b-row>\n            <b-col>\n                <td-graph />\n            </b-col>\n        </b-row>\n    </div>\n</template>\n\n<script>\nimport TdGraph from '@/components/Graph.vue';\n\nexport default {\n    name: 'DiagramEdit',\n    components: {\n        TdGraph\n    }\n};\n\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DiagramEdit.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DiagramEdit.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DiagramEdit.vue?vue&type=template&id=43ba889e\"\nimport script from \"./DiagramEdit.vue?vue&type=script&lang=js\"\nexport * from \"./DiagramEdit.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticRenderFns","attrs","ref","_v","_s","diagram","title","graph","on","saved","closed","staticStyle","threatSelected","threatSuggest","deleteSelected","$t","directives","name","rawName","modifiers","noOp","undo","redo","zoomIn","zoomOut","toggleGrid","exportPNG","exportJPEG","exportSVG","closeDiagram","save","components","TdFormButton","computed","mapState","state","threatmodel","selectedDiagram","data","gridShowing","props","required","methods","$emit","getPlugin","canUndo","canRedo","zoom","console","debug","removeCells","getSelectedCells","hideGrid","showGrid","padding","component","scopedSlots","_u","key","fn","cellRef","disableNewThreat","$event","newThreat","_e","proxy","_l","threats","threat","idx","id","status","severity","description","type","isai","mitigation","modelType","number","AddThreatByType","AddThreatByContext","value","expression","onChangeName","model","callback","$$v","$set","onChangeProperties","isTrustBoundary","onChangeScope","outOfScope","onChangeBidirection","isBidirectional","reasonOutOfScope","privilegeLevel","handlesCardPayment","handlesGoodsOrServices","isWebApplication","isALog","storesCredentials","isEncrypted","isSigned","storesInventory","providesAuthentication","protocol","isPublicNetwork","cell","updateComponent","$forceUpdate","dataChanged","updateName","updateProperties","updateStyleAttrs","document","getElementById","disabled","String","Number","Boolean","threatTop","detail","TdGraphProperties","TdGraphThreats","mounted","init","$store","dispatch","CELL_UNSELECTED","threatId","createNewTypedThreat","diagramType","push","hasOpenThreats","length","tmActions","update","modified","CELL_DATA_UPDATED","shortcuts","shortcut","action","modalTitle","confirmDelete","immediateDelete","updateThreat","hideModal","threatTypes","statuses","score","priorities","res","threatModels","getThreatTypesByElement","Object","keys","forEach","includes","text","modelTypes","editThreat","crnthreat","find","x","$refs","editModal","show","warn","threatRef","objRef","threatFrequency","tmpfreq","getFrequencyMapByElement","k","toLowerCase","new","deleteThreat","threatMap","filter","hide","confirmed","$bvModal","msgBoxConfirm","okTitle","cancelTitle","okVariant","acceptSuggestion","previous","next","types","fixupByContext","suggestions","map","suggestion","GetContextSuggestions","element","undefined","threattypes","index","showModal","tmpThreat","t","ind","log","v4","content","GridLayout","__decorate","decorators","target","desc","d","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Dnd","targetScroller","options","scroller","targetGraph","targetModel","snapline","constructor","super","assign","defaults","container","createElement","prefixClassName","draggingGraph","delegateGraphOptions","width","height","async","start","node","evt","e","preventDefault","startBatch","draggingContainer","body","sourceNode","prepareDragging","clientX","clientY","local","updateNodePosition","isSnaplineEnabled","captureCursorOffset","view","draggingView","y","draggingNode","snap","delegateDocumentEvents","documentEvents","isEnabled","draggingModel","getDragNode","position","tolerance","scaled","scale","transform","getScale","sx","sy","Math","max","clearDragging","resetCells","delegateView","findViewByCell","undelegateEvents","off","fitToContent","allowNewOrigin","useCellGeometry","bbox","getBBox","geometryBBox","delta","getTopLeft","diff","draggingBBox","originOffset","updateGraphPosition","scrollTop","documentElement","scrollLeft","nodeBBox","offset","left","top","clientToLocal","current","snapped","tx","ty","silent","translate","snapOffset","onDragging","normalizeEvent","embeddingMode","embedding","enabled","isValidArea","isInsideValidArea","setEventData","candidateEmbedView","getEventData","processEmbedding","clearEmbedding","snapOnMoving","onDragEnd","ret","drop","onDropped","finalizeEmbedding","onDropInvalid","stopBatch","undelegateDocumentEvents","then","remove","p","targetRect","dndRect","dndContainer","getDropArea","isInsideDndRect","containsPoint","autoResize","outter","intersectsWithRect","elem","create","parseInt","clientWidth","clientHeight","pos","droppingNode","getDropNode","gridSize","getGridSize","snapToGrid","removeZIndex","validateNode","addCell","stencil","cid","valid","onRemove","dispose","grid","cells","isModel","sort","dryrun","nodes","getNodes","columns","rows","ceil","dx","dy","centre","center","resizeToFit","marginX","marginY","columnWidths","columnWidth","j","items","getNodesInColumn","getMaxDim","columnLefts","accumulate","rowHeights","rowHeight","getNodesInRow","rowTops","rowIndex","columnIndex","floor","cx","cy","size","getSize","calcHeight","calcWidth","setSize","prototype","clone","mousemove","touchmove","mouseup","touchend","touchcancel","reduce","memo","columnCount","ii","item","ClassNames","Private","Stencil","graphs","groups","defaultOptions","dnd","onSearch","initContainer","initSearch","initContent","initGroups","setTitle","startListening","load","groupName","Array","isArray","loadGroup","unload","toggleGroup","isGroupCollapsed","expandGroup","collapseGroup","isGroupCollapsable","group","trigger","collapseGroups","expandGroups","resizeGroup","resize","addGroup","initGroup","removeGroup","groupNames","unregisterGraphEvents","base","notFoundText","search","renderSearch","globalGraphOptions","stencilGraphOptions","groupElem","collapsable","collapsed","groupTitle","innerHTML","groupContent","graphOptionsInGroup","graphOptions","graphWidth","stencilGraphWidth","graphHeight","stencilGraphHeight","interacting","preventDefaultBlankAction","registerGraphEvents","clearGroups","setCollapsableState","defaultGroupName","some","every","input","placeholder","searchText","delegateEvents","stopListening","onDragStart","reverse","getModel","isNode","getGroup","layout","getGraph","minWidth","gridHeight","graphPadding","stencilGraphPadding","args","getGroupByNode","nodeMovable","keyword","found","matched","isCellMatched","renderer","gridWidth","filters","ignoreCase","shape","paths","path","val","getPropByPath","indexOf","onSearchFocusIn","onSearchFocusOut","onTitleClick","onGroupTitleClick","closest","allCollapsed","has","layoutOptions","getStencilConfig","tc","get","StencilClass","DefaultStencil","shapes","ProcessShape","StoreShape","ActorShape","FlowStencil","TrustBoundaryBox","TrustBoundaryCurveStencil","TextBlock","appendChild","TdGraphButtons","TdGraphMeta","TdKeyboardShortcuts","TdThreatEditDialog","TdThreatSuggestDialog","providerType","getProviderType","provider","selected","diagramService","edit","graph_container","stencil_container","notModified","updated","toJSON","diagramModified","threatEditDialog","threatSuggestDialog","diagramSaved","saveModel","getters","modelChanged","getConfirmModal","diagramClosed","$router","params","$route","hideHeaderClose","centered","destroyed","TdGraph"],"sourceRoot":""}